{"version":3,"file":"index-DgyvdMaP.js","sources":["../../../../node_modules/toggle-selection/index.js","../../../../node_modules/copy-to-clipboard/index.js","../../src/pages/quote/components/Message.tsx","../../src/pages/quote/utils/quoteCheckout.ts","../../src/pages/quote/components/QuoteDetailFooter.tsx","../../src/pages/quote/components/QuoteDetailHeader.tsx","../../src/pages/quote/components/QuoteDetailSummary.tsx","../../src/pages/quote/components/QuoteDetailTableCard.tsx","../../src/pages/quote/components/QuoteDetailTable.tsx","../../src/pages/quote/components/QuoteTermsAndConditions.tsx","../../src/pages/QuoteDetail/index.tsx"],"sourcesContent":["\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"âŒ˜\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // avoid screen readers from reading out loud the text\n    mark.ariaHidden = \"true\"\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","import {\n  KeyboardEvent,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { ArrowUpward as ArrowUpwardIcon } from '@mui/icons-material';\nimport { Box, Card, CardContent, TextField, Tooltip, useTheme } from '@mui/material';\nimport { format, formatDistanceStrict } from 'date-fns';\n\nimport { B3CollapseContainer } from '@/components';\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useB3Lang } from '@/lib/lang';\nimport { GlobalContext } from '@/shared/global';\nimport { updateQuote } from '@/shared/service/b2b';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { displayExtendedFormat, storeHash } from '@/utils';\n\ninterface MessageProps {\n  date?: number;\n  message?: string;\n  role?: string;\n  isCustomer?: boolean;\n  key?: number | string;\n  read?: number;\n  sendTime?: number;\n}\n\ninterface MsgsProps {\n  msgs: MessageProps[];\n  id: string | number;\n  email: string;\n  isB2BUser: boolean;\n  status: number;\n}\n\ninterface CustomerMessageProps {\n  msg: MessageProps;\n  isEndMessage?: boolean;\n  isCustomer?: boolean;\n}\n\nfunction ChatMessage({ msg, isEndMessage, isCustomer }: CustomerMessageProps) {\n  const b3Lang = useB3Lang();\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: isCustomer ? 'flex-end' : 'flex-start',\n        paddingTop: '5px',\n      }}\n    >\n      {msg?.role && (\n        <Box\n          sx={{\n            height: '14px',\n            fontWeight: 400,\n            lineHeight: '14px',\n            fontSize: '10px',\n            letterSpacing: '0.17px',\n            color: 'rgba(0, 0, 0, 0.38)',\n          }}\n        >\n          {msg.role}\n        </Box>\n      )}\n      {msg?.message && (\n        <Box\n          sx={{\n            display: 'inline-block',\n            lineHeight: '34px',\n            padding: '0 10px',\n            background: isCustomer ? 'rgba(25, 118, 210, 0.3)' : 'rgba(0, 0, 0, 0.12)',\n            borderRadius: '18px',\n            m: '1px',\n          }}\n        >\n          <Tooltip title={format((msg.sendTime || 0) * 1000, 'K:m aa')} placement=\"top\" arrow>\n            <Box\n              sx={{\n                wordBreak: 'break-word',\n              }}\n            >\n              {msg.message}\n            </Box>\n          </Tooltip>\n          {isEndMessage && (\n            <Box\n              sx={{\n                height: '14px',\n                fontWeight: 400,\n                lineHeight: '14px',\n                fontSize: '10px',\n                letterSpacing: '0.17px',\n                color: 'rgba(0, 0, 0, 0.38)',\n              }}\n            >\n              {`${b3Lang('quoteDetail.message.sent')} ${formatDistanceStrict(\n                new Date((msg.sendTime || 0) * 1000),\n                new Date(),\n                {\n                  addSuffix: true,\n                },\n              )}`}\n            </Box>\n          )}\n        </Box>\n      )}\n    </Box>\n  );\n}\n\ninterface DateMessageProps {\n  msg: MessageProps;\n}\n\nfunction DateMessage({ msg }: DateMessageProps) {\n  return (\n    <Box\n      sx={{\n        color: 'rgba(0, 0, 0, 0.6)',\n        textAlign: 'center',\n        height: '21px',\n        mb: '5px',\n      }}\n    >\n      {`${displayExtendedFormat(msg?.date || 0)}`}\n    </Box>\n  );\n}\n\nfunction Message({ msgs, id, isB2BUser, email, status }: MsgsProps) {\n  const { dispatch: globalDispatch } = useContext(GlobalContext);\n\n  const theme = useTheme();\n  const primaryColor = theme.palette.primary.main;\n  const b3Lang = useB3Lang();\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const changeReadRef = useRef(0);\n\n  const [messages, setMessages] = useState<MessageProps[]>([]);\n\n  const [read, setRead] = useState<number>(0);\n\n  const [message, setMessage] = useState<string>('');\n\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const { quotesUpdateMessageActionsPermission } = useAppSelector(rolePermissionSelector);\n  const quotesUpdateMessagePermission = isB2BUser ? quotesUpdateMessageActionsPermission : true;\n\n  const convertedMsgs = (msgs: MessageProps[]) => {\n    let nextMsg: MessageProps = {};\n    const getNewMsgs: MessageProps[] = [];\n    let readNum = 0;\n    msgs.forEach((msg: MessageProps, index: number) => {\n      if (index === 0) {\n        getNewMsgs.push({\n          isCustomer: !msg.role?.includes('Sales rep:'),\n          date: msg?.date,\n          key: `${msg?.date}date`,\n        });\n        getNewMsgs.push({\n          isCustomer: !msg.role?.includes('Sales rep:'),\n          message: msg.message,\n          sendTime: msg.date,\n          role: msg.role,\n          key: msg?.date,\n        });\n        nextMsg = msg;\n        nextMsg.isCustomer = !msg.role?.includes('Sales rep:');\n      } else {\n        if ((msg?.date || 0) - (nextMsg?.date || 0) > 60 * 60) {\n          getNewMsgs.push({\n            isCustomer: !msg.role?.includes('Sales rep:'),\n            date: msg?.date,\n            key: `${msg?.date}date`,\n          });\n        }\n\n        if (nextMsg.isCustomer === !msg.role?.includes('Sales rep:')) {\n          getNewMsgs.push({\n            isCustomer: !msg.role?.includes('Sales rep:'),\n            message: msg.message,\n            sendTime: msg.date,\n            key: msg?.date,\n          });\n        } else {\n          getNewMsgs.push({\n            isCustomer: !msg.role?.includes('Sales rep:'),\n            message: msg.message,\n            role: msg.role,\n            sendTime: msg.date,\n            key: msg?.date,\n          });\n        }\n        nextMsg = msg;\n        nextMsg.isCustomer = !msg.role?.includes('Sales rep:');\n      }\n\n      if (msg.role?.includes('Sales rep:') && !msg.read) {\n        readNum += 1;\n      }\n    });\n\n    setRead(readNum);\n\n    setMessages(getNewMsgs);\n  };\n\n  const title = useMemo(\n    () => (\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        {`${b3Lang('quoteDetail.message.message')} `}\n        {read !== 0 && (\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              width: '20px',\n              height: '20px',\n              borderRadius: '50%',\n              background: primaryColor || '#1976D2',\n              color: '#fff',\n              fontSize: '12px',\n              ml: '8px',\n            }}\n          >\n            {read}\n          </Box>\n        )}\n      </Box>\n    ),\n    // disabling this rule as b3Lang will cause rendering issues\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [primaryColor, read],\n  );\n\n  useEffect(() => {\n    convertedMsgs(msgs);\n  }, [msgs]);\n\n  useEffect(() => {\n    if (messagesEndRef.current && messages.length) {\n      messagesEndRef.current.scrollTop = messagesEndRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const updateMsgs = async (msg: string) => {\n    try {\n      setLoading(true);\n      const {\n        quoteUpdate: {\n          quote: { trackingHistory },\n        },\n      } = await updateQuote({\n        id: Number(id),\n        quoteData: {\n          message: msg,\n          lastMessage: parseInt(`${new Date().getTime() / 1000}`, 10),\n          userEmail: email || '',\n          storeHash,\n        },\n      });\n      setMessage('');\n      setRead(0);\n      convertedMsgs(trackingHistory);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateMessage = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      updateMsgs((e.target as HTMLInputElement).value || '');\n    }\n  };\n\n  const handleOnChange = useCallback(\n    (open: boolean) => {\n      if (open) {\n        if (!quotesUpdateMessagePermission && isB2BUser) return;\n\n        if (changeReadRef.current === 0 && msgs.length) {\n          updateQuote({\n            id: Number(id),\n            quoteData: {\n              lastMessage: msgs[msgs.length - 1]?.date,\n              userEmail: email || '',\n              storeHash,\n            },\n          });\n        }\n        setRead(0);\n        if (messagesEndRef.current) {\n          messagesEndRef.current.scrollTop = messagesEndRef.current.scrollHeight;\n        }\n        changeReadRef.current += 1;\n      }\n    },\n    [email, id, isB2BUser, msgs, quotesUpdateMessagePermission],\n  );\n\n  useEffect(() => {\n    globalDispatch({\n      type: 'common',\n      payload: {\n        quoteDetailHasNewMessages: read !== 0,\n      },\n    });\n    // Disabling this rule as dispatcher dep globalDispatch is the same between renders\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [read]);\n\n  return (\n    <Card>\n      <CardContent\n        sx={{\n          p: '16px !important',\n        }}\n      >\n        <B3CollapseContainer handleOnChange={handleOnChange} title={title}>\n          <Box\n            sx={{\n              padding: '16px 0',\n            }}\n          >\n            <Box\n              sx={{\n                position: 'relative',\n                color: 'rgba(0, 0, 0, 0.6)',\n                opacity: 0.6,\n                textAlign: 'left',\n                width: '100%',\n                fontSize: '14px',\n              }}\n            >\n              {b3Lang('quoteDetail.message.merchantAnswers')}\n            </Box>\n            <Box\n              ref={messagesEndRef}\n              sx={{\n                mt: '20px',\n                maxHeight: '280px',\n                overflowY: 'auto',\n                '&::-webkit-scrollbar': {\n                  display: 'none',\n                },\n              }}\n            >\n              {messages.map((item: MessageProps, index: number) => (\n                <Box key={item.key}>\n                  <ChatMessage\n                    msg={item}\n                    isEndMessage={index === messages.length - 1}\n                    isCustomer={!!item.isCustomer}\n                  />\n                  {item.date && <DateMessage msg={item} />}\n                </Box>\n              ))}\n            </Box>\n          </Box>\n\n          {status !== 4 && quotesUpdateMessagePermission && (\n            <B3Spin\n              isSpinning={loading}\n              spinningHeight={50}\n              size={10}\n              isCloseLoading\n              tip=\"waiting..\"\n            >\n              <Box\n                sx={{\n                  display: 'flex',\n                  width: '100%',\n                }}\n              >\n                <TextField\n                  onKeyDown={updateMessage}\n                  sx={{\n                    width: '100%',\n                    '& .MuiFormLabel-root': {\n                      color: 'rgba(0, 0, 0, 0.38)',\n                    },\n                    '& input': {\n                      padding: '1.5rem 0.7rem 0.5rem',\n                    },\n                  }}\n                  value={message}\n                  onChange={(event) => {\n                    setMessage(event.target.value);\n                  }}\n                  size=\"small\"\n                  label={b3Lang('quoteDetail.message.typeMessage')}\n                  variant=\"filled\"\n                />\n                <Box\n                  onClick={() => updateMsgs(message)}\n                  sx={{\n                    width: '42px',\n                    height: '36px',\n                    margin: '10px 0 0 10px',\n                    background: '#BAD6F2',\n                    borderRadius: '50%',\n                  }}\n                >\n                  <ArrowUpwardIcon\n                    sx={{\n                      height: '18px',\n                      width: '18px',\n                      margin: '8px 0 0 9px',\n                      color: '#0000008A',\n                    }}\n                    fontSize=\"small\"\n                  />\n                </Box>\n              </Box>\n            </B3Spin>\n          )}\n        </B3CollapseContainer>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default Message;\n","import { Location, NavigateFunction } from 'react-router-dom';\n\nimport { getBCStorefrontProductSettings, quoteCheckout } from '@/shared/service/b2b';\nimport { setQuoteDetailToCheckoutUrl, store } from '@/store';\nimport { attemptCheckoutLoginAndRedirect, setQuoteToStorage } from '@/utils/b3checkout';\nimport b2bLogger from '@/utils/b3Logger';\nimport { platform } from '@/utils/basicConfig';\nimport { getSearchVal } from '@/utils/loginInfo';\n\ninterface QuoteCheckout {\n  role: string | number;\n  proceedingCheckoutFn: () => boolean;\n  location: Location;\n  quoteId: string;\n  navigate?: NavigateFunction;\n}\n\nexport const handleQuoteCheckout = async ({\n  role,\n  proceedingCheckoutFn,\n  location,\n  quoteId,\n  navigate,\n}: QuoteCheckout) => {\n  try {\n    store.dispatch(setQuoteDetailToCheckoutUrl(''));\n\n    const isHideQuoteCheckout = proceedingCheckoutFn();\n\n    if (isHideQuoteCheckout) return;\n\n    const {\n      storefrontProductSettings: { hidePriceFromGuests },\n    } = await getBCStorefrontProductSettings();\n\n    if (hidePriceFromGuests && Number(role) === 100 && navigate) {\n      store.dispatch(setQuoteDetailToCheckoutUrl(location.pathname + location.search));\n      navigate('/login');\n      return;\n    }\n\n    const date = getSearchVal(location.search, 'date');\n\n    const res = await quoteCheckout({\n      id: Number(quoteId),\n    });\n\n    setQuoteToStorage(quoteId, date);\n    const {\n      quoteCheckout: {\n        quoteCheckout: { checkoutUrl, cartId },\n      },\n    } = res;\n\n    if (platform === 'bigcommerce') {\n      window.location.href = checkoutUrl;\n      return;\n    }\n\n    if (platform === 'catalyst') {\n      window.location.href = `/checkout?cartId=${cartId}`;\n      return;\n    }\n\n    await attemptCheckoutLoginAndRedirect(cartId, checkoutUrl as string);\n  } catch (err) {\n    b2bLogger.error(err);\n  }\n};\n","import { useLocation, useNavigate } from 'react-router-dom';\nimport { Box } from '@mui/material';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\n\nimport { handleQuoteCheckout } from '../utils/quoteCheckout';\n\ninterface QuoteDetailFooterProps {\n  quoteId: string;\n  role: string | number;\n  isAgenting: boolean;\n  status: number;\n  proceedingCheckoutFn: () => boolean;\n}\n\nfunction QuoteDetailFooter(props: QuoteDetailFooterProps) {\n  const { quoteId, role, isAgenting, status, proceedingCheckoutFn } = props;\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const containerStyle = isMobile\n    ? {\n        alignItems: 'flex-end',\n        flexDirection: 'column',\n      }\n    : {\n        alignItems: 'center',\n      };\n\n  return status !== 5 ? (\n    <Box\n      sx={{\n        position: 'fixed',\n        bottom: isMobile && isAgenting ? '52px' : 0,\n        left: 0,\n        backgroundColor: '#fff',\n        width: '100%',\n        padding: '0.8rem 1rem',\n        height: 'auto',\n        display: 'flex',\n        zIndex: '999',\n        justifyContent: isMobile ? 'center' : 'flex-end',\n        displayPrint: 'none',\n        ...containerStyle,\n      }}\n    >\n      <CustomButton\n        variant=\"contained\"\n        onClick={() => {\n          handleQuoteCheckout({\n            proceedingCheckoutFn,\n            role,\n            location,\n            quoteId,\n            navigate,\n          });\n        }}\n        sx={{\n          width: isMobile ? '100%' : 'auto',\n        }}\n      >\n        {b3Lang('quoteDetail.footer.proceedToCheckout')}\n      </CustomButton>\n    </Box>\n  ) : null;\n}\n\nexport default QuoteDetailFooter;\n","import { useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ArrowBackIosNew } from '@mui/icons-material';\nimport { Box, Grid, styled, Typography, useTheme } from '@mui/material';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { b3HexToRgb, getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\nimport { displayFormat } from '@/utils';\n\nimport QuoteStatus from './QuoteStatus';\n\nconst StyledCreateName = styled('div')(() => ({\n  display: 'flex',\n  alignItems: 'center',\n  marginTop: '0.5rem',\n}));\n\ninterface QuoteDetailHeaderProps {\n  status: string;\n  quoteNumber: string;\n  issuedAt: number;\n  expirationDate: number;\n  exportPdf: () => void;\n  printQuote: () => Promise<void>;\n  role: string | number;\n  salesRepInfo: { [key: string]: string };\n}\n\nfunction QuoteDetailHeader(props: QuoteDetailHeaderProps) {\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n\n  const {\n    status,\n    quoteNumber,\n    issuedAt,\n    expirationDate,\n    exportPdf,\n    printQuote,\n    role,\n    salesRepInfo,\n  } = props;\n\n  const {\n    state: {\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n\n  const customColor = getContrastColor(backgroundColor);\n\n  const theme = useTheme();\n\n  const primaryColor = theme.palette.primary.main;\n\n  const navigate = useNavigate();\n  const gridOptions = (xs: number) =>\n    isMobile\n      ? {}\n      : {\n          xs,\n        };\n\n  return (\n    <>\n      {Number(role) !== 100 && (\n        <Box\n          sx={{\n            marginBottom: '10px',\n            width: 'fit-content',\n            displayPrint: 'none',\n          }}\n        >\n          <Box\n            sx={{\n              color: '#1976d2',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n            }}\n            onClick={() => {\n              navigate('/quotes');\n            }}\n          >\n            <ArrowBackIosNew\n              fontSize=\"small\"\n              sx={{\n                fontSize: '12px',\n                marginRight: '0.5rem',\n                color: primaryColor,\n              }}\n            />\n            <p\n              style={{\n                color: primaryColor,\n                margin: '0',\n              }}\n            >\n              {b3Lang('quoteDetail.header.backToQuoteLists')}\n            </p>\n          </Box>\n        </Box>\n      )}\n\n      <Grid\n        container\n        spacing={2}\n        sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          flexDirection: isMobile ? 'column' : 'row',\n          mb: isMobile ? '16px' : '',\n        }}\n      >\n        <Grid\n          item\n          {...gridOptions(8)}\n          sx={{\n            color: customColor,\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: isMobile ? 'start' : 'center',\n              flexDirection: isMobile ? 'column' : 'row',\n            }}\n          >\n            <Typography\n              sx={{\n                marginRight: '10px',\n                fontSize: '34px',\n                color: b3HexToRgb(customColor, 0.87),\n              }}\n            >\n              {b3Lang('quoteDetail.header.quoteNumber', {\n                quoteNumber: quoteNumber || '',\n              })}\n            </Typography>\n\n            <QuoteStatus code={status} />\n          </Box>\n          {(salesRepInfo?.salesRepName || salesRepInfo?.salesRepEmail) && (\n            <StyledCreateName>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{\n                  marginRight: '0.5rem',\n                  fontSize: '16px',\n                }}\n              >\n                {b3Lang('quoteDetail.header.salesRep')}\n              </Typography>\n              <span>\n                {salesRepInfo?.salesRepEmail !== ''\n                  ? `${salesRepInfo?.salesRepName}(${salesRepInfo?.salesRepEmail})`\n                  : salesRepInfo?.salesRepName}\n              </span>\n            </StyledCreateName>\n          )}\n          <Box>\n            <StyledCreateName>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{\n                  marginRight: '0.5rem',\n                  fontSize: '16px',\n                }}\n              >\n                {b3Lang('quoteDetail.header.issuedOn')}\n              </Typography>\n              <span>{`${issuedAt ? displayFormat(Number(issuedAt)) : ''}`}</span>\n            </StyledCreateName>\n            <StyledCreateName>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{\n                  marginRight: '0.5rem',\n                  fontSize: '16px',\n                }}\n              >\n                {b3Lang('quoteDetail.header.expirationDate')}\n              </Typography>\n              <span>{`${expirationDate ? displayFormat(Number(expirationDate)) : ''}`}</span>\n            </StyledCreateName>\n          </Box>\n        </Grid>\n        {Number(role) !== 100 && (\n          <Grid\n            item\n            sx={{\n              textAlign: isMobile ? 'none' : 'end',\n              displayPrint: 'none',\n            }}\n            {...gridOptions(4)}\n          >\n            <Box>\n              <CustomButton\n                variant=\"outlined\"\n                sx={{\n                  marginRight: '1rem',\n                  displayPrint: 'none',\n                }}\n                onClick={printQuote}\n              >\n                {b3Lang('quoteDetail.header.print')}\n              </CustomButton>\n              <CustomButton variant=\"outlined\" onClick={exportPdf}>\n                {b3Lang('quoteDetail.header.downloadPDF')}\n              </CustomButton>\n            </Box>\n          </Grid>\n        )}\n      </Grid>\n    </>\n  );\n}\n\nexport default QuoteDetailHeader;\n","import { Box, Card, CardContent, Grid, Typography } from '@mui/material';\n\nimport { useB3Lang } from '@/lib/lang';\nimport { useAppSelector } from '@/store';\nimport { currencyFormatConvert } from '@/utils';\n\ninterface Summary {\n  originalSubtotal: string | number;\n  discount: string | number;\n  tax: string | number;\n  shipping: string | number;\n  totalAmount: string | number;\n}\n\ninterface QuoteDetailSummaryProps {\n  quoteSummary: Summary;\n  quoteDetailTax: number;\n  status: string;\n  quoteDetail: CustomFieldItems;\n  isHideQuoteCheckout: boolean;\n}\n\nexport default function QuoteDetailSummary({\n  quoteSummary: { originalSubtotal, discount, tax, shipping, totalAmount },\n  quoteDetailTax = 0,\n  status,\n  quoteDetail,\n  isHideQuoteCheckout,\n}: QuoteDetailSummaryProps) {\n  const b3Lang = useB3Lang();\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n  const showInclusiveTaxPrice = useAppSelector(({ global }) => global.showInclusiveTaxPrice);\n\n  const getCurrentPrice = (price: number, quoteDetailTax: number) => {\n    if (enteredInclusiveTax) {\n      return showInclusiveTaxPrice ? price : price - quoteDetailTax;\n    }\n    return showInclusiveTaxPrice ? price + quoteDetailTax : price;\n  };\n\n  const priceFormat = (price: number) =>\n    currencyFormatConvert(price, {\n      currency: quoteDetail.currency,\n      isConversionRate: false,\n      useCurrentCurrency: !!quoteDetail.currency,\n    });\n\n  const getShippingAndTax = () => {\n    if (quoteDetail?.shippingMethod?.id) {\n      return {\n        shippingText: `${b3Lang('quoteDetail.summary.shipping')}(${\n          quoteDetail?.shippingMethod?.description || ''\n        })`,\n        shippingVal: priceFormat(Number(shipping)),\n        taxText: b3Lang('quoteDetail.summary.tax'),\n        taxVal: priceFormat(Number(tax)),\n      };\n    }\n\n    if (!quoteDetail?.salesRepEmail && !quoteDetail?.shippingMethod?.id && Number(status) === 1) {\n      return {\n        shippingText: b3Lang('quoteDetail.summary.shipping'),\n        shippingVal: b3Lang('quoteDetail.summary.tbd'),\n        taxText: b3Lang('quoteDetail.summary.estimatedTax'),\n        taxVal: priceFormat(Number(tax)),\n      };\n    }\n\n    if (\n      quoteDetail?.salesRepEmail &&\n      !quoteDetail?.shippingMethod?.id &&\n      (Number(status) === 1 || Number(status) === 5)\n    ) {\n      return {\n        shippingText: `${b3Lang('quoteDetail.summary.shipping')}(${b3Lang(\n          'quoteDetail.summary.quoteCheckout',\n        )})`,\n        shippingVal: b3Lang('quoteDetail.summary.tbd'),\n        taxText: b3Lang('quoteDetail.summary.tax'),\n        taxVal: b3Lang('quoteDetail.summary.tbd'),\n      };\n    }\n\n    return null;\n  };\n\n  const shippingAndTax = getShippingAndTax();\n\n  const showPrice = (price: string | number): string | number => {\n    if (isHideQuoteCheckout) return b3Lang('quoteDraft.quoteSummary.tbd');\n\n    return price;\n  };\n\n  const subtotalPrice = Number(originalSubtotal);\n  const quotedSubtotal = Number(originalSubtotal) - Number(discount);\n  return (\n    <Card>\n      <CardContent>\n        <Box>\n          <Typography variant=\"h5\">{b3Lang('quoteDetail.summary.quoteSummary')}</Typography>\n          <Box\n            sx={{\n              marginTop: '20px',\n              color: '#212121',\n            }}\n          >\n            {quoteDetail?.displayDiscount && (\n              <Grid\n                container\n                justifyContent=\"space-between\"\n                sx={{\n                  margin: '4px 0',\n                }}\n              >\n                <Typography>{b3Lang('quoteDetail.summary.originalSubtotal')}</Typography>\n                <Typography>\n                  {showPrice(priceFormat(getCurrentPrice(subtotalPrice, quoteDetailTax)))}\n                </Typography>\n              </Grid>\n            )}\n\n            {!quoteDetail?.salesRepEmail && Number(status) === 1 ? null : (\n              <Grid\n                container\n                justifyContent=\"space-between\"\n                sx={{\n                  margin: '4px 0',\n                  display: quoteDetail?.displayDiscount ? '' : 'none',\n                }}\n              >\n                <Typography>{b3Lang('quoteDetail.summary.discountAmount')}</Typography>\n                <Typography>\n                  {Number(discount) > 0\n                    ? `-${priceFormat(Number(discount))}`\n                    : priceFormat(Number(discount))}\n                </Typography>\n              </Grid>\n            )}\n\n            <Grid\n              container\n              justifyContent=\"space-between\"\n              sx={{\n                margin: '4px 0',\n              }}\n            >\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {b3Lang('quoteDetail.summary.quotedSubtotal')}\n              </Typography>\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {showPrice(priceFormat(getCurrentPrice(quotedSubtotal, quoteDetailTax)))}\n              </Typography>\n            </Grid>\n\n            {shippingAndTax && (\n              <>\n                <Grid\n                  container\n                  justifyContent=\"space-between\"\n                  sx={{\n                    margin: '4px 0',\n                  }}\n                >\n                  <Typography\n                    sx={{\n                      maxWidth: '70%',\n                      wordBreak: 'break-word',\n                    }}\n                  >\n                    {shippingAndTax.shippingText}\n                  </Typography>\n                  <Typography>{showPrice(shippingAndTax.shippingVal)}</Typography>\n                </Grid>\n                <Grid\n                  container\n                  justifyContent=\"space-between\"\n                  sx={{\n                    margin: '4px 0',\n                  }}\n                >\n                  <Typography>{shippingAndTax.taxText}</Typography>\n                  <Typography>{showPrice(shippingAndTax.taxVal)}</Typography>\n                </Grid>\n              </>\n            )}\n\n            <Grid\n              container\n              justifyContent=\"space-between\"\n              sx={{\n                margin: '24px 0 0',\n              }}\n            >\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {b3Lang('quoteDetail.summary.grandTotal')}\n              </Typography>\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {showPrice(priceFormat(Number(totalAmount)))}\n              </Typography>\n            </Grid>\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n","import { Box, CardContent, styled, Typography } from '@mui/material';\n\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useB3Lang } from '@/lib/lang';\nimport { useAppSelector } from '@/store';\nimport { currencyFormatConvert } from '@/utils';\nimport { getBCPrice } from '@/utils/b3Product/b3Product';\n\ninterface QuoteTableCardProps {\n  item: any;\n  len: number;\n  getTaxRate: (taxClassId: number, variants: any) => number;\n  itemIndex?: number;\n  showPrice: (price: string, row: CustomFieldItems) => string | number;\n  displayDiscount: boolean;\n  currency: CurrencyProps;\n}\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nfunction QuoteDetailTableCard(props: QuoteTableCardProps) {\n  const {\n    item: quoteTableItem,\n    len,\n    itemIndex,\n    getTaxRate,\n    showPrice,\n    currency,\n    displayDiscount,\n  } = props;\n  const b3Lang = useB3Lang();\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n\n  const {\n    basePrice,\n    quantity,\n    imageUrl,\n    productName,\n    options,\n    sku,\n    notes,\n    offeredPrice,\n    productsSearch: { productUrl, variants = [], taxClassId },\n  } = quoteTableItem;\n\n  const taxRate = getTaxRate(taxClassId, variants);\n  const taxPrice = enteredInclusiveTax\n    ? (Number(basePrice) * taxRate) / (1 + taxRate)\n    : Number(basePrice) * taxRate;\n  const discountTaxPrice = enteredInclusiveTax\n    ? (Number(offeredPrice) * taxRate) / (1 + taxRate)\n    : Number(offeredPrice) * taxRate;\n\n  const price = getBCPrice(Number(basePrice), taxPrice);\n  const discountPrice = getBCPrice(Number(offeredPrice), discountTaxPrice);\n\n  const isDiscount = Number(basePrice) - Number(offeredPrice) > 0 && displayDiscount;\n\n  const total = Number(price) * Number(quantity);\n  const totalWithDiscount = discountPrice * Number(quantity);\n\n  return (\n    <Box\n      key={quoteTableItem.id}\n      width=\"100%\"\n      sx={{\n        borderTop: '1px solid #D9DCE9',\n        borderBottom: itemIndex === len - 1 ? '1px solid #D9DCE9' : '',\n      }}\n    >\n      <CardContent\n        sx={{\n          color: '#313440',\n          display: 'flex',\n          pl: 0,\n        }}\n      >\n        <Box>\n          <StyledImage src={imageUrl || PRODUCT_DEFAULT_IMAGE} alt=\"Product-img\" loading=\"lazy\" />\n        </Box>\n        <Box\n          sx={{\n            flex: 1,\n          }}\n        >\n          <Typography\n            variant=\"body1\"\n            color=\"#212121\"\n            onClick={() => {\n              const {\n                location: { origin },\n              } = window;\n\n              if (productUrl) {\n                window.location.href = `${origin}${productUrl}`;\n              }\n            }}\n            sx={{\n              cursor: 'pointer',\n            }}\n          >\n            {productName}\n          </Typography>\n          <Typography variant=\"body1\" color=\"#616161\">\n            {sku}\n          </Typography>\n          <Box\n            sx={{\n              margin: '1rem 0',\n            }}\n          >\n            {options.length > 0 && (\n              <Box>\n                {options.map((option: any) => (\n                  <Typography\n                    sx={{\n                      fontSize: '0.75rem',\n                      lineHeight: '1.5',\n                      color: '#455A64',\n                    }}\n                    key={option.optionName}\n                  >\n                    {`${option.optionName}: ${option.optionLabel}`}\n                  </Typography>\n                ))}\n              </Box>\n            )}\n          </Box>\n          <Typography variant=\"body1\" color=\"#616161\">\n            {notes}\n          </Typography>\n\n          <Typography\n            sx={{\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('quoteDetail.tableCard.price')}\n            {isDiscount && (\n              <span\n                style={{\n                  marginLeft: '5px',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {`${showPrice(\n                  currencyFormatConvert(price, {\n                    currency,\n                  }),\n                  quoteTableItem,\n                )}`}\n              </span>\n            )}\n            <span\n              style={{\n                marginLeft: '5px',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {`${showPrice(\n                currencyFormatConvert(offeredPrice, {\n                  currency,\n                }),\n                quoteTableItem,\n              )}`}\n            </span>\n          </Typography>\n\n          <Typography\n            sx={{\n              padding: '12px 0',\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('quoteDetail.tableCard.qty', { quantity })}\n          </Typography>\n\n          <Typography\n            sx={{\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('quoteDetail.tableCard.total')}\n            {isDiscount && (\n              <span\n                style={{\n                  marginLeft: '5px',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {`${showPrice(\n                  currencyFormatConvert(total, {\n                    currency,\n                  }),\n                  quoteTableItem,\n                )}`}\n              </span>\n            )}\n            <span\n              style={{\n                marginLeft: '5px',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {`${showPrice(\n                currencyFormatConvert(totalWithDiscount, {\n                  currency,\n                }),\n                quoteTableItem,\n              )}`}\n            </span>\n          </Typography>\n        </Box>\n      </CardContent>\n    </Box>\n  );\n}\n\nexport default QuoteDetailTableCard;\n","import { forwardRef, Ref, useImperativeHandle, useRef, useState } from 'react';\nimport { Box, styled, Typography } from '@mui/material';\n\nimport { B3PaginationTable, GetRequestList } from '@/components/table/B3PaginationTable';\nimport { TableColumnItem } from '@/components/table/B3Table';\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useB3Lang } from '@/lib/lang';\nimport { useAppSelector } from '@/store';\nimport { currencyFormatConvert } from '@/utils';\nimport { getBCPrice, getDisplayPrice } from '@/utils/b3Product/b3Product';\n\nimport QuoteDetailTableCard from './QuoteDetailTableCard';\n\ninterface ProductInfoProps {\n  basePrice: number | string;\n  baseSku: string;\n  createdAt: number;\n  discount: number | string;\n  enteredInclusive: boolean;\n  id: number | string;\n  itemId: number;\n  optionList: string;\n  primaryImage: string;\n  productId: number;\n  productName: string;\n  productUrl: string;\n  quantity: number | string;\n  tax: number | string;\n  updatedAt: number;\n  variantId: number;\n  variantSku: string;\n  productsSearch: CustomFieldItems;\n  offeredPrice: number | string;\n}\n\ninterface ListItemProps {\n  node: ProductInfoProps;\n}\n\ninterface ShoppingDetailTableProps {\n  total: number;\n  getQuoteTableDetails: GetRequestList<SearchProps, ProductInfoProps>;\n  isHandleApprove: boolean;\n  getTaxRate: (taxClassId: number, variants: any) => number;\n  displayDiscount: boolean;\n  currency: CurrencyProps;\n}\n\ninterface SearchProps {\n  first?: number;\n  offset?: number;\n}\n\ninterface OptionProps {\n  optionId: number;\n  optionLabel: string;\n  optionName: string;\n  optionValue: string | number;\n}\n\ninterface PaginationTableRefProps extends HTMLInputElement {\n  getList: () => void;\n  setList: (items?: ListItemProps[]) => void;\n  getSelectedValue: () => void;\n}\n\nconst StyledQuoteTableContainer = styled('div')(() => ({\n  backgroundColor: '#FFFFFF',\n  padding: '1rem',\n  width: '100%',\n  border: '1px solid #E0E0E0',\n  boxShadow:\n    '0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)',\n  borderRadius: '4px',\n\n  '& tbody': {\n    '& tr': {\n      '& td': {\n        verticalAlign: 'top',\n      },\n      '& td: first-of-type': {\n        verticalAlign: 'inherit',\n      },\n    },\n    '& tr: hover': {\n      '& #shoppingList-actionList': {\n        opacity: 1,\n      },\n    },\n  },\n}));\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nfunction QuoteDetailTable(props: ShoppingDetailTableProps, ref: Ref<unknown>) {\n  const b3Lang = useB3Lang();\n  const { total, getQuoteTableDetails, getTaxRate, isHandleApprove, displayDiscount, currency } =\n    props;\n\n  const isEnableProduct = useAppSelector(\n    ({ global }) => global.blockPendingQuoteNonPurchasableOOS.isEnableProduct,\n  );\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n\n  const paginationTableRef = useRef<PaginationTableRefProps | null>(null);\n\n  const [search, setSearch] = useState<SearchProps>({\n    first: 12,\n    offset: 0,\n  });\n\n  useImperativeHandle(ref, () => ({\n    getList: () => paginationTableRef.current?.getList(),\n    refreshList: () => {\n      setSearch({\n        offset: 0,\n      });\n    },\n  }));\n\n  const showPrice = (price: string, row: CustomFieldItems): string | number => {\n    if (isEnableProduct) {\n      if (isHandleApprove) return price;\n      return getDisplayPrice({\n        price,\n        productInfo: row,\n        showText: b3Lang('quoteDraft.quoteSummary.tbd'),\n      });\n    }\n    return price;\n  };\n  const columnItems: TableColumnItem<ProductInfoProps>[] = [\n    {\n      key: 'Product',\n      title: b3Lang('quoteDetail.table.product'),\n      render: (row: CustomFieldItems) => {\n        const optionsValue = row.options;\n        const productUrl = row.productsSearch?.productUrl;\n\n        return (\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'flex-start',\n            }}\n          >\n            <StyledImage\n              src={row.imageUrl || PRODUCT_DEFAULT_IMAGE}\n              alt=\"Product-img\"\n              loading=\"lazy\"\n            />\n            <Box>\n              <Typography\n                variant=\"body1\"\n                color=\"#212121\"\n                onClick={() => {\n                  const {\n                    location: { origin },\n                  } = window;\n                  if (productUrl) {\n                    window.location.href = `${origin}${productUrl}`;\n                  }\n                }}\n                sx={{\n                  cursor: 'pointer',\n                }}\n              >\n                {row.productName}\n              </Typography>\n              <Typography variant=\"body1\" color=\"#616161\">\n                {row.sku}\n              </Typography>\n              {optionsValue.length > 0 && (\n                <Box>\n                  {optionsValue.map(\n                    (option: OptionProps) =>\n                      option.optionLabel && (\n                        <Typography\n                          sx={{\n                            fontSize: '0.75rem',\n                            lineHeight: '1.5',\n                            color: '#455A64',\n                          }}\n                          key={`${option.optionId}_${option.optionName}_${option.optionLabel}`}\n                        >\n                          {option.optionName}: {option.optionLabel}\n                        </Typography>\n                      ),\n                  )}\n                </Box>\n              )}\n              {row.notes && (\n                <Typography\n                  variant=\"body1\"\n                  color=\"#ED6C02\"\n                  sx={{\n                    fontSize: '0.9rem',\n                    whiteSpace: 'pre-wrap',\n                    wordBreak: 'break-word',\n                  }}\n                >\n                  <span>Notes: </span>\n                  {row.notes}\n                </Typography>\n              )}\n            </Box>\n          </Box>\n        );\n      },\n      width: '40%',\n    },\n    {\n      key: 'Price',\n      title: b3Lang('quoteDetail.table.price'),\n      render: (row: CustomFieldItems) => {\n        const {\n          basePrice,\n          offeredPrice,\n          productsSearch: { variants = [], taxClassId },\n        } = row;\n\n        const taxRate = getTaxRate(taxClassId, variants);\n        const taxPrice = enteredInclusiveTax\n          ? (Number(basePrice) * taxRate) / (1 + taxRate)\n          : Number(basePrice) * taxRate;\n        const discountTaxPrice = enteredInclusiveTax\n          ? (Number(offeredPrice) * taxRate) / (1 + taxRate)\n          : Number(offeredPrice) * taxRate;\n\n        const price = getBCPrice(Number(basePrice), taxPrice);\n        const discountPrice = getBCPrice(Number(offeredPrice), discountTaxPrice);\n\n        const isDiscount = Number(basePrice) - Number(offeredPrice) > 0 && displayDiscount;\n        return (\n          <>\n            {isDiscount && (\n              <Typography\n                sx={{\n                  padding: '12px 0 0 0',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {showPrice(\n                  currencyFormatConvert(price, {\n                    currency,\n                    isConversionRate: false,\n                    useCurrentCurrency: !!currency,\n                  }),\n                  row,\n                )}\n              </Typography>\n            )}\n\n            <Typography\n              sx={{\n                padding: isDiscount ? '0' : '12px 0 0 0',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {showPrice(\n                currencyFormatConvert(discountPrice, {\n                  currency,\n                  isConversionRate: false,\n                  useCurrentCurrency: !!currency,\n                }),\n                row,\n              )}\n            </Typography>\n          </>\n        );\n      },\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n    {\n      key: 'Qty',\n      title: b3Lang('quoteDetail.table.qty'),\n      render: (row) => (\n        <Typography\n          sx={{\n            padding: '12px 0',\n          }}\n        >\n          {row.quantity}\n        </Typography>\n      ),\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n    {\n      key: 'Total',\n      title: b3Lang('quoteDetail.table.total'),\n      render: (row: CustomFieldItems) => {\n        const {\n          basePrice,\n          quantity,\n          offeredPrice,\n          productsSearch: { variants = [], taxClassId },\n        } = row;\n\n        const taxRate = getTaxRate(taxClassId, variants);\n        const taxPrice = enteredInclusiveTax\n          ? (Number(basePrice) * taxRate) / (1 + taxRate)\n          : Number(basePrice) * taxRate;\n        const discountTaxPrice = enteredInclusiveTax\n          ? (Number(offeredPrice) * taxRate) / (1 + taxRate)\n          : Number(offeredPrice) * taxRate;\n\n        const price = getBCPrice(Number(basePrice), taxPrice);\n        const discountPrice = getBCPrice(Number(offeredPrice), discountTaxPrice);\n        const isDiscount = Number(basePrice) - Number(offeredPrice) > 0 && displayDiscount;\n\n        const total = price * Number(quantity);\n        const totalWithDiscount = discountPrice * Number(quantity);\n\n        return (\n          <Box>\n            {isDiscount && (\n              <Typography\n                sx={{\n                  padding: '12px 0 0 0',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {showPrice(\n                  currencyFormatConvert(total, {\n                    currency,\n                    isConversionRate: false,\n                    useCurrentCurrency: !!currency,\n                  }),\n                  row,\n                )}\n              </Typography>\n            )}\n            <Typography\n              sx={{\n                padding: isDiscount ? '0' : '12px 0 0 0',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {showPrice(\n                currencyFormatConvert(totalWithDiscount, {\n                  currency,\n                  isConversionRate: false,\n                  useCurrentCurrency: !!currency,\n                }),\n                row,\n              )}\n            </Typography>\n          </Box>\n        );\n      },\n      width: '20%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n  ];\n\n  return (\n    <StyledQuoteTableContainer>\n      <Box\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          margin: '0.5rem 0 1rem 0',\n        }}\n      >\n        <Typography\n          sx={{\n            fontSize: '24px',\n          }}\n        >\n          {b3Lang('quoteDetail.table.totalProducts', { total: total || 0 })}\n        </Typography>\n      </Box>\n      <B3PaginationTable\n        ref={paginationTableRef}\n        columnItems={columnItems}\n        rowsPerPageOptions={[12, 24, 36]}\n        getRequestList={getQuoteTableDetails}\n        isCustomRender={false}\n        hover\n        searchParams={search}\n        labelRowsPerPage={b3Lang('quoteDetail.table.perPage')}\n        showBorder={false}\n        itemIsMobileSpacing={0}\n        noDataText={b3Lang('quoteDetail.table.noProducts')}\n        tableKey=\"productId\"\n        renderItem={(row, index) => (\n          <QuoteDetailTableCard\n            len={total || 0}\n            item={row}\n            showPrice={showPrice}\n            itemIndex={index}\n            currency={currency}\n            displayDiscount={displayDiscount}\n            getTaxRate={getTaxRate}\n          />\n        )}\n      />\n    </StyledQuoteTableContainer>\n  );\n}\n\nexport default forwardRef(QuoteDetailTable);\n","import { useState } from 'react';\nimport { Box, Card, CardContent, Typography } from '@mui/material';\n\nimport { B3CollapseContainer } from '@/components';\nimport { useB3Lang } from '@/lib/lang';\n\ninterface QuoteTermsAndConditionsProps {\n  quoteLegalTerms: string;\n}\n\nexport default function QuoteTermsAndConditions(props: QuoteTermsAndConditionsProps) {\n  const { quoteLegalTerms = '' } = props;\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  const b3Lang = useB3Lang();\n\n  const handleOnChange = (open: boolean) => {\n    setIsOpen(open);\n  };\n\n  return (\n    <Card\n      sx={{\n        '.MuiCardContent-root': {\n          maxHeight: isOpen ? '637px' : 'auto',\n        },\n      }}\n    >\n      <CardContent\n        sx={{\n          p: '16px !important',\n        }}\n      >\n        <B3CollapseContainer\n          title={b3Lang('quoteDetail.termsAndConditions')}\n          handleOnChange={handleOnChange}\n        >\n          <Box>\n            <Typography\n              variant=\"body1\"\n              sx={{\n                padding: '16px 0',\n                maxHeight: '545px',\n                whiteSpace: 'pre-wrap',\n                overflow: 'auto',\n              }}\n            >\n              {quoteLegalTerms}\n            </Typography>\n          </Box>\n        </B3CollapseContainer>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport { Box, Grid } from '@mui/material';\nimport copy from 'copy-to-clipboard';\nimport { get } from 'lodash-es';\n\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useMobile } from '@/hooks';\nimport useScrollBar from '@/hooks/useScrollBar';\nimport { useB3Lang } from '@/lib/lang';\nimport { GlobalContext } from '@/shared/global';\nimport {\n  exportQuotePdf,\n  getB2BQuoteDetail,\n  getBcQuoteDetail,\n  searchProducts,\n} from '@/shared/service/b2b';\nimport {\n  activeCurrencyInfoSelector,\n  isB2BUserSelector,\n  rolePermissionSelector,\n  TaxZoneRates,\n  useAppSelector,\n} from '@/store';\nimport { QuoteExtraFieldsData } from '@/types/quotes';\nimport { snackbar, verifyLevelPermission } from '@/utils';\nimport { b2bPermissionsMap } from '@/utils/b3CheckPermissions/config';\nimport { getVariantInfoOOSAndPurchase } from '@/utils/b3Product/b3Product';\nimport { conversionProductsList } from '@/utils/b3Product/shared/config';\nimport { getSearchVal } from '@/utils/loginInfo';\n\nimport Message from '../quote/components/Message';\nimport QuoteAttachment from '../quote/components/QuoteAttachment';\nimport QuoteDetailFooter from '../quote/components/QuoteDetailFooter';\nimport QuoteDetailHeader from '../quote/components/QuoteDetailHeader';\nimport QuoteDetailSummary from '../quote/components/QuoteDetailSummary';\nimport QuoteDetailTable from '../quote/components/QuoteDetailTable';\nimport QuoteInfo from '../quote/components/QuoteInfo';\nimport QuoteNote from '../quote/components/QuoteNote';\nimport QuoteTermsAndConditions from '../quote/components/QuoteTermsAndConditions';\nimport { ProductInfoProps } from '../quote/shared/config';\nimport getB2BQuoteExtraFields from '../quote/utils/getQuoteExtraFields';\nimport { handleQuoteCheckout } from '../quote/utils/quoteCheckout';\n\nfunction useData() {\n  const { id = '' } = useParams();\n\n  const {\n    state: { bcLanguage, quoteConfig },\n  } = useContext(GlobalContext);\n  const companyId = useAppSelector(({ company }) => company.companyInfo.id);\n  const emailAddress = useAppSelector(({ company }) => company.customer.emailAddress);\n  const customerGroupId = useAppSelector(({ company }) => company.customer.customerGroupId);\n  const role = useAppSelector(({ company }) => company.customer.role);\n\n  const isB2BUser = useAppSelector(isB2BUserSelector);\n  const { selectCompanyHierarchyId } = useAppSelector(\n    ({ company }) => company.companyHierarchyInfo,\n  );\n\n  const isAgenting = useAppSelector(({ b2bFeatures }) => b2bFeatures.masqueradeCompany.isAgenting);\n\n  const { currency_code: currencyCode } = useAppSelector(activeCurrencyInfoSelector);\n  const taxZoneRates = useAppSelector(({ global }) => global.taxZoneRates);\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n  const isEnableProduct = useAppSelector(\n    ({ global }) => global.blockPendingQuoteNonPurchasableOOS?.isEnableProduct,\n  );\n\n  const { purchasabilityPermission } = useAppSelector(rolePermissionSelector);\n\n  const handleGetProductsById = async (listProducts: ProductInfoProps[]) => {\n    if (listProducts.length > 0) {\n      const productIds: number[] = [];\n\n      listProducts.forEach((item) => {\n        if (!productIds.includes(item.productId)) {\n          productIds.push(item.productId);\n        }\n      });\n\n      const options = { productIds, currencyCode, companyId, customerGroupId };\n\n      const { productsSearch } = await searchProducts(options);\n\n      const newProductsSearch = conversionProductsList(productsSearch);\n\n      listProducts.forEach((item) => {\n        const listProduct = item;\n        const productInfo = newProductsSearch.find((search: CustomFieldItems) => {\n          const { id: productId } = search;\n\n          return Number(item.productId) === Number(productId);\n        });\n\n        listProduct.productsSearch = productInfo || {};\n      });\n\n      return listProducts;\n    }\n    return undefined;\n  };\n\n  const location = useLocation();\n\n  const getQuote = async () => {\n    const { search } = location;\n\n    const date = getSearchVal(search, 'date') || '';\n    const data = {\n      id: Number(id),\n      date: date.toString(),\n    };\n\n    const { quote } = await (Number(role) === 99\n      ? getBcQuoteDetail(data)\n      : getB2BQuoteDetail(data));\n\n    return quote;\n  };\n\n  return {\n    id,\n    bcLanguage,\n    quoteConfig,\n    role,\n    emailAddress,\n    isB2BUser,\n    selectCompanyHierarchyId,\n    isAgenting,\n    taxZoneRates,\n    enteredInclusiveTax,\n    isEnableProduct,\n    purchasabilityPermission,\n    handleGetProductsById,\n    getQuote,\n  };\n}\n\nfunction QuoteDetail() {\n  const navigate = useNavigate();\n\n  const {\n    id,\n    bcLanguage,\n    quoteConfig,\n    role,\n    emailAddress,\n    isB2BUser,\n    selectCompanyHierarchyId,\n    isAgenting,\n    taxZoneRates,\n    enteredInclusiveTax,\n    isEnableProduct,\n    purchasabilityPermission,\n    handleGetProductsById,\n    getQuote,\n  } = useData();\n\n  const [isMobile] = useMobile();\n\n  const b3Lang = useB3Lang();\n\n  const [quoteDetail, setQuoteDetail] = useState<any>({});\n  const [productList, setProductList] = useState<any>([]);\n  const [fileList, setFileList] = useState<any>([]);\n  const [isHandleApprove, setHandleApprove] = useState<boolean>(false);\n\n  const [isHideQuoteCheckout, setIsHideQuoteCheckout] = useState<boolean>(true);\n\n  const [quoteSummary, setQuoteSummary] = useState<any>({\n    originalSubtotal: 0,\n    discount: 0,\n    tax: 0,\n    shipping: 0,\n    totalAmount: 0,\n  });\n  const [isRequestLoading, setIsRequestLoading] = useState(false);\n  const [isShowFooter, setIsShowFooter] = useState(false);\n  const [quoteDetailTax, setQuoteDetailTax] = useState(0);\n  const [noBuyerProductName, setNoBuyerProductName] = useState({\n    oos: '',\n    nonPurchasable: '',\n  });\n\n  const [quotePurchasabilityPermissionInfo, setQuotePurchasabilityPermission] = useState({\n    quotePurchasabilityPermission: false,\n    quoteConvertToOrderPermission: false,\n  });\n\n  const [quoteCheckoutLoading, setQuoteCheckoutLoading] = useState<boolean>(false);\n\n  const location = useLocation();\n\n  useEffect(() => {\n    if (!quoteDetail?.id) return;\n\n    const { quoteConvertToOrderPermission: quoteCheckoutPermissionCode } = b2bPermissionsMap;\n\n    const getPurchasabilityAndConvertToOrderPermission = () => {\n      if (isB2BUser) {\n        const companyId = quoteDetail?.companyId?.id || null;\n        const userEmail = quoteDetail?.contactInfo?.email || '';\n        return {\n          quotePurchasabilityPermission: purchasabilityPermission,\n          quoteConvertToOrderPermission: verifyLevelPermission({\n            code: quoteCheckoutPermissionCode,\n            companyId,\n            userEmail,\n          }),\n        };\n      }\n\n      return {\n        quotePurchasabilityPermission: true,\n        quoteConvertToOrderPermission: true,\n      };\n    };\n\n    const { quotePurchasabilityPermission, quoteConvertToOrderPermission } =\n      getPurchasabilityAndConvertToOrderPermission();\n\n    setQuotePurchasabilityPermission({\n      quotePurchasabilityPermission,\n      quoteConvertToOrderPermission,\n    });\n  }, [isB2BUser, quoteDetail, selectCompanyHierarchyId, purchasabilityPermission]);\n\n  useEffect(() => {\n    let oosErrorList = '';\n    let nonPurchasableErrorList = '';\n\n    productList.forEach((item: CustomFieldItems) => {\n      const buyerInfo = getVariantInfoOOSAndPurchase(item);\n\n      if (buyerInfo?.type && isEnableProduct && !item?.purchaseHandled) {\n        if (buyerInfo.type === 'oos') {\n          oosErrorList += `${item.productName}${oosErrorList ? ',' : ''}`;\n        }\n\n        if (buyerInfo.type === 'non-purchasable') {\n          nonPurchasableErrorList += `${item.productName}${nonPurchasableErrorList ? ',' : ''}`;\n        }\n      }\n    });\n\n    const isHideCheckout = !!oosErrorList || !!nonPurchasableErrorList;\n    if (isEnableProduct && isHandleApprove && isHideCheckout) {\n      if (oosErrorList)\n        snackbar.error(\n          b3Lang('quoteDetail.message.insufficientStock', {\n            ProductName: oosErrorList,\n          }),\n        );\n\n      if (nonPurchasableErrorList)\n        snackbar.error(\n          b3Lang('quoteDetail.message.nonPurchasable', {\n            ProductName: nonPurchasableErrorList,\n          }),\n        );\n    }\n\n    setIsHideQuoteCheckout(isHideCheckout);\n\n    setNoBuyerProductName({\n      oos: oosErrorList,\n      nonPurchasable: nonPurchasableErrorList,\n    });\n    // disabling since b3Lang is a dependency that will trigger rendering issues\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isEnableProduct, isHandleApprove, productList]);\n\n  const proceedingCheckoutFn = useCallback(() => {\n    if (isHideQuoteCheckout) {\n      const { oos, nonPurchasable } = noBuyerProductName;\n      if (oos)\n        snackbar.error(\n          b3Lang('quoteDetail.message.insufficientStock', {\n            ProductName: oos,\n          }),\n        );\n\n      if (nonPurchasable)\n        snackbar.error(\n          b3Lang('quoteDetail.message.nonPurchasable', {\n            ProductName: nonPurchasable,\n          }),\n        );\n    }\n    return isHideQuoteCheckout;\n    // disabling as b3Lang is a dependency that will trigger rendering issues\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isHideQuoteCheckout, noBuyerProductName]);\n\n  const classRates: TaxZoneRates[] = [];\n  if (taxZoneRates?.length) {\n    const defaultTaxZone = taxZoneRates?.find((taxZone: { id: number }) => taxZone.id === 1);\n    if (defaultTaxZone) {\n      const { rates = [] } = defaultTaxZone;\n\n      if (rates[0] && rates[0].enabled && rates[0].classRates.length) {\n        rates[0].classRates.forEach((rate) => classRates.push(rate));\n      }\n    }\n  }\n\n  const getTaxRate = (taxClassId: number, variants: any) => {\n    if (variants.length) {\n      const taxExclusive = get(variants, '[0].bc_calculated_price.tax_exclusive', 0);\n      const taxInclusive = get(variants, '[0].bc_calculated_price.tax_inclusive', 0);\n      return taxExclusive > 0 ? (taxInclusive - taxExclusive) / taxExclusive : 0;\n    }\n    if (classRates.length) {\n      return (classRates.find((rate) => rate.taxClassId === taxClassId)?.rate || 0) / 100;\n    }\n    return 0;\n  };\n\n  const getQuoteExtraFields = async (currentExtraFields: QuoteExtraFieldsData[]) => {\n    const extraFieldsInfo = await getB2BQuoteExtraFields();\n    const quoteCurrentExtraFields: QuoteExtraFieldsData[] = [];\n    if (extraFieldsInfo.length) {\n      extraFieldsInfo.forEach((item) => {\n        const extraField = item;\n        const currentExtraField = currentExtraFields.find(\n          (field: QuoteExtraFieldsData) => field.fieldName === extraField.name,\n        );\n\n        quoteCurrentExtraFields.push({\n          fieldName: extraField.name || '',\n          fieldValue: currentExtraField?.fieldValue || extraField.default,\n        });\n      });\n    }\n\n    return quoteCurrentExtraFields;\n  };\n\n  const getQuoteDetail = async () => {\n    setIsRequestLoading(true);\n    setIsShowFooter(false);\n\n    try {\n      const quote = await getQuote();\n      const productsWithMoreInfo = await handleGetProductsById(quote.productsList).catch(() => {\n        return undefined;\n      });\n      const quoteExtraFieldInfos = await getQuoteExtraFields(quote.extraFields);\n\n      setQuoteDetail({\n        ...quote,\n        extraFields: quoteExtraFieldInfos,\n      });\n      setQuoteSummary({\n        originalSubtotal: quote.subtotal,\n        discount: quote.discount,\n        tax: quote.taxTotal,\n        shipping: quote.shippingTotal,\n        totalAmount: quote.totalAmount,\n      });\n      setProductList(productsWithMoreInfo);\n\n      if (Number(quote.shippingTotal) === 0) {\n        setQuoteDetailTax(Number(quote.taxTotal));\n      } else {\n        let taxPrice = 0;\n        productsWithMoreInfo?.forEach((product) => {\n          const {\n            quantity,\n            offeredPrice,\n            productsSearch: { variants = [], taxClassId },\n          } = product;\n\n          const taxRate = getTaxRate(taxClassId, variants);\n          taxPrice += enteredInclusiveTax\n            ? ((Number(offeredPrice) * taxRate) / (1 + taxRate)) * Number(quantity)\n            : Number(offeredPrice) * taxRate * Number(quantity);\n        });\n\n        setQuoteDetailTax(taxPrice);\n      }\n\n      const {\n        backendAttachFiles = [],\n        storefrontAttachFiles = [],\n        salesRep,\n        salesRepEmail,\n      } = quote;\n\n      setHandleApprove(!!salesRep || !!salesRepEmail);\n\n      const newFileList: CustomFieldItems[] = [];\n      storefrontAttachFiles.forEach((file: CustomFieldItems) => {\n        newFileList.push({\n          fileName: file.fileName,\n          fileType: file.fileType,\n          fileUrl: file.fileUrl,\n          id: file.id,\n          hasDelete: quoteDetail.status !== 4,\n          title: b3Lang('quoteDetail.uploadedByCustomer', {\n            createdBy: file.createdBy,\n          }),\n        });\n      });\n\n      backendAttachFiles.forEach((file: CustomFieldItems) => {\n        newFileList.push({\n          fileName: file.fileName,\n          fileType: file.fileType,\n          fileUrl: file.fileUrl,\n          id: file.id,\n          title: b3Lang('quoteDetail.uploadedBySalesRep', {\n            createdBy: file.createdBy,\n          }),\n        });\n      });\n\n      setFileList(newFileList);\n\n      return quote;\n    } catch (err: any) {\n      snackbar.error(err);\n      throw err;\n    } finally {\n      setIsRequestLoading(false);\n      setIsShowFooter(true);\n    }\n  };\n\n  const fetchPdfUrl = async (bool: boolean) => {\n    setIsRequestLoading(true);\n    const { id, createdAt } = quoteDetail;\n    try {\n      const data = {\n        quoteId: Number(id),\n        createdAt,\n        isPreview: bool,\n        lang: bcLanguage,\n      };\n\n      const quotePdf = await exportQuotePdf(data);\n\n      if (quotePdf) {\n        return {\n          url: quotePdf.quoteFrontendPdf.url,\n          content: quotePdf.quoteFrontendPdf.content,\n        };\n      }\n    } catch (err: any) {\n      snackbar.error(err);\n    }\n    return {\n      url: '',\n      content: '',\n    };\n  };\n\n  const exportPdf = async () => {\n    try {\n      const { url: quotePdfUrl } = await fetchPdfUrl(false);\n      if (quotePdfUrl) {\n        window.open(`${quotePdfUrl}`, '_blank');\n      }\n    } catch (err: any) {\n      snackbar.error(err);\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const printQuote = async () => {\n    try {\n      const { content } = await fetchPdfUrl(true);\n\n      const iframe = document.createElement('iframe');\n      iframe.setAttribute('style', 'display:none;');\n      document.getElementById('bundle-container')?.appendChild(iframe);\n      iframe.contentDocument?.open();\n      iframe.contentDocument?.write(content);\n      iframe.contentDocument?.close();\n      setIsRequestLoading(false);\n      iframe.contentWindow?.print();\n    } catch (err: any) {\n      snackbar.error(err);\n    }\n  };\n\n  const getQuoteTableDetails = async (params: any) => {\n    let allProductsList: any[] = productList;\n\n    if (allProductsList.length === 0) {\n      const quote = await getQuoteDetail();\n      allProductsList = quote?.productsList || [];\n    }\n\n    const startIndex = Number(params.offset);\n    const endIndex = Number(params.first) + startIndex;\n\n    if (!allProductsList.length) {\n      return {\n        edges: [],\n        totalCount: 0,\n      };\n    }\n    const list = allProductsList.slice(startIndex, endIndex);\n\n    return {\n      edges: list,\n      totalCount: allProductsList.length,\n    };\n  };\n\n  useEffect(() => {\n    const { state } = location;\n\n    if (!state) return;\n\n    setTimeout(() => {\n      snackbar.success(\n        Number(role) === 100\n          ? b3Lang('quoteDetail.submittedQuote')\n          : b3Lang('quoteDetail.quoteSubmitted'),\n        {\n          action: {\n            label:\n              Number(role) === 100\n                ? b3Lang('quoteDetail.copyQuoteLink')\n                : b3Lang('quoteDetail.reviewAllQuotes'),\n            onClick: () => {\n              if (Number(role) === 100) {\n                copy(window.location.href);\n                snackbar.success(b3Lang('quoteDetail.copySuccessful'));\n              } else {\n                navigate('/quotes');\n              }\n            },\n          },\n        },\n      );\n    }, 10);\n    location.state = null;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location, navigate, role]);\n\n  const quoteGotoCheckout = async () => {\n    try {\n      setQuoteCheckoutLoading(true);\n      await handleQuoteCheckout({\n        quoteId: id,\n        proceedingCheckoutFn,\n        role,\n        location,\n        navigate,\n      });\n    } finally {\n      setQuoteCheckoutLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (location.search.includes('isCheckout') && id) {\n      quoteGotoCheckout();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id, isHideQuoteCheckout]);\n\n  const isAutoEnableQuoteCheckout = useMemo(() => {\n    const isAutoEnable =\n      quoteConfig.find((item) => item.key === 'quote_auto_quoting')?.value === '1';\n\n    if (!isAutoEnable && !isHandleApprove) return false;\n\n    return true;\n  }, [quoteConfig, isHandleApprove]);\n\n  const isEnableProductShowCheckout = () => {\n    if (isEnableProduct) {\n      if (isHandleApprove && isHideQuoteCheckout) return true;\n      if (!isHideQuoteCheckout) return true;\n\n      return false;\n    }\n\n    return true;\n  };\n\n  const quoteAndExtraFieldsInfo = useMemo(() => {\n    const currentExtraFields = quoteDetail?.extraFields?.map(\n      (field: { fieldName: string; fieldValue: string | number }) => ({\n        fieldName: field.fieldName,\n        value: field.fieldValue,\n      }),\n    );\n\n    return {\n      info: {\n        quoteTitle: quoteDetail?.quoteTitle || '',\n        referenceNumber: quoteDetail?.referenceNumber || '',\n      },\n      extraFields: currentExtraFields || [],\n      recipients: quoteDetail?.recipients || [],\n    };\n  }, [quoteDetail]);\n\n  useScrollBar(false);\n\n  const { quotePurchasabilityPermission, quoteConvertToOrderPermission } =\n    quotePurchasabilityPermissionInfo;\n\n  return (\n    <B3Spin isSpinning={isRequestLoading || quoteCheckoutLoading}>\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n        }}\n      >\n        <QuoteDetailHeader\n          status={quoteDetail.status}\n          quoteNumber={quoteDetail.quoteNumber}\n          issuedAt={quoteDetail.createdAt}\n          expirationDate={quoteDetail.expiredAt}\n          exportPdf={exportPdf}\n          printQuote={printQuote}\n          role={role}\n          salesRepInfo={quoteDetail.salesRepInfo}\n        />\n\n        <Box\n          sx={{\n            marginTop: '1rem',\n          }}\n        >\n          <QuoteInfo\n            quoteAndExtraFieldsInfo={quoteAndExtraFieldsInfo}\n            contactInfo={quoteDetail.contactInfo}\n            shippingAddress={quoteDetail.shippingAddress}\n            billingAddress={quoteDetail.billingAddress}\n          />\n        </Box>\n\n        <Grid\n          container\n          spacing={isMobile ? 2 : 0}\n          rowSpacing={0}\n          sx={{\n            overflow: 'auto',\n            flexWrap: isMobile ? 'wrap' : 'nowrap',\n            paddingBottom: '20px',\n            marginBottom: isMobile ? '6rem' : 0,\n            marginTop: isMobile ? 0 : '1rem',\n            '@media print': {\n              overflow: 'hidden',\n            },\n          }}\n        >\n          <Grid\n            item\n            xs={isMobile ? 12 : 8}\n            rowSpacing={0}\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                    pl: '16px',\n                  }\n                : {\n                    mr: '16px',\n                  }\n            }\n          >\n            <Box\n              sx={\n                isMobile\n                  ? {\n                      flexBasis: '100%',\n                    }\n                  : {}\n              }\n            >\n              <QuoteDetailTable\n                total={productList.length}\n                currency={quoteDetail.currency}\n                isHandleApprove={isHandleApprove}\n                getQuoteTableDetails={getQuoteTableDetails}\n                getTaxRate={getTaxRate}\n                displayDiscount={quoteDetail.displayDiscount}\n              />\n            </Box>\n          </Grid>\n\n          <Grid\n            item\n            xs={isMobile ? 12 : 4}\n            rowSpacing={0}\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                  }\n                : {\n                    pl: 0,\n                  }\n            }\n          >\n            <Box\n              sx={{\n                marginBottom: '1rem',\n              }}\n            >\n              <QuoteDetailSummary\n                isHideQuoteCheckout={isHideQuoteCheckout}\n                quoteSummary={quoteSummary}\n                quoteDetailTax={quoteDetailTax}\n                status={quoteDetail.status}\n                quoteDetail={quoteDetail}\n              />\n            </Box>\n\n            {quoteDetail.notes && (\n              <Box\n                sx={{\n                  marginBottom: '1rem',\n                  displayPrint: 'none',\n                }}\n              >\n                <QuoteNote quoteNotes={quoteDetail.notes} />\n              </Box>\n            )}\n\n            <Box\n              sx={{\n                marginBottom: '1rem',\n                displayPrint: 'none',\n              }}\n            >\n              <Message\n                id={id}\n                status={quoteDetail.status}\n                isB2BUser={isB2BUser}\n                email={emailAddress || ''}\n                msgs={quoteDetail?.trackingHistory || []}\n              />\n            </Box>\n\n            <Box\n              sx={{\n                marginBottom: '1rem',\n                displayPrint: 'none',\n              }}\n            >\n              <QuoteAttachment\n                allowUpload={Number(quoteDetail.status) !== 4}\n                quoteId={quoteDetail.id}\n                status={quoteDetail.status}\n                defaultFileList={fileList}\n              />\n            </Box>\n\n            {quoteDetail.legalTerms && (\n              <Box\n                sx={{\n                  displayPrint: 'none',\n                }}\n              >\n                <QuoteTermsAndConditions quoteLegalTerms={quoteDetail.legalTerms} />\n              </Box>\n            )}\n          </Grid>\n        </Grid>\n\n        {quoteConvertToOrderPermission &&\n          quotePurchasabilityPermission &&\n          Number(quoteDetail.status) !== 4 &&\n          isShowFooter &&\n          quoteDetail?.allowCheckout &&\n          isAutoEnableQuoteCheckout &&\n          isEnableProductShowCheckout() && (\n            <QuoteDetailFooter\n              quoteId={quoteDetail.id}\n              role={role}\n              isAgenting={isAgenting}\n              status={quoteDetail.status}\n              proceedingCheckoutFn={proceedingCheckoutFn}\n            />\n          )}\n      </Box>\n    </B3Spin>\n  );\n}\n\nexport default QuoteDetail;\n"],"names":["toggleSelection","selection","active","ranges","i","range","deselectCurrent","require$$0","clipboardToIE11Formatting","defaultMessage","format","message","copyKey","copy","text","options","debug","reselectPrevious","mark","success","e","successful","err","copyToClipboard","ChatMessage","msg","isEndMessage","isCustomer","b3Lang","useB3Lang","jsxs","Box","jsx","Tooltip","formatDistanceStrict","DateMessage","displayExtendedFormat","Message","msgs","id","isB2BUser","email","status","globalDispatch","useContext","GlobalContext","primaryColor","useTheme","messagesEndRef","useRef","changeReadRef","messages","setMessages","useState","read","setRead","setMessage","loading","setLoading","quotesUpdateMessageActionsPermission","useAppSelector","rolePermissionSelector","quotesUpdateMessagePermission","convertedMsgs","nextMsg","getNewMsgs","readNum","index","_a","_b","_c","_d","_e","_f","_g","_h","_i","title","useMemo","useEffect","updateMsgs","trackingHistory","updateQuote","storeHash","updateMessage","handleOnChange","useCallback","open","Card","CardContent","B3CollapseContainer","item","B3Spin","TextField","event","ArrowUpwardIcon","handleQuoteCheckout","role","proceedingCheckoutFn","location","quoteId","navigate","store","setQuoteDetailToCheckoutUrl","hidePriceFromGuests","getBCStorefrontProductSettings","date","getSearchVal","res","quoteCheckout","setQuoteToStorage","checkoutUrl","cartId","platform","attemptCheckoutLoginAndRedirect","b2bLogger","QuoteDetailFooter","props","isAgenting","isMobile","useMobile","useLocation","useNavigate","containerStyle","CustomButton","StyledCreateName","styled","QuoteDetailHeader","quoteNumber","issuedAt","expirationDate","exportPdf","printQuote","salesRepInfo","backgroundColor","CustomStyleContext","customColor","getContrastColor","gridOptions","xs","Fragment","ArrowBackIosNew","Grid","Typography","b3HexToRgb","QuoteStatus","displayFormat","QuoteDetailSummary","originalSubtotal","discount","tax","shipping","totalAmount","quoteDetailTax","quoteDetail","isHideQuoteCheckout","enteredInclusiveTax","storeConfigs","showInclusiveTaxPrice","global","getCurrentPrice","price","priceFormat","currencyFormatConvert","shippingAndTax","showPrice","subtotalPrice","quotedSubtotal","StyledImage","QuoteDetailTableCard","quoteTableItem","len","itemIndex","getTaxRate","currency","displayDiscount","basePrice","quantity","imageUrl","productName","sku","notes","offeredPrice","productUrl","variants","taxClassId","taxRate","taxPrice","discountTaxPrice","getBCPrice","discountPrice","isDiscount","total","totalWithDiscount","PRODUCT_DEFAULT_IMAGE","origin","option","StyledQuoteTableContainer","QuoteDetailTable","ref","getQuoteTableDetails","isHandleApprove","isEnableProduct","paginationTableRef","search","setSearch","useImperativeHandle","row","getDisplayPrice","columnItems","optionsValue","B3PaginationTable","QuoteDetailTable$1","forwardRef","QuoteTermsAndConditions","quoteLegalTerms","isOpen","setIsOpen","useData","useParams","bcLanguage","quoteConfig","companyId","company","emailAddress","customerGroupId","isB2BUserSelector","selectCompanyHierarchyId","b2bFeatures","currencyCode","activeCurrencyInfoSelector","taxZoneRates","purchasabilityPermission","handleGetProductsById","listProducts","productIds","productsSearch","searchProducts","newProductsSearch","conversionProductsList","listProduct","productInfo","productId","data","quote","getBcQuoteDetail","getB2BQuoteDetail","QuoteDetail","getQuote","setQuoteDetail","productList","setProductList","fileList","setFileList","setHandleApprove","setIsHideQuoteCheckout","quoteSummary","setQuoteSummary","isRequestLoading","setIsRequestLoading","isShowFooter","setIsShowFooter","setQuoteDetailTax","noBuyerProductName","setNoBuyerProductName","quotePurchasabilityPermissionInfo","setQuotePurchasabilityPermission","quoteCheckoutLoading","setQuoteCheckoutLoading","quoteCheckoutPermissionCode","b2bPermissionsMap","getPurchasabilityAndConvertToOrderPermission","userEmail","verifyLevelPermission","quotePurchasabilityPermission","quoteConvertToOrderPermission","oosErrorList","nonPurchasableErrorList","buyerInfo","getVariantInfoOOSAndPurchase","isHideCheckout","snackbar","oos","nonPurchasable","classRates","defaultTaxZone","taxZone","rates","rate","taxExclusive","get","taxInclusive","getQuoteExtraFields","currentExtraFields","extraFieldsInfo","getB2BQuoteExtraFields","quoteCurrentExtraFields","extraField","currentExtraField","field","getQuoteDetail","productsWithMoreInfo","quoteExtraFieldInfos","product","backendAttachFiles","storefrontAttachFiles","salesRep","salesRepEmail","newFileList","file","fetchPdfUrl","bool","createdAt","quotePdf","exportQuotePdf","quotePdfUrl","content","iframe","params","allProductsList","startIndex","endIndex","state","quoteGotoCheckout","isAutoEnableQuoteCheckout","isEnableProductShowCheckout","quoteAndExtraFieldsInfo","useScrollBar","QuoteInfo","QuoteNote","QuoteAttachment"],"mappings":"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","x_google_ignoreList":[0,1]}