System.register(["./mui-legacy-Co1sKVsS.js","./intl-legacy-f5dGU49Z.js","./react-setup-legacy-D2JRzxdF.js","./load-functions-legacy-rxJ-MsEG.js","./base-legacy-DAqmyLJs.js","./b2bGetVariantImageByVariantInfo-legacy-iIhYjzcz.js","./B3FilterMore-legacy-BZwi3GoI.js","./lodashEs-legacy-BTGS6uHg.js","./useSort-legacy-D3ci4eqa.js","./B3FilterSearch-legacy-CpS4so5C.js","./shoppingList-legacy-BAOlftiS.js","./b3TriggerCartNumber-legacy-XwQ9mrxr.js","./ShoppingListDetailsContext-legacy-BKcItF2D.js","./OrderShoppingList-legacy-D4Yz_v-O.js","./router-legacy-CQEMCAt4.js","./muiIcon-legacy-C-h6sDde.js","./useBlockPendingAccountViewPrice-legacy-BE4CQ8Q4.js","./form-legacy-LlvE08FY.js","./B3CustomForm-legacy-D2p9DUUp.js","./reactVendor-legacy-C5drotBr.js","./eCache-legacy-QcRlogRO.js","./redux-legacy-DH94TLLa.js","./toolkit-legacy-DO7GmFjE.js","../index-legacy.js","./global-legacy-vVqwfyov.js","./dropzone-legacy-B1uEXZk9.js","./dateFns-legacy-DHywh9DD.js"],function(t,e){"use strict";var r,n,a,i,s,o,d,c,u,l,p,h,x,m,g,f,y,b,k,S,v,P,j,I,w,C,q,O,L,N,_,A,E,B,T,Q,D,V,$,z,R,F,W,M,U,G,K,H,J,Y,X,Z,tt,et,rt,nt,at,it,st,ot,dt,ct,ut,lt,pt,ht,xt,mt,gt,ft,yt,bt,kt,St,vt,Pt;return{setters:[t=>{r=t.j,n=t.B,a=t.ae,i=t.s,s=t.T,o=t.b,d=t.ad,c=t.G,u=t.X,l=t.Y,p=t.w,h=t.ah,x=t.ag,m=t.A},t=>{g=t.r},t=>{f=t.a7,y=t.B,b=t.j,k=t.aN,S=t.ay,v=t.aw,P=t.u,j=t.a,I=t.bg,w=t.af,C=t.am,q=t.bh,O=t.ba,L=t.bb,N=t.ak,_=t.bi,A=t.G,E=t.bj,B=t.a2,T=t.ag,Q=t.bk,D=t.bl,V=t.bm,$=t.be,z=t.aP,R=t.bn,F=t.a4,W=t.bo,M=t.aO,U=t.bp,G=t.bq,K=t.ad,H=t.br,J=t.bs,Y=t.aS,X=t.bt,Z=t.y},null,t=>{tt=t.b},t=>{et=t.b},t=>{rt=t.d,nt=t.B,at=t.a},t=>{it=t.e,st=t.u,ot=t.g},t=>{dt=t.u},t=>{ct=t.B},t=>{ut=t.b,lt=t.c},t=>{pt=t.b},t=>{ht=t.v,xt=t.S},t=>{mt=t.O,gt=t.C},t=>{ft=t.a},t=>{yt=t.c,bt=t.k,kt=t.U},t=>{St=t.u},t=>{vt=t.u},t=>{Pt=t.B},null,null,null,null,null,null,null,null],execute:function(){t("default",function(){const t=P(Z),e=P(({b2bFeatures:t})=>t.masqueradeCompany.isAgenting),[a]=j(),[i,s]=g.useState(!1),[o,d]=g.useState([]),{purchasabilityPermission:u}=P(B),l=!t||u;return r.jsxs(n,{sx:{width:"100%"},children:[r.jsx(n,{sx:{display:"flex",justifyContent:"center"},children:r.jsxs(c,{sx:{m:0,width:"100%"},container:!0,spacing:2,children:[r.jsx(c,{item:!0,xs:a?12:8,sx:{backgroundColor:"#ffffff",boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)",borderRadius:"4px",pr:"16px"},children:r.jsx(At,{setCheckedArr:d,setIsRequestLoading:s,isRequestLoading:i})}),r.jsx(c,{item:!0,xs:a?12:4,sx:{pt:a?"16px":"0px !important",pl:a?"0px !important":"16px"},children:l&&r.jsx(Jt,{})})]})}),r.jsx(n,{sx:{position:"fixed",bottom:0,left:0,width:"100%",zIndex:"999"},children:r.jsx(Tt,{checkedArr:o,isAgenting:e,setIsRequestLoading:s,isB2BUser:t})})]})});const e=(t,e,r)=>{const{global:{showInclusiveTaxPrice:n}}=f.getState(),a=t.find(t=>Number(t.variant_id)===e||r===t.sku);if(a&&!it(a)){const t=a.bc_calculated_price;return Number(n?t.tax_inclusive:t.tax_exclusive)}return!1},jt=t=>`\nquery RecentlyOrderedProducts {\n  orderedProducts (\n    q: "${t.q||""}"\n    first: ${t.first}\n    offset: ${t.offset}\n    beginDateAt: "${t.beginDateAt}"\n    endDateAt: "${t.endDateAt}"\n    orderBy: "${t?.orderBy||""}"\n  ){\n    totalCount,\n    pageInfo{\n      hasNextPage,\n      hasPreviousPage,\n    },\n    edges{\n      node {\n        id,\n        createdAt,\n        updatedAt,\n        productName,\n        productBrandName,\n        variantSku,\n        productId,\n        variantId,\n        optionList,\n        orderedTimes,\n        firstOrderedAt,\n        lastOrderedAt,\n        lastOrderedItems,\n        sku,\n        lastOrdered,\n        imageUrl,\n        baseSku,\n        basePrice,\n        discount,\n        tax,\n        enteredInclusive,\n        productUrl,\n        optionSelections,\n      }\n    }\n  }\n}`,It=t=>y.graphqlB2B({query:jt(t)}),wt=i("img")(()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"}));function Ct(t){const{item:e,checkBox:i,handleUpdateProductQty:d}=t,c=b(),{quantity:u,imageUrl:l,productName:p,variantSku:h,optionList:x,basePrice:m,lastOrderedAt:g,variantId:f,productsSearch:y}=e,P=Number(m)*Number(u),j=y.variants||[],I=et(j,{variantId:f})||l;return r.jsx(n,{sx:{borderTop:"1px solid #D9DCE9"},children:r.jsxs(a,{sx:{color:"#313440",display:"flex",pl:0},children:[r.jsx(n,{children:i&&i()}),r.jsx(n,{children:r.jsx(wt,{src:I||k,alt:"Product-img",loading:"lazy"})}),r.jsxs(n,{sx:{flex:1},children:[r.jsx(s,{variant:"body1",color:"#212121",children:p}),r.jsx(s,{variant:"body1",color:"#616161",children:h}),r.jsx(n,{sx:{margin:"1rem 0"},children:x.length>0&&r.jsx(n,{children:x.map(t=>r.jsx(s,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${t.display_name}: ${t.display_value}`},t.display_name))})}),r.jsx(s,{sx:{fontSize:"14px"},children:c("purchasedProducts.quickOrderCard.price",{price:S(P)})}),r.jsx(n,{sx:{"& label":{zIndex:0}},children:r.jsx(o,{size:"small",type:"number",variant:"filled",label:"Qty",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:u,sx:{margin:"1rem 0",width:"60%",maxWidth:"100px","& label":{fontSize:"14px"},"& input":{fontSize:"14px"}},onChange:t=>{d(e.id,t.target.value)}})}),r.jsx(s,{sx:{fontSize:"14px"},children:c("purchasedProducts.quickOrderCard.lastOrdered",{lastOrderedAt:v(g)})})]})]})},e.id)}const qt=i("img")(()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"})),Ot=i(n)(()=>({display:"flex",flexDirection:"column",width:"100%","& tbody":{"& tr":{"& td":{verticalAlign:"top"},"& td: first-of-type":{paddingTop:"25px"}}}})),Lt=i(o)(()=>({"& input":{paddingTop:"12px",paddingRight:"6px"}})),Nt="lastOrderedAt",_t={product:"productName",lastOrderedAt:"lastOrderedAt"};function At({setIsRequestLoading:t,setCheckedArr:a,isRequestLoading:i}){const o=g.useRef(null),d=P(({company:t})=>t.companyInfo.id),c=P(({company:t})=>t.customer.customerGroupId),[u,l]=g.useState({q:"",beginDateAt:rt(90),endDateAt:rt(0),orderBy:`-${_t[Nt]}`}),[p,h,x]=dt(_t,Nt,u,l),[m,f]=g.useState(0),[y]=j(),_=b(),{currency_code:A}=P(I),E=(t,e)=>{if(""!==e&&Number(e)<=0)return;const r=o.current?.getList()||[],n=o.current?.getCacheList()||[],a=r?.map(r=>{const{node:n}=r;return n?.id===t&&(n.quantity=Number(e)||""),r}),i=n?.map(r=>{const{node:n}=r;return n?.id===t&&(n.quantity=Number(e)||""),r});o.current?.setList([...a]),o.current?.setCacheAllList([...i])},B=(t,e)=>{const{productsSearch:{isPriceHidden:r}}=e;return r?"":q({price:t,productInfo:e,showText:r?"":t,forcedSkip:!0})},T=t=>{const e=o.current?.getCacheList()||[];let r=t.quantity;if(e.length>0){const n=e.find(e=>e.node.variantId===t.variantId&&e.node.productId===t.productId&&e.node.id===t.id);n&&n.node&&(r=n.node.quantity||r)}return r},Q=[{key:"product",title:_("purchasedProducts.product"),render:t=>{const{optionList:e,productsSearch:a,variantId:i}=t,o=a.variants||[],d=et(o,{variantId:i})||t.imageUrl;return r.jsxs(n,{sx:{display:"flex",alignItems:"flex-start"},children:[r.jsx(qt,{src:d||k,alt:"Product-img",loading:"lazy"}),r.jsxs(n,{children:[r.jsx(s,{variant:"body1",color:"#212121",children:t.productName}),r.jsx(s,{variant:"body1",color:"#616161",children:t.variantSku}),e.length>0&&r.jsx(n,{children:e.map(t=>r.jsx(s,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${t.display_name}: ${t.display_value}`},t.id))})]})]})},width:"40%",isSortable:!0},{key:"price",title:_("purchasedProducts.price"),render:t=>{const{productsSearch:{variants:n},variantId:a,basePrice:i}=t;let o=Number(i);n?.length&&(o=e(n,Number(a))||Number(i));const d=T(t),c=(o||Number(i))*Number(d);return r.jsx(s,{sx:{padding:"12px 0"},children:`${B(S(c),t)}`})},width:"15%",style:{textAlign:"right"}},{key:"qty",title:_("purchasedProducts.qty"),render:t=>{const e=T(t);return r.jsx(Lt,{size:"small",type:"number",variant:"filled",value:e,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:e=>{E(t.id,e.target.value)}})},width:"15%",style:{textAlign:"right"}},{key:"lastOrderedAt",title:_("purchasedProducts.lastOrdered"),render:t=>r.jsx(n,{children:r.jsx(s,{sx:{padding:"12px 0"},children:`${v(Number(t.lastOrderedAt))}`})}),width:"15%",style:{textAlign:"right"},isSortable:!0}];return r.jsx(w,{isSpinning:i,children:r.jsxs(Ot,{children:[r.jsx(s,{sx:{fontSize:"24px",height:"50px"},children:_("purchasedProducts.totalProducts",{total:m})}),r.jsxs(n,{sx:{marginBottom:"5px",display:"flex","& label":{zIndex:0}},children:[r.jsxs(n,{sx:{width:y?"100%":"40%",mr:"20px",display:"flex",justifyContent:y?"space-between":"flex-start"},children:[r.jsx(ct,{h:"48px",searchBGColor:"rgba(0, 0, 0, 0.06)",handleChange:t=>{(async t=>{l({...u,q:t})})(t)}}),y&&r.jsx(n,{sx:{display:"flex",alignItems:"center"},children:r.jsx(nt,{filterMoreInfo:[],startPicker:{isEnabled:!0,label:_("purchasedProducts.from"),defaultValue:u?.beginDateAt||"",pickerKey:"start"},endPicker:{isEnabled:!0,label:_("purchasedProducts.to"),defaultValue:u?.endDateAt||"",pickerKey:"end"},isShowMore:!0,onChange:t=>{const e={...u};e.beginDateAt=t.startValue,e.endDateAt=t.endValue,l(e)}})})]}),!y&&r.jsx(at,{handleChange:(t,e)=>{const r={...u};"start"===t?r.beginDateAt=e||rt(90):r.endDateAt=e||rt(0),l(r)},xs:{mt:0,height:"50px"},startPicker:{isEnabled:!0,label:_("purchasedProducts.from"),defaultValue:rt(90),pickerKey:"start"},endPicker:{isEnabled:!0,label:_("purchasedProducts.to"),defaultValue:rt(),pickerKey:"end"},customWidth:"58%"})]}),r.jsx(C,{ref:o,columnItems:Q,rowsPerPageOptions:[12,24,36],getRequestList:async t=>{const{orderedProducts:{edges:e,totalCount:r}}=await It(t),n=await(async t=>{if(t.length>0){const r=[];t.forEach(t=>{const{node:e}=t;e.quantity=1,r.includes(e.productId)||r.push(e.productId)});try{const{productsSearch:e}=await O({productIds:r,currencyCode:A,companyId:d,customerGroupId:c}),n=L(e);return t.forEach(t=>{const{node:e}=t,r=n.find(t=>{const{id:r}=t;return Number(e.productId)===Number(r)});e.productsSearch=r||{}}),t}catch(e){N.error(e)}}return[]})(e);return f(r),{edges:n,totalCount:r}},searchParams:u,isCustomRender:!1,showCheckbox:!0,showSelectAllCheckbox:!0,disableCheckbox:!1,hover:!0,labelRowsPerPage:_("purchasedProducts.itemsPerPage"),showBorder:!1,requestLoading:t,getSelectCheckbox:t=>{if(t.length>0){const e=o.current?.getCacheList()||[],r=t.reduce((t,r)=>{const n=e.find(t=>{const{node:e}=t;return e.id===r});return n&&t.push(n),t},[]);a([...r])}else a([])},itemIsMobileSpacing:0,isSelectOtherPageCheckbox:!0,noDataText:_("purchasedProducts.noProductsFound"),sortDirection:h,orderBy:x,sortByFn:p,renderItem:(t,e,n)=>r.jsx(Ct,{item:t,checkBox:n,handleUpdateProductQty:E})})]})})}const Et=async()=>{const{data:{site:{cart:t}}}=await _();if(t){const{lineItems:e}=t;return Object.values(e).reduce((t,e)=>(e.forEach(e=>{t.push(e)}),t),[])}return[]},Bt=async(t,e)=>{const r=await Et();return t.reduce((t,e)=>{const{node:n}=e,a=r.find(t=>t.sku===n?.sku&&Number(t?.variantEntityId||0)===Number(n?.variantId||0))?.quantity||0;return t.push({...n?.productsSearch,variantId:n?.variantId,quantity:(n?.quantity||0)+a}),t},[]).every(t=>((t,e)=>{const{variantId:r,variants:n,inventoryLevel:a,inventoryTracking:i,orderQuantityMaximum:s,orderQuantityMinimum:o,quantity:d,sku:c}=t,u=f.getState().global?.blockPendingQuoteNonPurchasableOOS?.isEnableProduct||!1,l="none"!==i;let p=!1,h=a,x=c;const m=n.find(t=>Number(t.variant_id)===Number(r));return m&&(p=m.purchasing_disabled,h="variant"===i?m.inventory_level:h,x=m.sku||c),p&&!u?(N.error(e("purchasedProducts.quickOrderPad.notPurchaseableSku",{notPurchaseSku:x})),{isVerify:!1,type:"notPurchaseableSku"}):l&&Number(d)>Number(h)?(N.error(e("purchasedProducts.quickOrderPad.insufficientStockSku",{sku:x})),{isVerify:!1,type:"insufficientStockSku"}):Number(o)>0&&Number(d)<o?(N.error(e("purchasedProducts.quickOrderPad.minQuantityMessage",{minQuantity:o,sku:x})),{isVerify:!1,type:"minQuantity"}):Number(s)>0&&Number(d)>Number(s)?(N.error(e("purchasedProducts.quickOrderPad.maxQuantityMessage",{maxQuantity:s,sku:x})),{isVerify:!1,type:"maxQuantity"}):{isVerify:!0}})(t,e).isVerify)};function Tt(t){const{checkedArr:a,isAgenting:i,setIsRequestLoading:o,isB2BUser:p}=t,{state:{productQuoteEnabled:h=!1,shoppingListEnabled:x=!1}}=g.useContext(A),m=b(),f=E(),y=P(t=>t.company.companyInfo.id),{currency_code:v}=P(I),{purchasabilityPermission:w}=P(B),C=f["B2B-3318.move_stock_and_backorder_validation_to_backend"],q=!p||w,_=d("(min-width:1775px)"),[W]=j(),M=g.useRef(null),[U,G]=g.useState(!1),[K,H]=g.useState(0),[J,Y]=g.useState(!1),[X,Z]=g.useState(!1),[et,rt]=g.useState(!1),nt=P(t=>t.company.customer.customerGroupId),at=ft(),it=W?{alignItems:"flex-start",flexDirection:"column"}:{alignItems:"center"},ot=()=>{G(!1)},dt=()=>{N.success(m("purchasedProducts.footer.productsAdded"),{action:{label:m("purchasedProducts.footer.viewCart"),onClick:()=>{window.b2b.callbacks.dispatchEvent("on-click-cart-button")&&(window.location.href=F)}}})},ct=async t=>{try{if(!(await Bt(a,m)))return;const e=y,{productsSearch:r}=await O({productIds:t,companyId:e,customerGroupId:nt}),n=(t=>{const e=[];return a.forEach(r=>{const{node:n}=r,a=t.find(t=>Number(n.productId)===t.id);if(a){const{variants:t}=a;if(t.length>0){const r=t.find(t=>n.variantSku===t.sku&&Number(n.variantId)===Number(t.variant_id));if(r){const{optionList:t,quantity:a}=n,i=t.map(t=>({optionId:t.product_option_id,optionValue:t.value}));e.push({optionSelections:i,allOptions:t,productId:parseInt(r.product_id,10)||0,quantity:a,variantId:parseInt(r.variant_id,10)||0})}}}}),e})(r||[]),i=await z(n);i&&!i.errors?dt():i&&i.errors?N.error(i.errors[0].message):N.error("Error has occurred")}finally{pt(),o(!1)}},xt=t=>0===t?.length?[]:t.map(({product_option_id:t,value:e})=>({optionId:`attribute[${t}]`,optionValue:e})),bt=t=>{Y(!1),Z(!1)},kt=()=>{Z(!1),Y(!0)},St=()=>{ot(),kt(),Y(!0)},vt=[{name:m("purchasedProducts.footer.addToCart"),key:"add-selected-to-cart",handleClick:async()=>{o(!0),ot();const t=st(a.map(({node:t})=>Number(t.productId)));0!==t.length?C?(async()=>{try{const t=a.map(({node:t})=>({productId:Number(t.productId),variantId:Number(t.variantId),quantity:t.quantity,optionSelections:t.optionSelections,allOptions:t.optionList}));await z(t),dt()}catch(t){t instanceof Error&&N.error(t.message)}finally{pt(),o(!1)}})():ct(t):N.error(m("purchasedProducts.footer.selectOneItemToAdd"))},isDisabled:!q},{name:m("purchasedProducts.footer.addToQuote"),key:"add-selected-to-quote",handleClick:async()=>{o(!0),ot();try{const t=a.filter(t=>{const{node:{variantSku:e}}=t;return""!==e&&null!=e}),e=a.filter(t=>{const{node:{variantSku:e}}=t;return!e});if(e.length>0&&N.error(m("purchasedProducts.footer.cantAddProductsNoSku")),e.length===a.length)return;const r=[];t.forEach(t=>{const{node:e}=t;r.includes(Number(e.productId))||r.push(Number(e.productId))});const{productsSearch:n}=await O({productIds:r,companyId:y,customerGroupId:nt,currencyCode:v}),i=L(n);let s="",o=!0;const d=[];t.forEach(t=>{const{node:{basePrice:e,optionList:r,variantSku:n,productId:a,productName:c,quantity:u,variantId:l,tax:p}}=t,h=xt(r),x=i.find(t=>Number(t.id)===Number(a)),g=x?.variants.find(t=>t.sku===n);g||(s=m("purchasedProducts.footer.notFoundSku",{sku:n}),o=!1);const f={node:{id:Q(),variantSku:g?.sku||n,variantId:l,productsSearch:{...x,newSelectOptionList:h,variantId:l},primaryImage:g?.image_url||k,productName:c,quantity:Number(u)||1,optionList:JSON.stringify(h),productId:a,basePrice:e,tax:p}};d.push(f)});const c=D(d);if(!o)return void N.error(s);c?(await V(d,"2"),await(async t=>{if(f["B2B-3318.move_stock_and_backorder_validation_to_backend"]){const e=await ht(t,m);return R(e),e.length>0}return R(t),!0})(d)&&N.success(m("purchasedProducts.footer.productsAddedToQuote"),{action:{label:m("purchasedProducts.footer.viewQuote"),onClick:()=>{at("/quoteDraft")}}})):N.error(m("purchasedProducts.footer.productsLimit"),{action:{label:m("purchasedProducts.footer.viewQuote"),onClick:()=>{at("/quoteDraft")}}})}catch(t){tt.error(t)}finally{o(!1)}},isDisabled:!h},{name:m("purchasedProducts.footer.addSelectedProductsToShoppingList"),key:"add-selected-to-shoppingList",handleClick:St,isDisabled:!x}];g.useEffect(()=>{if(a.length>0){let t=0;a.forEach(r=>{const{node:{variantId:n,productsSearch:{variants:a},quantity:i,basePrice:s}}=r;if(a?.length){const r=e(a,Number(n))||Number(s||0);t+=r*Number(i)}else t+=Number(s||0)*Number(i)}),H(1e3*t/1e3)}else H(0)},[a]);let Pt={display:W?"initial":"flex",flexBasis:"100%"};return _&&(Pt={display:"flex",flexGrow:1,maxWidth:1775,margin:"auto"}),r.jsxs(r.Fragment,{children:[q||h||x?r.jsx(c,{sx:{position:"fixed",bottom:W&&i?"52px":0,left:0,backgroundColor:"#fff",width:"100%",padding:W?"0 0 1rem 0":"16px 0 16px",height:W?"8rem":"auto",marginLeft:0,display:"flex",flexWrap:"nowrap",zIndex:"1000"},container:!0,spacing:2,children:r.jsxs(c,{item:W,sx:Pt,children:[r.jsx(n,{sx:{width:263,display:W?"none":"block"}}),r.jsxs(n,{sx:{flex:1,display:"flex",alignItems:"center",paddingLeft:W?0:"50px",paddingRight:W?0:"80px"},children:[r.jsxs(n,{sx:{width:W?"100%":"calc(66.6667% + 32px)",display:"flex",zIndex:"999",justifyContent:"space-between",...it},children:[r.jsx(s,{sx:{color:"#000000",fontSize:"16px",fontWeight:"400"},children:m("purchasedProducts.footer.selectedProducts",{quantity:a.length})}),r.jsxs(n,{sx:{display:"flex",alignItems:"center",flexWrap:W?"wrap":"nowrap",width:W?"100%":"auto"},children:[r.jsx(s,{variant:"h6",sx:{fontSize:"16px",fontWeight:"700",color:"#000000"},children:m("purchasedProducts.footer.subtotal",{subtotal:S(K)})}),r.jsxs(n,{sx:{display:"flex",alignItems:"center",marginTop:W?"0.5rem":0,marginLeft:W?0:"20px",width:W?"100%":"auto"},children:[r.jsx(T,{variant:"contained",ref:M,onClick:()=>{0===a.length?N.error(m("purchasedProducts.error.selectOneItem")):G(!0)},sx:{marginRight:W?"1rem":0,width:W?"100%":"auto"},endIcon:r.jsx(yt,{}),children:m("purchasedProducts.footer.addSelectedTo")}),r.jsx(u,{id:"basic-menu",anchorEl:M.current,open:U,onClose:ot,MenuListProps:{"aria-labelledby":"basic-button"},children:vt.length>0&&vt.map(t=>t.isDisabled?null:r.jsx(l,{onClick:()=>{t.handleClick()},children:t.name},t.key))})]})]})]}),r.jsx(n,{sx:{width:"33.3333%",display:W?"none":"block"}})]})]})}):null,r.jsx(mt,{isOpen:J,dialogTitle:m("purchasedProducts.footer.addToShoppingList"),onClose:bt,onConfirm:async t=>{rt(!0);try{const e=[];a.forEach(t=>{const{node:r}=t;e.includes(Number(r.productId))||e.push(Number(r.productId))});const r=[];a.forEach(t=>{const{node:{optionList:e,productId:n,quantity:a,variantId:i,productsSearch:s}}=t,o=xt(e),d=$(o,s);r.push({productId:Number(n),variantId:Number(i),quantity:Number(a),optionList:d})});const n=p?ut:lt;await n({shoppingListId:Number(t),items:r}),N.success(m("purchasedProducts.footer.productsAddedToShoppingList"),{action:{label:m("pdp.notification.viewShoppingList"),onClick:()=>{at(`/shoppingList/${t}`)}}}),bt()}catch(e){tt.error(e)}finally{rt(!1)}},onCreate:()=>{Y(!1),Z(!0)},isLoading:et,setLoading:rt}),r.jsx(gt,{open:X,onChange:St,onClose:kt})]})}const Qt=3,Dt=t=>(t||[]).reduce((t,e)=>{try{const r="string"==typeof e?JSON.parse(e):e;return t.push({optionId:`attribute[${r.option_id}]`,optionValue:`${r.id}`}),t}catch(r){return t}},[]);function Vt(t){const e=b(),{quickAddToList:a}=t,i=e("purchasedProducts.quickOrderPad.addProductsToCart"),o=E(),d=P(({company:t})=>t.companyInfo.status),[u,l]=g.useState(Qt),[p,h]=g.useState([]),[x,m]=g.useState(!1),f=(t,e)=>{new Array(t).fill(1).forEach((t,r)=>e(r))};g.useEffect(()=>{let t=[];f(u,r=>{t=[...t,...W(r,e)]}),h(t)},[e,u]);const[y]=St(),{control:k,handleSubmit:S,getValues:v,formState:{errors:j},setError:I,setValue:C}=vt({mode:"all"}),q=t=>{const r={};let n=!0;return f(u,a=>{const i=t[`sku-${a}`],s=t[`qty-${a}`];if(n=!1!==((t,r,n)=>{if(!r&&!n)return!0;let a=!0;const i=parseInt(n,10)||0;return r||(I(`sku-${t}`,{type:"manual",message:e("global.validate.required",{label:e("purchasedProducts.quickAdd.sku")})}),a=!1),n?i<=0&&(I(`qty-${t}`,{type:"manual",message:"incorrect number"}),a=!1):(I(`qty-${t}`,{type:"manual",message:e("global.validate.required",{label:e("purchasedProducts.quickAdd.qty")})}),a=!1),a})(a,i,s)&&n,n&&i){const t=parseInt(s,10)||0;r[i]=r[i]?r[i]+t:t}}),{skuValue:r,isValid:n,skus:Object.keys(r)}},O=(t,e,r,n)=>{e.forEach(e=>{const a=Object.keys(t).find(r=>t[r]===e)||"";a&&I(a.replace("sku",r),{type:"manual",message:n})})},L=async(t,r,n,a)=>{const{notFoundSku:i,notPurchaseSku:s,productItems:o,passSku:d,notStockSku:c,orderLimitSku:u}=await(async(t,e,r)=>{const n=[],a=[],i=[],s=[],o=[],d=[],c=await Et();return r.forEach(r=>{const u=(t||[]).find(t=>t.variantSku.toUpperCase()===r.toUpperCase());if(!u)return void n.push(r);const{productId:l,variantId:p,option:h,purchasingDisabled:x="1",stock:m,isStock:g,maxQuantity:f,minQuantity:y,variantSku:b}=u,k=c.find(t=>t.sku===b&&Number(t?.variantEntityId||0)===Number(p||0))?.quantity||0,S=e[r]||0,v=e[r]+k||0;if("1"===x)return void a.push(r);if("1"===g&&v>Number(m))return void o.push({sku:r,stock:Number(m)});if(0!==f&&0!==y&&v>0&&(v>f||v<y))return void d.push({sku:r,min:v<y?y:0,max:v>f?f:0});const P=Dt(h);s.push(r),i.push({...u,newSelectOptionList:P,productId:parseInt(l,10)||0,quantity:S,variantId:parseInt(p,10)||0})}),{notFoundSku:n,notPurchaseSku:a,notStockSku:o,productItems:i,passSku:s,orderLimitSku:d}})(r,n,a);if(i.length>0&&(O(t,i,"sku",""),N.error(e("purchasedProducts.quickAdd.notFoundSku",{notFoundSku:i.join(",")}))),s.length>0&&(O(t,s,"sku",""),N.error(e("purchasedProducts.quickAdd.notPurchaseableSku",{notPurchaseSku:s.join(",")}))),c.length>0){const r=c.map(t=>t.sku);c.forEach(e=>{const{sku:r,stock:n}=e;O(t,[r],"qty",`${n} in stock`)}),N.error(e("purchasedProducts.quickAdd.insufficientStockSku",{stockSku:r.join(",")}))}return u.length>0&&u.forEach(r=>{const{min:n,max:a,sku:i}=r,s=0===n?a:n;O(t,[i],"qty",`${0===n?"Max":"Min"} is ${s}`);const o=0===n?"maximum":"minimum";N.error(e("purchasedProducts.quickAdd.purchaseQuantityLimitMessage",{typeText:o,limit:s,sku:i}))}),{productItems:o,passSku:d}},_=()=>{y&&0===d?N.info("Your business account is pending approval. This feature is currently disabled."):S(async t=>{try{m(!0);const{skuValue:r,isValid:n,skus:i}=q(t);if(!n||i.length<=0)return;const s=await(async t=>{try{const{variantSku:e}=await M(t);return e}catch(e){return[]}})(i);let d=[],c=[];if(o["B2B-3318.move_stock_and_backorder_validation_to_backend"]){if(s.length<=0)return void N.error(e("purchasedProducts.quickAdd.notFoundSku",{notFoundSku:i.join(",")}));const t=s.map(t=>{const e=Object.keys(r).find(e=>e.toUpperCase()===t.variantSku.toUpperCase()),n=e?r[e]:0;return{node:{productId:parseInt(t.productId,10)||0,quantity:n,productsSearch:{variantId:parseInt(t.variantId,10)||0,newSelectOptionList:Dt(t.option)}}}}),n=await ht(t,e);d=n.map(({node:t})=>({...s.find(e=>parseInt(e.productId,10)===t.productId),newSelectOptionList:t.productsSearch.newSelectOptionList,productId:t.productId,quantity:t.quantity,variantId:t.productsSearch.variantId})),c=n.map(({node:t})=>{const e=s.find(e=>parseInt(e.productId,10)===t.productId);return e?.variantSku||""}).filter(Boolean)}else({productItems:d,passSku:c}=await L(t,s,r,i));d.length>0&&(await a(d),((t,e)=>{e.forEach(e=>{const r=Object.keys(t).find(r=>t[r]===e)||"";r&&(C(r,""),C(r.replace("sku","qty"),""))})})(t,c))}catch(r){r instanceof Error&&N.error(r.message)}finally{m(!1)}})()};return r.jsx(w,{isSpinning:x,spinningHeight:"auto",children:r.jsxs(n,{sx:{width:"100%"},children:[r.jsxs(c,{container:!0,sx:{margin:"16px 0"},children:[r.jsx(c,{item:!0,sx:{flex:1,display:"flex",alignItems:"center"},children:r.jsx(s,{sx:{color:"#000"},variant:"body1",children:e("purchasedProducts.quickAdd.title")})}),r.jsx(c,{item:!0,children:r.jsx(T,{variant:"text",sx:{textTransform:"initial",ml:"-8px"},onClick:()=>{l(u+Qt)},children:e("purchasedProducts.quickAdd.showMoreRowsButton")})})]}),r.jsx(n,{onKeyDown:t=>{"Enter"===t.key&&_()},sx:{"& label":{zIndex:0}},children:r.jsx(Pt,{formFields:p,errors:j,control:k,getValues:v,setValue:C})}),r.jsx(T,{variant:"outlined",fullWidth:!0,disabled:x,onClick:_,sx:{margin:"20px 0"},children:r.jsx(w,{isSpinning:x,tip:"",size:16,children:r.jsx(n,{sx:{flex:1,textAlign:"center"},children:i})})})]})})}const $t=p("div")({display:"flex",wordBreak:"break-word",gap:"8px",flexWrap:"wrap",padding:"12px 0 12px","&:first-of-type":{marginTop:"12px"}}),zt=p("div")(({padding:t})=>({display:"flex",flexGrow:1,flexShrink:1,alignItems:"flex-start",width:"100%",padding:t||"0 0 0 16px"})),Rt=p("img")(()=>({width:"60px",height:"60px",borderRadius:"4px",marginTop:"12px",flexShrink:0})),Ft=p("div")(()=>({fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"})),Wt=p(o)(()=>({"& input::-webkit-outer-spin-button, input::-webkit-inner-spin-button":{marginTop:"-8px",marginBottom:"8px"}}));function Mt(t){const{isOpen:e,onCancel:a,onConfirm:i,product:o,isLoading:d,setIsLoading:c}=t,u=b(),l=P(({global:t})=>t.showInclusiveTaxPrice),p=P(({global:t})=>t.blockPendingQuoteNonPurchasableOOS.isEnableProduct),x=P(({b2bFeatures:t})=>t.masqueradeCompany.id),m=P(t=>t.company.customer.customerGroupId),f=P(t=>t.company.companyInfo.id),[y,v]=g.useState(1),[j,I]=g.useState([]),[C,q]=g.useState(null),[L,_]=g.useState(""),[A,E]=g.useState(o?.imageUrl||""),[B,T]=g.useState({}),[Q,D]=g.useState([]),[$,z]=g.useState(0),[R,F]=g.useState([]),[W,M]=g.useState(!1),Y=Boolean(o?.isPriceHidden);g.useEffect(()=>{o?((async t=>{try{c(!0);const e=t?.modifiers?.filter(t=>"product_list_with_images"===t.type||"product_list"===t.type)||[],r={},n={};if(e.length>0){const t=e.reduce((t,e)=>{const{option_values:r}=e;return r.forEach(e=>{e?.value_data?.product_id&&t.push(e.value_data.product_id)}),t},[]);if(t.length>0){const e=f||x,{productsSearch:a}=await O({productIds:t,companyId:e,customerGroupId:m});a.forEach(t=>{r[t.id]=t.imageUrl,n[t.id]=t})}}T(n),v(t.quantity),1===t.variants?.length&&t.variants[0]&&q(t.variants[0]);const a=H(t,r);I([...a])}finally{c(!1)}})(o),F([]),z(0),o?.allOptions?.length&&(t=>{const e=[];t.allOptions?.forEach(t=>{"product_list_with_images"!==t.type&&"product_list"!==t.type&&"checkbox"!==t.type&&"rectangles"!==t.type&&"swatch"!==t.type&&"radio_buttons"!==t.type&&"dropdown"!==t.type||e.push(t)}),D(e)})(o)):(v(1),I([]))},[o]);const{control:X,handleSubmit:Z,getValues:et,formState:{errors:rt},watch:nt,setValue:at,reset:it}=vt({mode:"all"}),st=nt(),dt=g.useRef(st),ct=g.useCallback(async(t,e="")=>{if(!j.find(t=>t.name===e)?.isVariantOption||!o||!e)return;const{variants:r=[]}=o||{},n=r.find(e=>{const{option_values:r=[]}=e;return r.reduce((e,r)=>t[U.encode(`attribute[${r.option_id}]`)].toString()===(r.id||"").toString()&&e,!0)})||null;if(_(n?n.sku:""),q(n),n&&(n.sku||n.variant_id)){const t=r.find(t=>t.sku===n.sku||t.variant_id===n.variant_id);E(t?.image_url||o.imageUrl||"")}},[j,o]);g.useEffect(()=>{const t=nt((t,{name:e})=>{ct(t,e)});if(j[0]){const t=j.reduce((t,e)=>(t[e.name]=e.default,at(e.name,e.default),t),{});ct(t,j[0].name)}return()=>t.unsubscribe()},[j,ct]);const ut=g.useCallback(()=>{const{purchasing_disabled:t=!0}=C||{};return!(t&&!p&&(N.error(u("shoppingList.chooseOptionsDialog.productNoLongerForSale")),1))},[u,p,C]),lt=g.useCallback(t=>{const e=G(j,{},t);return Object.keys(e).map(t=>({optionId:t,optionValue:e[t]?.toString()}))},[j]);return g.useEffect(()=>{if((!dt?.current||!ot(dt?.current,st))&&(dt.current=st,Object.keys(st).length&&j.length&&Q.length)){const t=lt(st),{variant_id:e=""}=C||{};if(!(o&&o.id&&e&&ut()))return;const r=[{...o,newSelectOptionList:t,productId:o?.id,quantity:parseInt(y.toString(),10)||1,variantId:parseInt(e.toString(),10)||1,additionalProducts:B}];if(R[0]){let e=!1;const{newSelectOptionList:n}=R[0];n.forEach(r=>{const n=Q.findIndex(t=>r.optionId.includes(String(t.id)));t.forEach(t=>{r.optionId===t.optionId&&r.optionValue!==t.optionValue&&-1!==n&&(e=!0)})}),e&&F(r)}else F(r)}},[B,R,j.length,st,lt,o,Q,y,ut,C]),g.useEffect(()=>{(async()=>{try{if(R.length){M(!0);const t=await V(R);if(t[0]){const{basePrice:e,taxPrice:r}=t[0],n=J(Number(e),Number(r));z(n)}}}catch(t){tt.error(t)}finally{M(!1)}})()},[R]),g.useEffect(()=>{e||it()},[e]),r.jsx(K,{isOpen:e,rightSizeBtn:u("purchasedProducts.quickOrderPad.addToCart"),handleLeftClick:()=>{v(1),a()},handRightClick:()=>{Z(t=>{const e=lt(t),{variant_id:r=""}=C||{};o&&o.id&&r&&ut()&&i([{...o,newSelectOptionList:e,productId:o?.id,quantity:parseInt(y.toString(),10)||1,variantId:parseInt(r.toString(),10)||1,additionalProducts:B}])})()},title:u("shoppingList.chooseOptionsDialog.chooseOptions"),loading:d||W,children:r.jsx(w,{isSpinning:d,children:o&&r.jsx(n,{children:r.jsxs(n,{sx:{display:"flex",flexDirection:"column"},children:[r.jsxs(n,{sx:{display:"flex"},children:[r.jsx(Rt,{src:A||o.imageUrl||k}),r.jsxs($t,{children:[r.jsx(zt,{padding:"0",children:r.jsxs(n,{sx:{marginLeft:"16px"},children:[r.jsx(s,{variant:"body1",color:"#212121",children:o.name}),r.jsx(s,{variant:"body1",color:"#616161",children:L||o.sku}),(o.product_options||[]).map(t=>r.jsx(Ft,{children:`${t.display_name}: ${t.display_value}`},`${t.option_id}`))]})}),r.jsxs(zt,{children:[r.jsx("span",{children:u("shoppingList.chooseOptionsDialog.price")}),Y?S($*Number(y)||(t=>{const{variants:e=[]}=t;let r=0;if(L){const t=e.find(t=>t.sku===L)?.bc_calculated_price;r=(l?t?.tax_inclusive:t?.tax_exclusive)||0}else{const t=e[0]?.bc_calculated_price;r=parseFloat((l?t?.tax_inclusive:t?.tax_exclusive)?.toString())||0}return r})(o)):""]}),r.jsx(zt,{children:r.jsx(Wt,{type:"number",variant:"filled",label:u("shoppingList.chooseOptionsDialog.quantity"),value:y,onChange:t=>{(!t.target.value||parseInt(t.target.value,10)>0)&&v(t.target.value)},onKeyDown:t=>{["KeyE","Equal","Minus"].indexOf(t.code)>-1&&t.preventDefault()},onBlur:()=>{y||v(1),Number(y)>1e6&&v(1e6)},size:"small",sx:{width:"60%",maxWidth:"100px"}})})]})]}),r.jsx(h,{sx:{margin:"16px 0 24px"}}),r.jsx(Pt,{formFields:j,errors:rt,control:X,getValues:et,setValue:at})]})})})})}function Ut(t){const{product:{id:e,allOptions:n},onAddToListClick:a,onChooseOptionsClick:i,addButtonText:s}=t,{state:{isLoading:o=!1}}=g.useContext(xt),[d]=j(),c=b();return n&&n.length>0?r.jsx(T,{variant:"outlined",onClick:()=>{i(e)},disabled:o,fullWidth:d,children:c("global.searchProduct.chooseOptionsButton")}):r.jsx(T,{variant:"outlined",onClick:()=>{a(e)},disabled:o,fullWidth:d,children:s})}const Gt=Y;function Kt(t){const e=b(),{isOpen:a,onCancel:i,searchText:d,productList:c,onSearchTextChange:u,onSearch:l,onProductQuantityChange:p,onAddToListClick:h,onChooseOptionsClick:m,isLoading:f}=t,y=P(({global:t})=>t.blockPendingQuoteNonPurchasableOOS.isEnableProduct),[k]=j(),S=g.useCallback(t=>{const{variants:r=[]}=t||{},{purchasing_disabled:n=!0}=r[0]||{};return!(n&&!y&&(N.error(e("shoppingList.chooseOptionsDialog.productNoLongerForSale")),1))},[e,y]),v=t=>{const e=c.find(e=>e.id===t);if(e&&S(e||{})){let t=e.variantId||0;!e.variantId&&e.variants?.[0]&&(t=e.variants[0].variant_id),h([{...e,newSelectOptionList:[],quantity:parseInt(e.quantity.toString(),10)||1,variantId:t}])}};return r.jsx(K,{fullWidth:!0,isOpen:a,handleLeftClick:()=>{i()},title:e("purchasedProducts.quickOrderPad.quickOrderPad"),showRightBtn:!1,loading:f,maxWidth:"md",leftSizeBtn:e("shoppingLists.close"),children:r.jsx(w,{isSpinning:f,children:r.jsxs(n,{sx:{minWidth:k?"initial":"100%",flex:1},children:[r.jsx(o,{hiddenLabel:!0,variant:"filled",fullWidth:!0,size:"small",value:d,onChange:u,onKeyDown:t=>{"Enter"===t.key&&l()},error:!c||c.length<=0,InputProps:{startAdornment:r.jsx(x,{position:"start",children:r.jsx(bt,{})})},sx:{margin:"12px 0","& input":{padding:"12px 12px 12px 0"}}}),c&&c.length>0?r.jsx(Gt,{products:c,quantityEditable:!0,type:"quickOrder",textAlign:k?"left":"right",canToProduct:!0,onProductQuantityChange:p,renderAction:t=>r.jsx(Ut,{product:t,onAddToListClick:v,onChooseOptionsClick:m,addButtonText:e("purchasedProducts.quickOrderPad.addToCart")}),actionWidth:"180px"}):r.jsx(s,{children:"No products found"})]})})})}function Ht({addToList:t}){const e=b(),a=P(({company:t})=>t.companyInfo.id),i=P(t=>t.company.customer.customerGroupId),d=P(({company:t})=>t.companyInfo.status),c=P(({b2bFeatures:t})=>t.masqueradeCompany.id),u=a||c,[l,p]=g.useState(!1),[h,m]=g.useState(!1),[f,y]=g.useState(!1),[k,S]=g.useState(""),[v,j]=g.useState([]),[I,C]=g.useState(!1),[q,_]=g.useState(),[A]=St(),E=t=>{S(t.target.value)},B=async()=>{if(k&&!l)if(A&&0===d)N.info(e("global.searchProductAddProduct.businessAccountPendingApproval"));else{p(!0);try{const{productsSearch:t}=await O({search:k,companyId:u,customerGroupId:i,categoryFilter:!0}),e=L(t);j(e),m(!0)}finally{p(!1)}}},Q=()=>{B()},D=async e=>{try{p(!0),await V(e),await t(e)}finally{p(!1)}};return r.jsxs(n,{sx:{margin:"24px 0"},children:[r.jsx(s,{children:e("global.searchProductAddProduct.searchBySkuOrName")}),r.jsx(o,{hiddenLabel:!0,placeholder:e("global.searchProduct.placeholder.quickOrder"),variant:"filled",fullWidth:!0,size:"small",value:k,onChange:E,onKeyDown:t=>{"Enter"===t.key&&B()},InputProps:{startAdornment:r.jsx(x,{position:"start",children:r.jsx(bt,{})})},sx:{margin:"12px 0","& input":{padding:"12px 12px 12px 0"}}}),r.jsx(T,{variant:"outlined",fullWidth:!0,disabled:l,onClick:Q,children:r.jsx(w,{isSpinning:l,tip:"",size:16,children:r.jsx(n,{sx:{flex:1,textAlign:"center"},children:e("global.searchProductAddProduct.searchProduct")})})}),r.jsx(Kt,{isOpen:h,isLoading:l,productList:v,searchText:k,onSearchTextChange:E,onSearch:Q,onCancel:()=>{C(!1),m(!1),f&&y(!1),j([])},onProductQuantityChange:(t,e)=>{const r=v.find(e=>e.id===t);r&&(r.quantity=e),j([...v])},onChooseOptionsClick:t=>{const e=v.find(e=>e.id===t);e&&_({...e}),m(!1),C(!0)},onAddToListClick:async t=>{await D(t)}}),r.jsx(Mt,{isOpen:I,isLoading:l,setIsLoading:p,product:q,onCancel:()=>{C(!1),m(!0)},onConfirm:async t=>{try{p(!0),await V(t),await D(t),C(!1),m(!0)}catch(e){p(!1)}finally{p(!1)}}})]})}function Jt(){const[t]=j(),e=b(),[i,o]=g.useState(!1),[d,c]=g.useState([]),[u,l]=g.useState("Add to cart"),[p,x]=g.useState(!1),[f]=St(),y=E()["B2B-3318.move_stock_and_backorder_validation_to_backend"],k=P(({company:t})=>t.companyInfo.status),S=async t=>{const r=await z(t);return r&&r.errors?N.error(r.errors[0].message):N.success(e("purchasedProducts.quickOrderPad.productsAdded"),{action:{label:e("purchasedProducts.quickOrderPad.viewCart"),onClick:()=>{window.b2b.callbacks.dispatchEvent("on-click-cart-button")&&(window.location.href=F)}}}),pt(),r};return g.useEffect(()=>{d?.length>0&&l(e("purchasedProducts.quickOrderPad.addNProductsToCart",{quantity:d.length}))},[e,d]),r.jsxs(m,{sx:{marginBottom:t?"8.5rem":"50px"},children:[r.jsx(a,{children:r.jsxs(n,{children:[r.jsx(s,{variant:"h5",sx:{marginBottom:"1rem"},children:e("purchasedProducts.quickOrderPad.quickOrderPad")}),r.jsx(Ht,{addToList:y?async t=>{try{await S(t)}catch(e){e instanceof Error&&N.error(e.message)}}:async t=>{const r=t.map(t=>({node:{...t,productsSearch:t}})),n=await Bt(r,e);try{n&&await S(t)}catch(a){tt.error(a)}return t}}),r.jsx(h,{}),r.jsx(Vt,{quickAddToList:S}),r.jsx(h,{}),r.jsx(n,{sx:{margin:"20px 0 0"},children:r.jsxs(T,{variant:"text",onClick:()=>{f&&0===k?N.info(e("purchasedProducts.quickOrderPad.addNProductsToCart")):o(!0)},children:[r.jsx(kt,{sx:{marginRight:"8px"}}),e("purchasedProducts.quickOrderPad.bulkUploadCSV")]})})]})}),r.jsx(X,{isOpen:i,setIsOpen:o,handleAddToList:async t=>{x(!0);try{const{stockErrorFile:r,validProduct:n}=t,{notPurchaseSku:a,productItems:i,limitProduct:s,minLimitQuantity:d,maxLimitQuantity:c,outOfStock:u}=(t=>{const e=[],r=[],n=[],a=[],i=[],s=[];return t.forEach(t=>{const{products:o,qty:d}=t,{option:c,isStock:u,stock:l,purchasingDisabled:p,maxQuantity:h,minQuantity:x,variantSku:m,variantId:g,productId:f,modifiers:y}=o;if("1"===p||p)return void e.push(m);if("1"===u&&0===l)return void s.push(m);if("1"===u&&l>0&&l<Number(d))return void n.push({variantSku:m,AvailableAmount:l});if(Number(x)>0&&Number(d)<Number(x))return void a.push({variantSku:m,minQuantity:x});if(Number(h)>0&&Number(d)>Number(h))return void i.push({variantSku:m,maxQuantity:h});const b=c.map(t=>({optionId:t.option_id,optionValue:t.id}));r.push({productId:parseInt(f,10)||0,variantId:parseInt(g,10)||0,quantity:Number(d),optionSelections:b,allOptions:y})}),{notPurchaseSku:e,productItems:r,limitProduct:n,minLimitQuantity:a,maxLimitQuantity:i,outOfStock:s}})(n);i.length>0&&((t=>{t&&!t.errors?N.success(e("purchasedProducts.quickOrderPad.productsAdded"),{action:{label:e("purchasedProducts.quickOrderPad.viewCart"),onClick:()=>{window.b2b.callbacks.dispatchEvent("on-click-cart-button")&&(window.location.href=F)}}}):N.error("Error has occurred")})(await z(i)),pt()),s.length>0&&s.forEach(t=>{N.warning(e("purchasedProducts.quickOrderPad.notEnoughStock",{variantSku:t.variantSku}),{description:e("purchasedProducts.quickOrderPad.availableAmount",{availableAmount:t.AvailableAmount})})}),a.length>0&&N.error(e("purchasedProducts.quickOrderPad.notPurchaseableSku",{notPurchaseSku:a.join(",")})),u.length>0&&r&&N.error(e("purchasedProducts.quickOrderPad.outOfStockSku",{outOfStock:u.join(",")}),{action:{label:e("purchasedProducts.quickOrderPad.downloadErrorsCSV"),onClick:()=>{window.location.href=r}}}),d.length>0&&d.forEach(t=>{N.error(e("purchasedProducts.quickOrderPad.minQuantityMessage",{minQuantity:t.minQuantity,sku:t.variantSku}))}),c.length>0&&c.forEach(t=>{N.error(e("purchasedProducts.quickOrderPad.maxQuantityMessage",{maxQuantity:t.maxQuantity,sku:t.variantSku}))}),o(!1)}finally{x(!1)}},setProductData:c,addBtnText:u,isLoading:p,isToCart:!0})]})}}}});
//# sourceMappingURL=index-legacy-CbsrPEeN.js.map
