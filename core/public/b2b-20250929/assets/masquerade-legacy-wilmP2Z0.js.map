{"version":3,"file":"masquerade-legacy-wilmP2Z0.js","sources":["../../src/utils/masquerade.ts"],"sourcesContent":["import {\n  getAgentInfo,\n  superAdminBeginMasquerade,\n  superAdminEndMasquerade,\n} from '@/shared/service/b2b';\nimport { AppStore, clearMasqueradeCompany, MasqueradeCompany, setMasqueradeCompany } from '@/store';\n\ninterface StartMasqueradeParams {\n  companyId: number;\n  customerId: string | number;\n}\n\nexport const startMasquerade = async (\n  { companyId, customerId }: StartMasqueradeParams,\n  store: AppStore,\n) => {\n  // change group in bc through b2b api\n  await superAdminBeginMasquerade(companyId);\n\n  // get data to be saved on global\n  const data = await getAgentInfo(customerId);\n  if (!data?.superAdminMasquerading) return;\n\n  const { id, companyName, customerGroupId = 0 } = data.superAdminMasquerading;\n\n  const masqueradeCompany: MasqueradeCompany = {\n    masqueradeCompany: {\n      id,\n      isAgenting: true,\n      companyName,\n      customerGroupId,\n    },\n  };\n\n  store.dispatch(setMasqueradeCompany(masqueradeCompany));\n};\n\nexport const endMasquerade = async (store: AppStore) => {\n  const { masqueradeCompany } = store.getState().b2bFeatures;\n  const salesRepCompanyId = masqueradeCompany.id;\n\n  // change group in bc through b2b api\n  await superAdminEndMasquerade(salesRepCompanyId);\n\n  store.dispatch(clearMasqueradeCompany());\n};\n"],"names":["async","companyId","customerId","store","superAdminBeginMasquerade","data","getAgentInfo","superAdminMasquerading","id","companyName","customerGroupId","masqueradeCompany","isAgenting","dispatch","setMasqueradeCompany","exports","getState","b2bFeatures","salesRepCompanyId","superAdminEndMasquerade","clearMasqueradeCompany"],"mappings":"2RAY+BA,OAC3BC,YAAWC,cACbC,WAGMC,EAA0BH,GAGhC,MAAMI,QAAaC,EAAaJ,GAChC,IAAKG,GAAME,uBAAwB,OAEnC,MAAMC,GAAEA,EAAAC,YAAIA,EAAAC,gBAAaA,EAAkB,GAAML,EAAKE,uBAEhDI,EAAuC,CAC3CA,kBAAmB,CACjBH,KACAI,YAAY,EACZH,cACAC,oBAIJP,EAAMU,SAASC,EAAqBH,MAGzBI,EAAA,IAAgBf,UAC3B,MAAMW,kBAAEA,GAAsBR,EAAMa,WAAWC,YACzCC,EAAoBP,EAAkBH,SAGtCW,EAAwBD,GAE9Bf,EAAMU,SAASO"}