import{j as e,B as n}from"./mui-DjJKBaL-.js";import{r as s}from"./intl-D34a3Rgg.js";import{u as f,j as y,aC as j,ad as k,ak as c}from"./react-setup-B5wPcSA9.js";import"./load-functions-DCmK5p8C.js";import"./base-CC7kTJh2.js";import{h as v,g as I}from"./payment-Bdk9onpO.js";import{c as C,a as L}from"./router-DcuTQ_yx.js";import"./reactVendor-CkUTLE5B.js";import"./eCache-97HTO8co.js";import"./redux-Bt5-tVzx.js";import"./toolkit-CpEbzTSY.js";import"./lodashEs-CONzB2I0.js";import"../index.js";import"./global-D7Yn0gGb.js";import"./muiIcon-BBtg8u0V.js";import"./dropzone-B1UJxEDf.js";import"./dateFns-DubixNBV.js";import"./b3checkout-Bbw_JKfc.js";function J(){const l=f(({global:r})=>r.storeInfo.platform),m=f(({company:r})=>r.tokens.B2BToken),[u,a]=s.useState(!1),[d,g]=s.useState(!1),t=C(),x=L(),o=y();s.useEffect(()=>{(async()=>{if(a(!0),!m){g(!0),a(!1);return}if(t!=null&&t.id||c.error(o("payment.errorInvoiceCantBeBlank")),t!=null&&t.id)try{const{invoice:{openBalance:{code:i="",value:p=""}}}=await v(Number(t.id));(!i||!p)&&c.error(o("payment.errorOpenBalanceIsIncorrect"));const B={lineItems:[{invoiceId:Number(t.id),amount:p}],currency:i};await I(B,l,!0)}catch(i){c.error((i==null?void 0:i.message)||o("payment.invoiceDoesNotExist"))}finally{a(!1)}})()},[l,t.id,m,o]);const h=()=>{x("/login")};return e.jsxs(n,{children:[u&&e.jsx(j,{backColor:"#FFFFFF"}),e.jsx(k,{isOpen:d,fullWidth:!0,title:"",rightSizeBtn:"ok",showLeftBtn:!1,handRightClick:h,children:e.jsx(n,{sx:{height:"200px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:e.jsxs(n,{children:[e.jsx(n,{sx:{mb:"10px"},children:o("payment.firstLoginToPay")}),e.jsx(n,{children:o("payment.clickToLandingPage")})]})})})]})}export{J as default};
//# sourceMappingURL=index-BIgyDGab.js.map
