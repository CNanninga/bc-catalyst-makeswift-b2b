System.register(["./mui-legacy-Co1sKVsS.js","./intl-legacy-f5dGU49Z.js","./react-setup-legacy-D2JRzxdF.js","./load-functions-legacy-rxJ-MsEG.js","./shoppingList-legacy-BAOlftiS.js","./base-legacy-DAqmyLJs.js","./useBlockPendingAccountViewPrice-legacy-BE4CQ8Q4.js","./ShoppingListDetailsContext-legacy-BKcItF2D.js","./SearchProduct-legacy-CFFIkOeB.js","./muiIcon-legacy-C-h6sDde.js","./b3TriggerCartNumber-legacy-XwQ9mrxr.js","./router-legacy-CQEMCAt4.js","./ShoppingListStatusTag-legacy-Dp-8jg0g.js","./lodashEs-legacy-BTGS6uHg.js","./b2bGetVariantImageByVariantInfo-legacy-iIhYjzcz.js","./useSort-legacy-D3ci4eqa.js","./B3FilterSearch-legacy-CpS4so5C.js","./reactVendor-legacy-C5drotBr.js","./eCache-legacy-QcRlogRO.js","./redux-legacy-DH94TLLa.js","./toolkit-legacy-DO7GmFjE.js","../index-legacy.js","./global-legacy-vVqwfyov.js","./dropzone-legacy-B1uEXZk9.js","./dateFns-legacy-DHywh9DD.js","./form-legacy-LlvE08FY.js","./B3CustomForm-legacy-D2p9DUUp.js"],function(e,t){"use strict";var i,s,n,o,r,a,d,l,c,p,u,h,g,x,m,f,y,b,L,j,S,C,I,k,v,w,P,A,N,T,B,q,E,D,O,R,F,Q,z,V,U,$,_,J,M,W,H,G,Y,X,K,Z,ee,te,ie,se,ne,oe,re,ae,de,le,ce,pe,ue,he,ge,xe,me,fe,ye,be,Le,je,Se,Ce,Ie,ke,ve,we,Pe,Ae,Ne,Te,Be,qe,Ee,De,Oe,Re,Fe,Qe,ze,Ve,Ue,$e;return{setters:[e=>{i=e.j,s=e.A,n=e.ae,o=e.B,r=e.T,a=e.ah,d=e.G,l=e.a1,c=e.w,p=e.X,u=e.Y,h=e.s,g=e.b,x=e.O},e=>{m=e.r},e=>{f=e.a,y=e.c3,b=e.u,L=e.j,j=e.ag,S=e.bt,C=e.a3,I=e.be,k=e.ak,v=e.c4,w=e.a2,P=e.bg,A=e.ad,N=e.af,T=e.br,B=e.aN,q=e.ay,E=e.bF,D=e.c5,O=e.aP,R=e.e,F=e.a4,Q=e.bj,z=e.G,V=e.o,U=e.ba,$=e.bb,_=e.bk,J=e.bl,M=e.bm,W=e.bn,H=e.bM,G=e.bi,Y=e.p,X=e.c6,K=e.aO,Z=e.C,ee=e.ao,te=e.c7,ie=e.at,se=e.l,ne=e.bs,oe=e.am,re=e.bh,ae=e.ah,de=e.y,le=e.I},null,e=>{ce=e.b,pe=e.c,ue=e.S,he=e.u,ge=e.h,xe=e.i,me=e.j,fe=e.k,ye=e.l,be=e.m,Le=e.n,je=e.o},e=>{Se=e.b},e=>{Ce=e.u},e=>{Ie=e.S,ke=e.v,ve=e.a},e=>{we=e.S,Pe=e.Q,Ae=e.C},e=>{Ne=e.U,Te=e.f,Be=e.c,qe=e.i,Ee=e.r,De=e.E},e=>{Oe=e.b},e=>{Re=e.a,Fe=e.c},e=>{Qe=e.S},e=>{ze=e.f},e=>{Ve=e.b},e=>{Ue=e.u},e=>{$e=e.B},null,null,null,null,null,null,null,null,null,null],execute:function(){function t(e){const[t]=f(),{disabled:s=!1,label:n=(t?"Qty":""),value:o="",maxQuantity:r=0,minQuantity:a=0,isStock:d="0",stock:l=0,hiddenLabel:c=!t,onChange:p=()=>{},sx:u={width:t?"110px":"72px","& .MuiFormHelperText-root":{marginLeft:"0",marginRight:"0"}}}=e,[h,g]=m.useState(""),x=m.useCallback(e=>{const t=parseInt(`${e}`,10)||0;let i="";return"1"===d&&0===l?i="Out of stock":"1"===d&&t>l?i=`${l} in stock`:0!==a&&t<a?i=`Min is ${a}`:0!==r&&t>r&&(i=`Max is ${r}`),g(i),i},[d,r,a,l]);return m.useEffect(()=>{x(o)},[x,o]),i.jsx(y,{size:"small",type:"number",variant:"filled",disabled:s,hiddenLabel:c,label:n,value:o,error:!!h,helperText:h,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:e=>{var t;t=e.target.value,p(t,!!h)},onBlur:()=>{(()=>{const e=parseInt(`${o}`,10)||0;p(e,!x(e))})()},sx:u})}function _e(e){const{state:{id:t}}=m.useContext(Ie),d=b(({company:e})=>e.companyInfo.status),{updateList:l,isB2BUser:c,type:p=""}=e,u=L(),[h,g]=m.useState(!1),[x,f]=m.useState(!1),[y]=Ce(),w=c?ce:pe,P=async e=>{const i=e.map(e=>({optionList:I(e.newSelectOptionList||e.optionList,e?.products||e)||[],productId:parseInt(e.productId,10)||0,quantity:e.quantity,variantId:parseInt(e.variantId,10)||0}));await w({shoppingListId:t,items:i}),k.success(u("shoppingList.addToShoppingList.productsAdded"))};return i.jsx(s,{sx:{marginBottom:"50px"},children:i.jsx(n,{children:i.jsxs(o,{children:[i.jsx(r,{variant:"h5",children:u("shoppingList.addToShoppingList.addToList")}),i.jsx(we,{updateList:l,addToList:async e=>{try{if(!C("on-add-to-shopping-list",e))throw new Error;const i=e.map(e=>({optionList:I(e.newSelectOptionList,e),productId:e.id,quantity:e.quantity,variantId:e.variantId}));await w({shoppingListId:t,items:i}),k.success(u("shoppingList.addToShoppingList.productsAdded"))}catch(i){i.message.length>0&&k.error(i.message)}},type:"shoppingList"}),i.jsx(a,{}),i.jsx(Pe,{type:"shoppingList",updateList:l,quickAddToList:P}),i.jsx(a,{}),i.jsx(o,{sx:{margin:"20px 0 0"},children:i.jsxs(j,{variant:"text",onClick:()=>{y&&0===d?k.info("Your business account is pending approval. This feature is currently disabled."):g(!0)},children:[i.jsx(Ne,{sx:{marginRight:"8px"}}),u("shoppingList.addToShoppingList.bulkUploadCsv")]})}),i.jsx(S,{isOpen:h,setIsOpen:g,handleAddToList:async e=>{f(!0);try{const{validProduct:t}=e,{notPurchaseSku:i,productItems:s,notAddAble:n}=(e=>{const t=[],i=[],s=[];return e.forEach(e=>{const{products:n,qty:o}=e,{option:r,purchasingDisabled:a,variantSku:d,variantId:l,productId:c,modifiers:u}=n,h=v(u);if(a&&"shoppingList"!==p)return void t.push(d);if(h.filter(e=>!e.isVerified).length>0)return void s.push(d);const g=r.map(e=>({optionId:`attribute[${e.option_id}]`,optionValue:e.id.toString()}));h.forEach(e=>{const{type:t}=e;if("date"===t){const{defaultValue:t}=e;Object.keys(t).forEach(t=>{g.push({optionId:`attribute[${e.option_id}][${t}]`,optionValue:`${e.defaultValue[t]}`})})}else g.push({optionId:`attribute[${e.option_id}]`,optionValue:`${e.defaultValue}`})}),i.push({productId:parseInt(c,10)||0,variantId:parseInt(l,10)||0,quantity:Number(o),optionList:g,products:e.products})}),{notPurchaseSku:t,productItems:i,notAddAble:s}})(t);s.length>0&&(await P(s),l()),n.length>0&&"shoppingList"!==p&&k.error(u("shoppingList.addToShoppingList.skuNotAddable",{notAddAble:n.join(", ")})),i.length>0&&"shoppingList"!==p&&k.error(u("shoppingList.addToShoppingList.skuNotPurchasable",{notPurchaseSku:i.join(", ")})),g(!1)}finally{f(!1)}},isLoading:x,withModifiers:!0})]})})})}e("default",function({setOpenPage:e}){return i.jsx(ve,{children:i.jsx(ut,{setOpenPage:e})})});const Je=c("div")(({isHeader:e,isMobile:t})=>({display:"flex",wordBreak:"break-word",padding:"8px 0 0",gap:"8px",flexWrap:t?"wrap":"initial",...e?{borderBottom:"1px solid #D9DCE9",paddingBottom:"8px",alignItems:"center"}:{alignItems:"flex-start"},...t?{borderTop:"1px solid #D9DCE9",padding:"12px 0 12px","&:first-of-type":{marginTop:"12px"}}:{}})),Me=c(o)(({width:e,padding:t="0",flexBasis:i,flexDirection:s="row",alignItems:n,textAlignLocation:o})=>({display:"flex",justifyContent:"right"===o?"flex-end":"flex-start",flexDirection:s,flexGrow:e?0:1,flexShrink:e?0:1,alignItems:n||"flex-start",flexBasis:i,width:e,padding:t})),We=c("div")(()=>({fontSize:"0.875rem",lineHeight:"1.5",color:"#263238"})),He=c("img")(()=>({width:"60px",borderRadius:"4px",flexShrink:0})),Ge={default:{width:"15%"},delete:{width:"30px"}},Ye={default:{width:"100%",padding:"0 0 0 76px"},delete:{width:"100%",padding:"0 0 0 76px",display:"flex",flexDirection:"row-reverse"}};function Xe(e){const{shoppingListInfo:s,products:n,successProducts:a,allowJuniorPlaceOrder:c,setValidateFailureProducts:p,setValidateSuccessProducts:u,textAlign:h="left",backendValidationEnabled:g}=e,{submitShoppingListPermission:x}=b(w),y=L(),[S,C]=m.useState(!1),[I,v]=m.useState(!1),[Q]=f(),{decimal_places:z=2}=b(P);m.useEffect(()=>{n.length>0?C(!0):C(!1)},[n]);const V=Q?Ye:Ge,U=()=>{C(!1),p([]),u([])},$=()=>{U(),c&&x&&s?.status===ue.Approved?window.location.href=R:(k.success(y("shoppingList.reAddToCart.productsAdded"),{action:{label:y("shoppingList.reAddToCart.viewCart"),onClick:()=>{window.b2b.callbacks.dispatchEvent("on-click-cart-button")&&(window.location.href=F)}}}),Oe())};return i.jsx(A,{isOpen:S,handleLeftClick:U,handRightClick:async()=>{g?await(async()=>{v(!0);try{const e=D(n);(await O(e)).errors||$(),Oe()}catch(e){e instanceof Error&&k.error(e.message)}finally{v(!1)}})():(async()=>{if(n.every(e=>e.isValid))try{v(!0);const e=D(n),t=await O(e);t.errors||$(),t.errors&&k.error(t.message),Oe()}finally{v(!1)}else k.error(y("shoppingList.reAddToCart.fillCorrectQuantity"))})()},title:y(c?"shoppingList.reAddToCart.proceedToCheckout":"shoppingList.reAddToCart.addToCart"),rightSizeBtn:y(c?"shoppingList.reAddToCart.proceedToCheckout":"shoppingList.reAddToCart.addToCart"),maxWidth:"xl",children:i.jsxs(d,{children:[i.jsx(o,{sx:{m:"0 0 1rem 0"},children:i.jsx(l,{variant:"filled",severity:"success",children:y(c?"shoppingList.reAddToCart.productsCanCheckout":"shoppingList.reAddToCart.productsAddedToCart",{successProducts:a})})}),i.jsx(o,{sx:{m:"1rem 0"},children:i.jsx(l,{variant:"filled",severity:"error",children:y(c?"shoppingList.reAddToCart.productsCantCheckout":"shoppingList.reAddToCart.productsNotAddedToCart",{quantity:n.length})})}),i.jsxs(N,{isSpinning:I,size:16,isFlex:!1,children:[i.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",margin:"0.5rem 0 1rem 0"},children:[i.jsx(o,{sx:{fontSize:"24px"},children:y("shoppingList.reAddToCart.productCount",{quantity:n.length})}),i.jsx(j,{onClick:()=>(async()=>{const e=n.filter(e=>"0"===e.isStock||0!==e.stock),t=[];e.forEach(e=>{const i=e,{node:{quantity:s},minQuantity:n=0,maxQuantity:o=0,isStock:r,stock:a}=e,d=parseInt(`${s}`,10)||0;0!==n&&d<n?i.node.quantity=n:0!==o&&d>o&&(i.node.quantity=o),"0"!==r&&a&&(s?Number(s):0)>a&&(i.node.quantity=a),i.isValid=!0;const l=e?.node?.quantity?Number(e.node.quantity):0;t.push(E(e.node,l))}),(await Promise.all(t)).forEach((t,i)=>{e[i].node=t}),p(e)})(),children:y("shoppingList.reAddToCart.adjustQuantity")})]}),n.length>0?i.jsxs(o,{children:[!Q&&i.jsxs(Je,{isHeader:!0,isMobile:Q,children:[i.jsx(Me,{children:i.jsx(We,{children:y("shoppingList.reAddToCart.product")})}),i.jsx(Me,{...V.default,textAlignLocation:h,children:i.jsx(We,{children:y("shoppingList.reAddToCart.price")})}),i.jsx(Me,{sx:{justifyContent:"center"},...V.default,textAlignLocation:h,children:i.jsx(We,{children:y("shoppingList.reAddToCart.quantity")})}),i.jsx(Me,{...V.default,textAlignLocation:h,children:i.jsx(We,{children:y("shoppingList.reAddToCart.total")})}),i.jsx(Me,{...V.delete,children:i.jsx(We,{children:" "})})]}),n.map((e,s)=>{const{isStock:a,maxQuantity:d,minQuantity:l,stock:c}=e,{quantity:u=1,primaryImage:g,productName:x,variantSku:m,optionList:f,productsSearch:y,basePrice:b}=e.node,L=Number(b),j=(L*(u?Number(u):0)).toFixed(z),S={...y,selectOptions:f},C=T(S,{}),I=JSON.parse(f),k=C.filter(e=>e.valueText);return i.jsxs(Je,{isMobile:Q,children:[i.jsxs(Me,{children:[i.jsx(He,{src:g||B}),i.jsxs(o,{sx:{marginLeft:"16px"},children:[i.jsx(r,{variant:"body1",color:"#212121",children:x}),i.jsx(r,{variant:"body1",color:"#616161",children:m}),I.length>0&&k.length>0&&k.map(e=>i.jsx(r,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel))]})]}),i.jsxs(Me,{...V.default,textAlignLocation:h,children:[Q&&i.jsx("span",{children:"Price: "}),q(L)]}),i.jsx(Me,{...V.default,textAlignLocation:h,children:i.jsx(t,{isStock:a,maxQuantity:d,minQuantity:l,stock:c,value:u,onChange:(e,t)=>{(async(e,t,i)=>{const s=[...n];s[e].node.quantity=Number(t),s[e].isValid=i;const o=await E(s[e].node,Number(t));o&&(s[e].node=o,p(s))})(s,e,t)}})}),i.jsxs(Me,{...V.default,textAlignLocation:h,children:[Q&&i.jsx("div",{children:"Total: "}),q(j)]}),i.jsx(Me,{...V.delete,children:i.jsx(Te,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{(e=>{const t=[...n];t.splice(e,1),p(t)})(s)}})})]},m)})]}):null]})]})})}function Ke(e){const t=L(),[s]=f(),{open:n,handleCancelClick:r,handleDeleteProductClick:a}=e;return i.jsx(A,{isOpen:n,title:t("shoppingList.deleteItems.subtotal"),leftSizeBtn:t("shoppingList.deleteItems.cancel"),rightSizeBtn:t("shoppingList.deleteItems.delete"),handleLeftClick:r,handRightClick:a,rightStyleBtn:{color:"#D32F2F"},children:i.jsx(o,{sx:{display:"flex",width:s?"100%":"450px",height:"100%"},children:t("shoppingList.deleteItems.confirmDelete")})})}function Ze(e){const[t]=f(),s=L(),n=Re(),a=Q(),{state:{productQuoteEnabled:l=!1}}=m.useContext(z),c=b(({b2bFeatures:e})=>e.masqueradeCompany.isAgenting),h=b(({company:e})=>e.companyInfo.id),g=b(({company:e})=>e.customer.customerGroupId),{shoppingListCreateActionsPermission:x,purchasabilityPermission:y,submitShoppingListPermission:S}=b(w),C=m.useRef(null),[I,v]=m.useState(!1),P=V.get("cartId"),A=t?{alignItems:"flex-start",flexDirection:"column"}:{alignItems:"center"},{shoppingListInfo:N,allowJuniorPlaceOrder:T,checkedArr:E,selectedSubTotal:Z,setLoading:ee,setDeleteOpen:te,setValidateFailureProducts:ie,setValidateSuccessProducts:se,isB2BUser:ne,customColor:oe,isCanEditShoppingList:re,role:ae,backendValidationEnabled:de}=e,le=!ne||x,ce=!ne||y,pe=ne?S:2===Number(ae),he=()=>{v(!1)},ge=()=>{T&&pe&&N?.status===ue.Approved?window.location.href=R:(k.success(s("shoppingList.footer.productsAddedToCart"),{action:{label:s("shoppingList.reAddToCart.viewCart"),onClick:()=>{window.b2b.callbacks.dispatchEvent("on-click-cart-button")&&(window.location.href=F)}}}),Oe())},xe=async()=>{try{const e=[];let t="";if(E.forEach(i=>{const{node:s}=i;"disabled"===s.productsSearch.availability&&(t+=`${s.variantSku},`),e.push(s.variantSku)}),t)return void k.error(s("shoppingList.footer.unavailableProducts",{skus:t.slice(0,-1)}));if(0===e.length)return void k.error(s(T?"shoppingList.footer.selectItemsToCheckout":"shoppingList.footer.selectItemsToAddToCart"));const i=await K(e),{validateFailureArr:n,validateSuccessArr:o}=(e=>{const t=[],i=[];return E.forEach(s=>{const{node:n}=s,o=e.find(e=>e.variantSku===n.variantSku)||{};if(o){let e=!0;"1"===o.isStock&&(n?.quantity?Number(n.quantity):0)>o.stock&&(e=!1),0!==o.minQuantity&&(n?.quantity?Number(n.quantity):0)<o.minQuantity&&(e=!1),0!==o.maxQuantity&&(n?.quantity?Number(n.quantity):0)>o.maxQuantity&&(e=!1),e?i.push({node:n}):t.push({node:{...n},stock:o.stock,isStock:o.isStock,maxQuantity:o.maxQuantity,minQuantity:o.minQuantity})}}),{validateFailureArr:t,validateSuccessArr:i}})(i?.variantSku||[]);if(0!==o.length){const e=D(o),t=H(P),i=await G();let s=null;T&&i.length?(await Y(t),s=await X(i,e)):(s=await O(e),Oe()),s&&s.errors?k.error(s.errors[0].message):0===n.length&&ge()}ie(n),se(o)}finally{ee(!1)}},me=async()=>{0!==E.length?(he(),ee(!0),de?await(async()=>{const e=E.map(({node:e})=>({node:e}));try{if(0===e.map(({node:e})=>e.variantSku).length)return void k.error(s(T?"shoppingList.footer.selectItemsToCheckout":"shoppingList.footer.selectItemsToAddToCart"));const t=D(e),i=H(e),n=await G();T&&n.data.site.cart?(await Y(i),await X(n,t)):(await O(t),Oe()),ge()}catch(t){t instanceof Error&&(ie(e),k.error(t.message))}finally{ee(!1)}se(e)})():await xe()):k.error(s("shoppingList.footer.selectOneItem"))},fe={adSelectedToCart:{name:s("shoppingList.footer.addToCart"),key:"add-selected-to-cart",handleClick:me,isDisabled:!1},proceedToCheckout:{name:s("shoppingList.footer.proceedToCheckout"),key:"add-select-to-checkout",handleClick:me,isDisabled:!1},addSelectedToQuote:{name:s("shoppingList.footer.addToQuote"),key:"add-selected-to-quote",handleClick:async()=>{if(0!==E.length){ee(!0),he();try{const e=E.filter(e=>{const{node:{variantSku:t}}=e;return""!==t&&null!=t}),t=E.filter(e=>{const{node:{variantSku:t}}=e;return!t});if(t.length>0&&k.error(s("shoppingList.footer.cantAddProductsNoSku")),t.length===E.length)return;const i=[];e.forEach(e=>{const{node:t}=e;i.includes(Number(t.productId))||i.push(Number(t.productId))});const{productsSearch:o}=await U({productIds:i,companyId:h,customerGroupId:g}),r=$(o);let d="",l=!0;const c=[];e.forEach(e=>{const{node:{basePrice:t,optionList:i,variantSku:n,productId:o,productName:a,quantity:p,variantId:u,tax:h}}=e,g=(x=JSON.parse(i),0===x?.length?[]:x.map(({option_id:e,option_value:t})=>({optionId:e,optionValue:t})));var x;const m=r.find(e=>Number(e.id)===Number(o)),f=m?.variants.find(e=>e.sku===n);f||(d=s("shoppingList.footer.notFoundSku",{sku:n}),l=!1);const y={node:{id:_(),variantSku:f?.sku||n,variantId:u,productsSearch:{...m,newSelectOptionList:g,variantId:u},primaryImage:f?.image_url||B,productName:a,quantity:Number(p)||1,optionList:JSON.stringify(g),productId:o,basePrice:t,tax:h}};c.push(y)});const p=J(c);if(!l)return void k.error(d);p?(await M(c,"2"),await(async e=>{if(a["B2B-3318.move_stock_and_backorder_validation_to_backend"]){const t=await ke(e,s);return W(t),t.length>0}return W(e),!0})(c)&&k.success(s("shoppingList.footer.productsAddedToQuote"),{action:{label:s("shoppingList.footer.viewQuote"),onClick:()=>{n("/quoteDraft")}}})):k.error(s("shoppingList.footer.productsLimit"),{action:{label:s("shoppingList.footer.viewQuote"),onClick:()=>{n("/quoteDraft")}}})}catch(e){Se.error(e)}finally{ee(!1)}}else k.error(s("shoppingList.footer.selectOneItem"))},isDisabled:!1}},ye=N?.status!==ue.Approved&&ne?[]:!ce&&ne?l?[fe.addSelectedToQuote]:[]:pe?T&&l?[fe.proceedToCheckout,fe.addSelectedToQuote]:T?[fe.proceedToCheckout]:l?[fe.addSelectedToQuote]:[]:l?[fe.adSelectedToCart,fe.addSelectedToQuote]:[fe.adSelectedToCart];return i.jsxs(d,{sx:{position:"fixed",bottom:t&&c?"52px":0,left:0,backgroundColor:"#fff",width:"100%",padding:t?"0 0 1rem 0":"0 40px 1rem 40px",height:t?"8rem":"auto",marginLeft:0,display:"flex",flexWrap:"nowrap",zIndex:"999"},container:!0,spacing:2,children:[i.jsx(d,{item:!0,sx:{display:t?"none":"block",width:"290px",paddingLeft:"20px"}}),i.jsx(d,{item:!0,sx:t?{flexBasis:"100%"}:{flexBasis:"690px",flexGrow:1},children:i.jsxs(o,{sx:{width:"100%",pr:"20px",display:"flex",zIndex:"999",justifyContent:"space-between",...A},children:[i.jsx(r,{sx:{color:"#000000",fontSize:"16px",fontWeight:"400"},children:s("shoppingList.footer.selectedProducts",{quantity:E.length})}),i.jsxs(o,{sx:{display:"flex",alignItems:"center",flexWrap:t?"wrap":"nowrap"},children:[i.jsx(r,{variant:"h6",sx:{fontSize:"16px",fontWeight:"700",color:"#000000"},children:s("shoppingList.footer.subtotal",{subtotal:q(Z)})}),i.jsxs(o,{sx:{display:"flex",alignItems:"center",marginTop:t?"0.5rem":0,width:t?"100%":"auto"},children:[!T&&re&&le&&i.jsx(j,{sx:{padding:"5px",border:`1px solid ${oe||"#1976d2"}`,margin:t?"0 1rem 0 0":"0 1rem",minWidth:"auto"},disabled:N?.status===ue.ReadyForApproval,children:i.jsx(Te,{color:"primary",sx:{color:oe},onClick:()=>{te(!0)}})}),ye.length?i.jsxs(o,{sx:{display:"flex",alignItems:"center",marginTop:t?"0.5rem":0,marginLeft:t?0:"20px",width:t?"100%":"auto"},children:[1===ye.length&&ye[0]&&i.jsx(j,{variant:"contained",onClick:ye[0].handleClick,sx:{marginRight:t?"1rem":0,width:t?"100%":"auto"},children:ye[0].name}),2===ye.length&&i.jsxs(i.Fragment,{children:[i.jsx(j,{variant:"contained",onClick:()=>{0===E.length?k.error(s("shoppingList.footer.selectOneItem")):v(!0)},ref:C,sx:{marginRight:t?"1rem":0,width:t?"100%":"auto"},endIcon:i.jsx(Be,{}),children:s("shoppingList.footer.addSelectedTo")}),i.jsx(p,{id:"basic-menu",anchorEl:C.current,open:I,onClose:he,MenuListProps:{"aria-labelledby":"basic-button"},children:ye.length>1&&ye.map(e=>i.jsx(u,{onClick:()=>{e.handleClick()},children:e.name},e.key))})]})]}):null]})]})]})}),i.jsx(d,{item:!0,sx:t?{flexBasis:"100%",display:t?"none":"block"}:{flexBasis:"340px",display:t?"none":"block"}})]})}const et=h("div")(()=>({display:"flex",alignItems:"center"}));function tt(e){const t=L(),[s]=f(),{shoppingListInfo:n,customerInfo:a,handleUpdateShoppingList:l,goToShoppingLists:c,isB2BUser:p,setOpenPage:u,openAPPParams:h,customColor:g}=e,{state:{portalStyle:{backgroundColor:x="#FEF9F5"}}}=m.useContext(Z),y=Re(),{selectCompanyHierarchyId:S}=b(({company:e})=>e.companyHierarchyInfo),{submitShoppingListPermission:C,approveShoppingListPermission:I}=b(w),k=m.useMemo(()=>{if(p){const e=n?.companyInfo||{},{submitShoppingListPermission:t,approveShoppingListPermission:i}=ee;return{submitShoppingListPermission:te({code:t,userId:Number(a?.userId||0),selectId:Number(S)}),approveShoppingListPermission:ie({code:i,companyId:Number(e?.companyId||0),userId:Number(a?.userId||0)})}}return{submitShoppingListPermission:C,approveShoppingListPermission:I}},[a,p,C,I,n?.companyInfo,S]),v=0===n?.products?.edges.length,{submitShoppingListPermission:P,approveShoppingListPermission:A}=k,N=e=>s?{}:{xs:e};return i.jsxs(i.Fragment,{children:[i.jsx(o,{sx:{marginBottom:"16px",width:"fit-content"},children:i.jsxs(o,{sx:{color:"#1976d2",cursor:"pointer",display:"flex",alignItems:"center"},onClick:()=>{"add"!==h.shoppingListBtn?c():(y("/"),u({isOpen:!1,openUrl:""}))},children:[i.jsx(qe,{fontSize:"small",sx:{fontSize:"12px",marginRight:"0.5rem",color:g}}),i.jsx(o,{sx:{margin:0,color:g,m:"0"},children:"add"!==h.shoppingListBtn?t("shoppingList.header.backToShoppingLists"):t("shoppingList.header.backToProduct")})]})}),i.jsxs(d,{container:!0,spacing:2,sx:{display:"flex",justifyContent:"space-between",flexDirection:s?"column":"row",mb:s?"16px":""},children:[i.jsxs(d,{item:!0,...N(8),sx:{color:se(x)},children:[i.jsxs(o,{sx:{display:"flex",alignItems:s?"start":"center",flexDirection:s?"column":"row"},children:[i.jsx(r,{variant:"h4",sx:{marginRight:"1rem",wordBreak:"break-all"},children:`${n?.name||""}`}),p&&(P||A&&n?.approvedFlag)&&i.jsx(r,{sx:{m:s?"10px 0":"0"},children:n&&i.jsx(Qe,{status:n?.status})})]}),i.jsxs(o,{children:[i.jsx(r,{sx:{width:"100%",wordBreak:"break-all"},children:n?.description}),p&&i.jsxs(et,{children:[i.jsx(r,{variant:"subtitle2",sx:{marginRight:"0.5rem"},children:t("shoppingList.header.createdBy")}),i.jsx("span",{children:`${a?.firstName||""} ${a?.lastName||""}`})]})]})]}),i.jsxs(d,{item:!0,sx:{textAlign:s?"none":"end"},...N(4),children:[P&&n?.status===ue.Draft&&i.jsx(j,{variant:"outlined",disabled:v,onClick:()=>{l(ue.ReadyForApproval)},children:t("shoppingList.header.submitForApproval")}),A&&n?.status===ue.ReadyForApproval&&i.jsxs(o,{children:[i.jsx(j,{variant:"outlined",sx:{marginRight:"1rem"},onClick:()=>{l(ue.Rejected)},children:t("shoppingList.header.reject")}),A&&i.jsx(j,{variant:"outlined",onClick:()=>{l(ue.Approved)},children:t("shoppingList.header.approve")})]})]})]})]})}function it(e){const t=L(),[s]=f(),{open:n,notes:r,setNotes:a,handleCancelAddNotesClick:d,handleAddItemNotesClick:l}=e;return i.jsx(A,{isOpen:n,title:t("shoppingList.addItemNotes.title"),leftSizeBtn:t("shoppingList.addItemNotes.cancel"),rightSizeBtn:t("shoppingList.addItemNotes.save"),handleLeftClick:d,handRightClick:l,isShowBordered:!1,children:i.jsx(o,{sx:{display:"flex",width:s?"100%":"450px",height:"100%"},children:i.jsx(g,{multiline:!0,rows:6,defaultValue:r,onChange:e=>a(e.target.value),variant:"filled",fullWidth:!0,placeholder:t("shoppingList.addItemNotes.placeholder")})})})}const st=h("img")(()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"}));function nt(e){const t=L(),{item:s,onEdit:a,onDelete:d,checkBox:l,handleUpdateProductQty:c,handleUpdateShoppingListItem:p,isReadForApprove:u,len:h,itemIndex:x,setDeleteOpen:m,setAddNoteOpen:f,setAddNoteItemId:y,setNotes:b,showPrice:j,b2bAndBcShoppingListActionsPermissions:S}=e,{basePrice:C,quantity:I,itemId:k,variantId:v,primaryImage:w,productName:P,variantSku:A,productsSearch:N,productUrl:E,taxPrice:D=0,productNote:O}=s,R=ne(Number(C),Number(D)),F=R*Number(I),Q={...s.productsSearch,selectOptions:s.optionList},z=T(Q,{}),V=JSON.parse(s.optionList),U=z.filter(e=>e.valueText),$=V.length>0&&!u&&S,_=Q.variants||[],J=Ve(_,{variantId:v,variantSku:A})||w;return i.jsx(o,{sx:{borderTop:"1px solid #D9DCE9",borderBottom:x===h-1?"1px solid #D9DCE9":""},children:i.jsxs(n,{sx:{color:"#313440",display:"flex",pl:0},children:[i.jsx(o,{children:l&&l()}),i.jsx(o,{children:i.jsx(st,{src:J||B,alt:"Product-img",loading:"lazy"})}),i.jsxs(o,{sx:{flex:1},children:[i.jsx(r,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:e}}=window;window.location.href=`${e}${E}`},sx:{cursor:"pointer"},children:P}),i.jsx(r,{variant:"body1",color:"#616161",children:A}),i.jsx(o,{sx:{margin:"0 0 0.5rem 0"},children:V.length>0&&U.length>0&&i.jsx(o,{children:U.map(e=>i.jsx(r,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel))})}),O&&O.trim().length>0&&i.jsx(r,{sx:{fontSize:"0.75rem",color:"#ED6C02",marginTop:"0.3rem",marginBottom:"0.3rem"},children:O}),i.jsx(r,{sx:{color:"#212121",fontSize:"14px"},children:t("shoppingList.shoppingDetailCard.price",{price:j(q(R),s)})}),i.jsx(g,{size:"small",type:"number",variant:"filled",label:t("shoppingList.shoppingDetailCard.quantity"),disabled:!S||u,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:I,sx:{margin:"0.5rem 0",width:"60%",maxWidth:"100px","& label":{zIndex:0,fontSize:"14px"},"& input":{fontSize:"14px"}},onChange:e=>{c(s.id,e.target.value)},onBlur:()=>{p(k)}}),i.jsx(r,{sx:{color:"#212121",fontSize:"14px"},children:t("shoppingList.shoppingDetailCard.total",{total:j(q(F),s)})}),i.jsxs(o,{sx:{marginTop:"11px",textAlign:"end"},id:"shoppingList-actionList-mobile",children:[S&&i.jsx(Ee,{sx:{marginRight:"0.5rem",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{f(!0),y(Number(k)),O&&b(O)}}),$&&i.jsx(De,{sx:{marginRight:$?"0.5rem":"",marginLeft:$?"0.3rem":"",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{a({...N,selectOptions:V,quantity:I},v,k)}}),S&&!u&&i.jsx(Te,{sx:{marginLeft:"0.3rem",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{m(!0),d(Number(k))}})]})]})]})},s.id)}const ot=h("div")(()=>({backgroundColor:"#FFFFFF",padding:"1rem",borderRadius:"4px",boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)","& tbody":{"& tr":{"& td":{verticalAlign:"top"},"& td: first-of-type":{paddingTop:"25px"}},"& tr: hover":{"& #shoppingList-actionList":{opacity:1}}}})),rt=h("img")(()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"})),at=h(g)(()=>({"& input":{paddingTop:"12px",paddingRight:"6px"}})),dt="updatedAt",lt={Product:"productName",updatedAt:"updatedAt",Qty:"quantity"},ct=m.forwardRef(function(e,t){const[s]=f(),n=L(),{shoppingListInfo:a,isRequestLoading:l,setIsRequestLoading:c,shoppingListId:p,getShoppingListDetails:u,setCheckedArr:h,isReadForApprove:g,setDeleteItemId:x,setDeleteOpen:y,isJuniorApprove:j,isB2BUser:S,allowJuniorPlaceOrder:C,productQuoteEnabled:v,isCanEditShoppingList:P,role:A}=e,N=b(({global:e})=>e.showInclusiveTaxPrice),{shoppingListCreateActionsPermission:E,submitShoppingListPermission:D}=b(w),O=!S||E&&P,R=!S||O,F=S?D:2===Number(A),Q=m.useRef(null),[z,V]=m.useState(!1),[U,$]=m.useState(null),[_,J]=m.useState(null),[M,W]=m.useState({orderBy:`-${lt[dt]}`}),[H,G]=m.useState(!0),[Y,X]=m.useState([]),[K,Z]=m.useState(0),[ee,te]=m.useState(!1),[ie,se]=m.useState(""),[ae,de]=m.useState(""),[le,ce]=m.useState(!1),[pe,ue]=m.useState(!1),[xe,me,fe]=Ue(lt,dt,M,W),ye=(e,t)=>{if(Number(t)<0)return;const i=Y.find(t=>{const{node:i}=t;return i.id===e});G(Number(i?.node?.quantity||"")===Number(t));const s=Q.current?.getList()||[],n=s?.map(i=>{const{node:s}=i;return s?.id===e&&(s.quantity=`${Number(t)}`,s.disableCurrentCheckbox=0===Number(t)),i}),o=n.filter(e=>0===Number(e.node.quantity));ce(o.length===n.length),Q.current?.setList([...n])},be=e=>{Q.current?.refresh(e)};m.useImperativeHandle(t,()=>({initSearch:be,getList:()=>Q.current?.getList(),setList:()=>Q.current?.setList(),getSelectedValue:()=>Q.current?.getSelectedValue()}));const Le=(e,t,i)=>{J(i),$(e),V(!0)},je=async e=>{const t=(Q.current?.getList()||[]).find(t=>{const{node:i}=t;return i.itemId===e});let i;t&&(i=t.node);const s=JSON.parse(i?.optionList||"[]").map(e=>({optionId:e.option_id,optionValue:e.option_value})),n={variantId:i?.variantId,quantity:i?.quantity?Number(i.quantity):0,optionList:s||[],productNote:ae},o={itemId:e,shoppingListId:p,itemData:n},r=S?he:ge;await r(o)},Se=async e=>{if(!H){c(!0);try{await je(e),k.success(n("shoppingList.table.quantityUpdated")),G(!0),be({keepCheckedItems:!0})}finally{c(!1)}}},Ce=()=>{te(!1),se(""),de("")};m.useEffect(()=>{if(a){const{products:{edges:e},grandTotal:t,totalTax:i}=a,s=N?Number(t):Number(t)-Number(i)||0,n=e.some(e=>e?.node?.productsSearch&&e.node.productsSearch?.isPriceHidden||!1);ue(n),X(ze(e)),Z(s)}},[a,N]),m.useEffect(()=>{if(a){const{products:{edges:e}}=a,t=e.filter(e=>0===e.node.quantity);ce(t.length===e.length)}},[a]);const Ie=(e,t)=>{const{productsSearch:{isPriceHidden:i}}=t;return i?"":re({price:e,productInfo:t,showText:i?"":e,forcedSkip:!0})},ke=[{key:"Product",title:n("shoppingList.table.product"),render:e=>{const t={...e.productsSearch,selectOptions:e.optionList},s=T(t,{}),n=JSON.parse(e.optionList),a=s.filter(e=>e.valueText),d=t.variants||[],l=Ve(d,{variantId:e.variantId,variantSku:e.variantSku})||e.primaryImage;return i.jsxs(o,{sx:{display:"flex",alignItems:"flex-start"},children:[i.jsx(rt,{src:l||B,alt:"Product-img",loading:"lazy"}),i.jsxs(o,{children:[i.jsx(r,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:t}}=window;window.location.href=`${t}${e.productUrl}`},sx:{cursor:"pointer"},children:e.productName}),i.jsx(r,{variant:"body1",color:"#616161",children:e.variantSku}),n.length>0&&a.length>0&&i.jsx(o,{children:a.map(e=>i.jsx(r,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel))}),e?.productNote&&e?.productNote.trim().length>0&&i.jsx(r,{sx:{fontSize:"0.75rem",color:"#ED6C02",marginTop:"0.3rem"},children:e.productNote})]})]})},width:"45%",isSortable:!0},{key:"Price",title:n("shoppingList.table.price"),render:e=>{const{basePrice:t,taxPrice:s=0}=e,n=ne(Number(t),Number(s));return i.jsx(r,{sx:{padding:"12px 0"},children:Ie(q(n),e)})},width:"15%",style:{textAlign:"right"}},{key:"Qty",title:n("shoppingList.table.quantity"),render:e=>i.jsx(at,{size:"small",type:"number",variant:"filled",sx:{width:"72px"},disabled:!R||g||j,value:e.quantity,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:t=>{ye(e.id,t.target.value)},onBlur:()=>{Se(e.itemId)}}),width:"15%",style:{textAlign:"right"},isSortable:!0},{key:"Total",title:n("shoppingList.table.total"),render:e=>{const{basePrice:t,quantity:n,itemId:a,productsSearch:{options:l},taxPrice:c=0}=e,p=ne(Number(t),Number(c))*Number(n),u=(l||JSON.parse(e.optionList)).length>0&&!g&&!j&&R;return i.jsxs(o,{children:[i.jsx(r,{sx:{padding:"12px 0"},children:Ie(q(p),e)}),i.jsx(o,{sx:{marginTop:"1rem",opacity:0,textAlign:s?"end":"start",display:"flex",justifyContent:"flex-end"},id:"shoppingList-actionList",children:O&&i.jsxs(i.Fragment,{children:[i.jsx(d,{item:!0,sx:{marginRight:"0.5rem",minWidth:"32px"},children:i.jsx(Ee,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{te(!0),se(Number(a)),e.productNote&&de(e.productNote)}})}),i.jsx(d,{item:!0,sx:{marginRight:u?"0.5rem":"",marginLeft:u?"0.3rem":""},children:u&&i.jsx(De,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{const{productsSearch:t,variantId:i,itemId:s,optionList:n,quantity:o}=e;Le({...t,selectOptions:n,quantity:o},0,s)}})}),i.jsx(d,{item:!0,sx:{marginLeft:"0.3rem"},children:R&&!g&&!j&&i.jsx(Te,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{y(!0),x(Number(a))}})})]})})]})},width:"15%",style:{textAlign:"right"}}];return i.jsxs(ot,{children:[i.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0 0 1rem 0"},children:[i.jsx(r,{sx:{fontSize:"24px"},children:n("shoppingList.table.totalProductCount",{quantity:a?.products?.totalCount||0})}),i.jsx(r,{sx:{fontSize:"24px"},children:pe?"":q(K||0)})]}),i.jsx(o,{sx:{marginBottom:"5px"},children:i.jsx($e,{searchBGColor:"rgba(0, 0, 0, 0.06)",handleChange:e=>{(async e=>{W({...M,search:e})})(e)}})}),i.jsx(oe,{ref:Q,columnItems:ke,rowsPerPageOptions:[10,20,50],getRequestList:u,searchParams:M,isCustomRender:!1,showCheckbox:!0,showSelectAllCheckbox:!0,applyAllDisableCheckbox:!1,disableCheckbox:le||(F?!(C||v):(g||j)&&R),hover:!0,labelRowsPerPage:n("shoppingList.table.itemsPerPage"),showBorder:!1,requestLoading:c,getSelectCheckbox:e=>{if(e.length>0){const t=Q.current?.getList()||[],i=[];e.forEach(e=>{const s=t.find(t=>{const{node:i}=t;return i.id===e});s&&i.push(s)}),h([...i])}else h([])},itemIsMobileSpacing:0,noDataText:n("shoppingList.table.noProductsFound"),sortDirection:me,orderBy:fe,sortByFn:xe,pageType:"shoppingListDetailsTable",renderItem:(e,t,s)=>i.jsx(nt,{len:a?.products?.edges.length||0,item:e,itemIndex:t,showPrice:Ie,onEdit:Le,onDelete:x,checkBox:s,setDeleteOpen:y,setAddNoteOpen:te,setAddNoteItemId:se,setNotes:de,handleUpdateProductQty:ye,handleUpdateShoppingListItem:Se,isReadForApprove:g||j,b2bAndBcShoppingListActionsPermissions:R})}),i.jsx(Ae,{isOpen:z,isLoading:l,setIsLoading:c,product:U,type:"shoppingList",onCancel:()=>{J(""),V(!1)},onConfirm:async e=>{c(!0);const t=S?he:ge;try{const i=I(e[0].newSelectOptionList,e[0]),s={itemId:_,shoppingListId:p,itemData:{variantId:e[0].variantId,quantity:e[0].quantity,optionList:i||[]}};await t(s),V(!1),J(""),k.success(n("shoppingList.table.productUpdated")),be({keepCheckedItems:!0})}finally{c(!1)}},isEdit:!0}),i.jsx(it,{open:ee,notes:ae,setNotes:de,handleCancelAddNotesClick:Ce,handleAddItemNotesClick:async()=>{c(!0);try{Ce(),await je(ie),k.success(n("shoppingList.table.productNotesUpdated")),be({keepCheckedItems:!0})}finally{c(!1)}}})]})}),pt=e=>{if(e.length>0){let t=0;return e.forEach(e=>{const{node:{quantity:i,basePrice:s,taxPrice:n}}=e,o=ne(Number(s),Number(n));t+=o*Number(i)}),1e3*t/1e3}return 0};function ut({setOpenPage:e}){const{id:t,openAPPParams:s,productQuoteEnabled:n,isB2BUser:r,role:a,isAgenting:l,primaryColor:c,shoppingListCreateActionsPermission:p,submitShoppingListPermission:u,isCanAddToCart:h,getProducts:g,getShoppingList:y,deleteShoppingListItem:j}=function(){const{id:e=""}=Fe(),{state:{openAPPParams:t,productQuoteEnabled:i=!1}}=m.useContext(z),s=b(de),{currency_code:n}=b(P),o=b(({company:e})=>e.customer.role),r=b(({company:e})=>e.companyInfo.id),a=b(({company:e})=>e.customer.customerGroupId),d=b(({b2bFeatures:e})=>e.masqueradeCompany.isAgenting),l=x().palette.primary.main,{shoppingListCreateActionsPermission:c,purchasabilityPermission:p,submitShoppingListPermission:u}=b(w);return{id:e,openAPPParams:t,productQuoteEnabled:i,isB2BUser:s,role:o,isAgenting:d,primaryColor:l,shoppingListCreateActionsPermission:c,submitShoppingListPermission:u,isCanAddToCart:!s||p,getProducts:async e=>{const t={productIds:e,currencyCode:n,companyId:r,customerGroupId:a},{productsSearch:i}=await U(t);return $(i)},getShoppingList:t=>{const i={...t,id:e};return s?Le(i):je(i)},deleteShoppingListItem:t=>{const i={itemId:t,shoppingListId:e};return s?ye(i):be(i)}}}(),S=Re(),[C]=f(),{dispatch:I}=m.useContext(Ie),v=L(),A=m.useRef(null),T=Q()["B2B-3318.move_stock_and_backorder_validation_to_backend"],[B,q]=m.useState([]),[E,D]=m.useState(null),[O,R]=m.useState(null),[F,V]=m.useState(!1),[_,J]=m.useState(!1),[W,H]=m.useState(""),[G,Y]=m.useState([]),[X,K]=m.useState([]),[Z,te]=m.useState(!1),[se,ne]=m.useState(!0),oe=!r||p&&se,re=m.useMemo(()=>{if(r&&E){const{companyInfo:e,customerInfo:t}=E,{submitShoppingListPermission:i}=ee;return ie({code:i,companyId:Number(e?.companyId||0),userId:Number(t?.userId||0)})}return u},[u,r,E]),ce=r?re:a===ae.JUNIOR_BUYER,pe=E?.status===ue.Approved&&ce,he=E?.status===ue.ReadyForApproval||E?.status===ue.Rejected||E?.status===ue.Deleted;m.useEffect(()=>{I({type:"init",payload:{id:parseInt(t,10)||0}})},[t]);const ge=()=>{A.current?.initSearch()},Se=()=>{J(!1),H("")};return m.useEffect(()=>{pe&&(async()=>{const{storeConfigSwitchStatus:{isEnabled:e}}=await xe();te("1"===e&&h)})()},[pe]),m.useEffect(()=>{if(r&&E){const{companyInfo:e,customerInfo:t}=E,{shoppingListCreateActionsPermission:i}=ee,s=ie({code:i,companyId:Number(e?.companyId||0),userId:Number(t?.userId||0)});ne(s)}},[E,r]),i.jsxs(i.Fragment,{children:[i.jsxs(o,{sx:{display:"flex",flexDirection:"column",flex:1},children:[i.jsx(tt,{isB2BUser:r,shoppingListInfo:E,customerInfo:O,role:a,goToShoppingLists:()=>{S("/shoppingLists")},handleUpdateShoppingList:async e=>{V(!0);try{const i={id:Number(t),name:E?.name||"",description:E?.description||""};r?await me({...i,status:e}):await fe({...i,channelId:le}),k.success(v("shoppingList.shoppingListStatusUpdated")),A.current?.initSearch()}finally{V(!1)}},setOpenPage:e,isAgenting:l,openAPPParams:s,customColor:c}),i.jsxs(d,{container:!0,spacing:2,sx:{marginTop:"0",overflow:"auto",flexWrap:C?"wrap":"nowrap",paddingBottom:"20px",marginBottom:C?"6rem":0},children:[i.jsx(o,{sx:C?{flexBasis:"100%",pl:"16px"}:{flexBasis:"690px",flexGrow:1,ml:"16px",pt:"16px"},children:i.jsx(N,{isSpinning:F,spinningHeight:"auto",children:i.jsx(d,{item:!0,sx:C?{flexBasis:"100%"}:{flexBasis:"690px",flexGrow:1},children:i.jsx(ct,{ref:A,isReadForApprove:he,isJuniorApprove:pe,allowJuniorPlaceOrder:Z,setCheckedArr:q,shoppingListInfo:E,isRequestLoading:F,setIsRequestLoading:V,shoppingListId:t,getShoppingListDetails:async e=>{const t=await y(e);V(!0);const{products:{edges:i,totalCount:s}}=t,n=await(async e=>{if(e.length>0)try{const t=[];e.forEach(e=>{const{node:i}=e;t.includes(i.productId)||t.push(i.productId)});const i=await g(t);return e.forEach(e=>{const{node:t}=e,s=i.find(e=>{const{id:i}=e;return t.productId===i});t.productsSearch=s||{},t.productName=s?.name||t.productName,t.productUrl=s?.productUrl||t.productUrl,t.disableCurrentCheckbox=!1,0===t.quantity&&(t.disableCurrentCheckbox=!0)}),e}catch(t){k.error(t)}return[]})(i);return await M(n,"2"),r&&R(t.customerInfo),D(t),V(!1),n?{edges:n,totalCount:s}:{edges:[],totalCount:0}},setDeleteOpen:J,setDeleteItemId:H,isB2BUser:r,productQuoteEnabled:n,isCanEditShoppingList:se,role:a})})})}),i.jsx(d,{item:!0,sx:C?{flexBasis:"100%"}:{flexBasis:"340px"},children:oe&&!he&&!pe&&i.jsx(_e,{updateList:ge,type:"shoppingList",isB2BUser:r})})]}),!he&&(Z||n||!pe)&&i.jsx(Ze,{shoppingListInfo:E,allowJuniorPlaceOrder:Z,checkedArr:B,selectedSubTotal:pt(B),setLoading:V,setDeleteOpen:J,setValidateFailureProducts:K,setValidateSuccessProducts:Y,isB2BUser:r,customColor:c,isCanEditShoppingList:se,role:a,backendValidationEnabled:T})]}),i.jsx(Xe,{shoppingListInfo:E,role:a,products:X,successProducts:G.length,allowJuniorPlaceOrder:Z,setValidateFailureProducts:K,setValidateSuccessProducts:Y,textAlign:C?"left":"right",backendValidationEnabled:T}),i.jsx(Ke,{open:_,handleCancelClick:Se,handleDeleteProductClick:async()=>{await(async(e="")=>{V(!0);try{if(e){if(await j(e),B.length>0){const t=B.filter(t=>{const{itemId:i}=t.node;return e!==i});q([...t])}}else{if(0===B.length)return;B.forEach(async e=>{const{node:t}=e;await j(t.itemId)}),q([])}k.success(v("shoppingList.productRemoved"))}finally{V(!1),ge()}})(Number(W)),await Se()}})]})}}}});
//# sourceMappingURL=index-legacy-DOn5Wg_a.js.map
