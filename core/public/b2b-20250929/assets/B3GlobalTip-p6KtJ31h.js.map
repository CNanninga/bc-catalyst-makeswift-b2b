{"version":3,"file":"B3GlobalTip-p6KtJ31h.js","sources":["../../src/components/B3GlobalTip.tsx"],"sourcesContent":["import { useContext, useEffect } from 'react';\nimport { flushSync } from 'react-dom';\n\nimport { DynamicallyVariableContext } from '@/shared/dynamicallyVariable';\nimport { MsgsProps } from '@/shared/dynamicallyVariable/context/config';\n\nimport B3Tip from './B3Tip';\n\nexport default function B3GlobalTip() {\n  const {\n    state: { globalTipMessage },\n    dispatch,\n  } = useContext(DynamicallyVariableContext);\n\n  useEffect(() => {\n    window.globalTipDispatch = dispatch;\n    // disabling cause it is not necessary to run this effect on every render\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const setMsgs = (msgs: [] | Array<MsgsProps> = []) => {\n    dispatch({\n      type: 'common',\n      payload: {\n        globalTipMessage: {\n          ...globalTipMessage,\n          msgs,\n        },\n      },\n    });\n  };\n\n  const handleClose = (id: number | string) => {\n    const msgs = globalTipMessage?.msgs || [];\n    const newMsgs = msgs.filter((msg) => msg.id !== id);\n    setMsgs(newMsgs);\n  };\n\n  const closeMsgs = (id: number | string, reason: string) => {\n    const { msgs = [] } = globalTipMessage;\n\n    if (reason === 'clickaway') return;\n\n    flushSync(() => {\n      if (msgs.length) {\n        const newMsgs = msgs.filter((item: MsgsProps) => item.id !== id);\n        dispatch({\n          type: 'common',\n          payload: {\n            globalTipMessage: {\n              ...globalTipMessage,\n              msgs: newMsgs,\n            },\n          },\n        });\n      }\n    });\n  };\n\n  return (\n    <B3Tip\n      autoHideDuration={globalTipMessage?.autoHideDuration}\n      msgs={globalTipMessage?.msgs}\n      handleAllClose={closeMsgs}\n      handleItemClose={handleClose}\n      vertical=\"top\"\n      horizontal=\"right\"\n    />\n  );\n}\n"],"names":["B3GlobalTip","globalTipMessage","dispatch","useContext","DynamicallyVariableContext","useEffect","setMsgs","msgs","handleClose","id","newMsgs","msg","closeMsgs","reason","flushSync","item","jsx","B3Tip"],"mappings":"4iBAQA,SAAwBA,GAAc,CACpC,KAAM,CACJ,MAAO,CAAE,iBAAAC,CAAA,EACT,SAAAC,CAAA,EACEC,EAAAA,WAAWC,CAA0B,EAEzCC,EAAAA,UAAU,IAAM,CACd,OAAO,kBAAoBH,CAG7B,EAAG,CAAA,CAAE,EAEL,MAAMI,EAAU,CAACC,EAA8B,KAAO,CACpDL,EAAS,CACP,KAAM,SACN,QAAS,CACP,iBAAkB,CAChB,GAAGD,EACH,KAAAM,CAAA,CACF,CACF,CACD,CACH,EAEMC,EAAeC,GAAwB,CAE3C,MAAMC,IADOT,GAAA,YAAAA,EAAkB,OAAQ,CAAA,GAClB,OAAQU,GAAQA,EAAI,KAAOF,CAAE,EAClDH,EAAQI,CAAO,CACjB,EAEME,EAAY,CAACH,EAAqBI,IAAmB,CACzD,KAAM,CAAE,KAAAN,EAAO,CAAA,CAAC,EAAMN,EAElBY,IAAW,aAEfC,EAAAA,UAAU,IAAM,CACd,GAAIP,EAAK,OAAQ,CACf,MAAMG,EAAUH,EAAK,OAAQQ,GAAoBA,EAAK,KAAON,CAAE,EAC/DP,EAAS,CACP,KAAM,SACN,QAAS,CACP,iBAAkB,CAChB,GAAGD,EACH,KAAMS,CAAA,CACR,CACF,CACD,CACH,CACF,CAAC,CACH,EAEA,OACEM,EAAAA,IAACC,EAAA,CACC,iBAAkBhB,GAAA,YAAAA,EAAkB,iBACpC,KAAMA,GAAA,YAAAA,EAAkB,KACxB,eAAgBW,EAChB,gBAAiBJ,EACjB,SAAS,MACT,WAAW,OAAA,CAAA,CAGjB"}