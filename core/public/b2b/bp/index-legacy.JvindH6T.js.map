{"version":3,"file":"index-legacy.JvindH6T.js","sources":["../src/main.ts"],"sourcesContent":["import { Environment, EnvSpecificConfig } from '@/types';\n\n// TODO: update the following to BC cdn when migration is completed\nconst ENVIRONMENT_CDN_BASE_PATH: EnvSpecificConfig<string> = {\n  local: '/',\n  integration: 'https://microapps.integration.zone/b2b-buyer-portal/',\n  staging: 'https://microapps.staging.zone/b2b-buyer-portal/',\n  production: 'https://microapps.bigcommerce.com/b2b-buyer-portal/',\n};\n\nwindow.b2b = {\n  ...window.b2b,\n  __get_asset_location: (filename) => {\n    // this function is called at runtime and intentionally references `window.B3`\n    // so that the same runtime files can dynamically choose the cdn base url location\n    // based on environment it is deployed to\n    const environment: Environment = window.B3?.setting?.environment ?? Environment.Production;\n    return `${ENVIRONMENT_CDN_BASE_PATH[environment]}${filename}`;\n  },\n};\n\n(async function bootstrap() {\n  const { bindLinks, initApp, requestIdleCallbackFunction, unbindLinks } = await import(\n    './load-functions'\n  );\n\n  // check if the accessed url contains a hashtag\n  if (window.location.hash.startsWith('#/')) {\n    initApp();\n  } else {\n    // load the app when the browser is free\n    requestIdleCallbackFunction(initApp);\n    // and bind links to load the app\n    bindLinks();\n    window.addEventListener('beforeunload', unbindLinks);\n    // and observe global flag to simulate click\n    window.b2b.initializationEnvironment.isInitListener = () => {\n      unbindLinks();\n      setTimeout(() => window.b2b.initializationEnvironment.clickedLinkElement?.click(), 0);\n    };\n  }\n})();\n"],"names":["ENVIRONMENT_CDN_BASE_PATH","local","integration","staging","production","window","b2b","__get_asset_location","filename","environment","B3","setting","Environment","Production","bindLinks","initApp","requestIdleCallbackFunction","unbindLinks","module","import","then","n","l","meta","url","location","hash","startsWith","addEventListener","initializationEnvironment","isInitListener","setTimeout","clickedLinkElement","click"],"mappings":"uaAGMA,EAAuD,CAC3DC,MAAO,IACPC,YAAa,uDACbC,QAAS,mDACTC,WAAY,uDAGdC,OAAOC,IAAM,IACRD,OAAOC,IACVC,qBAAuBC,IAIrB,MAAMC,EAA2BJ,OAAOK,IAAIC,SAASF,aAAeG,EAAYC,WAChF,MAAO,GAAGb,EAA0BS,KAAeD,MAEvD,iBAGE,MAAMM,UAAEA,UAAWC,EAAAC,4BAASA,EAAAC,YAA6BA,oGAAsBC,EAAAC,OAC7E,8CACFC,KAAAC,GAAAA,EAAAC,GAAA,MAAA,CAAAR,YAAAC,UAAAC,8BAAAC,qBAAA,EAAAC,EAAAK,KAAAC,KAGInB,OAAOoB,SAASC,KAAKC,WAAW,MAClCZ,KAGAC,EAA4BD,GAE5BD,IACAT,OAAOuB,iBAAiB,eAAgBX,GAExCZ,OAAOC,IAAIuB,0BAA0BC,eAAiB,KACpDb,IACAc,WAAW,IAAM1B,OAAOC,IAAIuB,0BAA0BG,oBAAoBC,QAAS,IAGzF,CAtBA"}