System.register(["./mui-legacy-Co1sKVsS.js","./intl-legacy-f5dGU49Z.js","./react-setup-legacy-CKF-9cua.js","./load-functions-legacy-B3DSplhu.js","./base-legacy-DAqmyLJs.js","./router-legacy-CQEMCAt4.js","./getAssetUrl-legacy-Br2uuqlc.js","./b3TriggerCartNumber-legacy-BRTom44b.js","./muiIcon-legacy-C-h6sDde.js","./HierarchyDialog-legacy-BCFp5QwL.js","./useBlockPendingAccountViewPrice-legacy-DKuL4xOS.js","./reactVendor-legacy-C5drotBr.js","./eCache-legacy-QcRlogRO.js","./redux-legacy-DH94TLLa.js","./toolkit-legacy-DO7GmFjE.js","./lodashEs-legacy-BTGS6uHg.js","../index-legacy.JvindH6T.js","./global-legacy-vVqwfyov.js","./dropzone-legacy-B1uEXZk9.js","./dateFns-legacy-DHywh9DD.js"],function(e,t){"use strict";var n,i,s,o,a,r,l,c,d,p,x,m,u,h,g,y,f,b,j,C,w,k,F,I,v,S,D,M,H,N,B,L,W,z,O,E,P,R,T,A,q,K,V,G,X,U,$,_,Y,Q,J,Z,ee,te,ne,ie,se,oe,ae,re,le,ce,de,pe,xe;return{setters:[e=>{n=e.j,i=e.B,s=e.a1,o=e.a7,a=e.a8,r=e.a9,l=e.X,c=e.Y,d=e.C,p=e.G,x=e.w,m=e.y,u=e.T,h=e.O,g=e.aa,y=e.ab,f=e.ac,b=e.ad},e=>{j=e.r},e=>{C=e.j,w=e.k,k=e.u,F=e.U,I=e.a,v=e.G,S=e.V,D=e.W,M=e.X,H=e.Y,N=e.i,B=e.C,L=e.v,W=e._,z=e.$,O=e.a0,E=e.a1,P=e.y,R=e.a2,T=e.l,A=e.a3,q=e.a4,K=e.D,V=e.a5,G=e.a6,X=e.a7,U=e.a8,$=e.a9,_=e.aa,Y=e.ab,Q=e.ac,J=e.ad},null,null,e=>{Z=e.a,ee=e.u,te=e.m},e=>{ne=e.g,ie=e.b},e=>{se=e.b},e=>{oe=e.A,ae=e.c,re=e.d,le=e.e,ce=e.S,de=e.C},e=>{pe=e.H},e=>{xe=e.u},null,null,null,null,null,null,null,null,null],execute:function(){e("default",function({children:e}){const[t]=I(),s=b("(min-width:1775px)"),o=ee(),[a,r]=j.useState(""),l=C(),c=k(({company:e})=>e.customer.emailAddress),d=k(({company:e})=>e.customer.id),{state:{globalMessageDialog:p},dispatch:x}=j.useContext(K),m=Z();j.useEffect(()=>{c&&d||Y(o.pathname)||m("/login")},[c,d,o,m]),j.useEffect(()=>{const e=Q.find(e=>e.path===o.pathname);if(e&&"/quoteDraft"!==o.pathname){const t=Object.entries(Se).find(([e])=>e===o.pathname);r(l(t?t[1]:e.idLang))}else r("");x({type:"common",payload:{tipMessage:{msgs:[]}}})},[o]);const u=j.useMemo(()=>["/invoice"].includes(o.pathname)?{overflowX:"hidden"}:{},[o]);return n.jsxs(i,{children:[t?n.jsx(ve,{title:a,children:e}):n.jsxs(i,{id:"app-mainPage-layout",sx:{display:"flex",minHeight:"100vh",margin:"auto",width:s?1775:"100%",minWidth:s?1775:"100%",maxWidth:s?1775:"100%",flexDirection:"row",p:"32px 63px 70px 63px"},children:[n.jsx(ue,{}),n.jsxs(i,{sx:{display:"flex",flexDirection:"column",width:"200px",displayPrint:"none"},children:[n.jsx(he,{}),n.jsx(i,{sx:{pt:"24px"},children:n.jsx(Ie,{})})]}),n.jsxs(i,{sx:{flex:1,display:"flex",flexDirection:"column",maxWidth:"1450px",width:"100%",p:"0 0px 0px 50px",...u},children:[n.jsx(ke,{title:a}),n.jsx(me,{}),n.jsx(i,{component:"main",sx:{mt:t||a?"0":"24px"},children:e})]})]}),n.jsx(J,{isOpen:p.open,title:p.title,leftSizeBtn:p.cancelText,rightSizeBtn:p.saveText,handleLeftClick:p.cancelFn||(()=>{x({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})}),handRightClick:p.saveFn,showRightBtn:!!p.saveText,children:n.jsx(i,{sx:{display:"flex",justifyContent:t?"center":"start",width:t?"100%":"450px",height:"100%"},children:p.message})})]})});const t=[0,1,2];function me(){const e=C(),[o,a]=j.useState(!1),[r,l]=w("sf-isCloseCompanyCredit",!1,sessionStorage),c=k(({company:e})=>e.customer.role),d=k(({b2bFeatures:e})=>e.masqueradeCompany.isAgenting);return j.useEffect(()=>{(async()=>{if(!r&&(t.includes(Number(c))||3===Number(c)&&d)){const{companyCreditConfig:{creditHold:e,creditEnabled:t}}=await F();a(e&&t)}})()},[c,d,r]),o?n.jsx(i,{sx:{margin:"1rem 0"},children:n.jsx(s,{variant:"filled",onClose:()=>(l(!0),void a(!1)),severity:"warning",children:e("global.companyCredit.alert")})}):null}function ue(){const[e]=I(),t=k(({global:e})=>e.setOpenPageFn),{state:{isCloseGotoBCHome:i}}=j.useContext(v),s=Z(),o=e?S:D;return n.jsx(o,{children:n.jsx(M,{sx:{color:"#757371"},onClick:()=>{i||window.location.search.includes("action=order_status")?window.location.href="/":(s("/"),t?.({isOpen:!1,openUrl:""})),window.history.replaceState(null,"",window.location.pathname||"/")}})})}function he(){const{state:{logo:e}}=j.useContext(v),[t]=I();return n.jsx(i,{sx:t?{height:"40px",width:"140px","& li":{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"1rem"},"& img":{maxHeight:"40px"}}:{width:"200px",height:"65px",display:"flex",alignItems:"center",maxHeight:"65px","& img":{maxHeight:"65px"}},children:n.jsx(o,{sx:{maxWidth:"200px",cursor:"pointer","& .MuiImageListItem-img":{objectFit:"contain",width:"auto"}},onClick:()=>{window.location.href="/"},children:n.jsx("img",{src:e||ne(ie),alt:"logo"})})})}const ge=j.forwardRef(function({width:e,list:t,title:s,value:o,handleItemClick:d,menuRenderItemName:p=e=>e.name,...x},m){const[u]=I(),[h,g]=j.useState(!1),y=j.useRef(null);j.useImperativeHandle(m,()=>({setOpenDropDown:()=>g(!0)}));const f=()=>{g(!1)};return n.jsxs(i,{sx:{width:e||"auto"},children:[H?n.jsx(r,{primary:s,sx:{"& span":{fontWeight:u?400:700,color:"#333333"}}}):n.jsxs(a,{ref:y,onClick:()=>g(!0),sx:{pr:0},children:[n.jsx(r,{primary:s,sx:{"& span":{fontWeight:u?400:700,color:"#333333"}}}),h?n.jsx(oe,{}):n.jsx(ae,{})]}),n.jsx(l,{anchorEl:y.current,open:h,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},id:"customized-menu",keepMounted:!0,onClose:f,sx:{"& .MuiList-root.MuiList-padding.MuiMenu-list":{pt:u?0:"8px",pb:u?0:"8px",maxHeight:u?"auto":"200px"}},...x||{},children:t.length&&t.map(t=>{const{key:i}=t,s=o===i?"#3385d6":"black";return n.jsx(c,{sx:{color:s,minWidth:u?"auto":e||"155px"},onClick:()=>{f(),d&&d(i)},children:p(t)},i)})})]})}),ye=[{name:"Log out",key:"logout",idLang:"global.button.logout"}];function fe({closeSidebar:e}){const[t]=I(),s=k(({company:e})=>e.customer.firstName),o=k(({company:e})=>e.customer.lastName),a=Z(),r=C(),l=`${s}  ${o}`,c=j.useMemo(()=>ye.map(e=>({key:e.key,name:r(e.idLang)})),[r]);return n.jsx(i,{sx:{minWidth:"150px",display:"flex",justifyContent:t?"start":"end",mr:"-5px",fontSize:"16px",color:"#333333",textAlign:"center",alignItems:"center"},children:n.jsx(ge,{title:l,handleItemClick:async t=>{const n=ye.find(e=>e.key===t);n&&("logout"===n.key?a("/login?loginFlag=loggedOutLogin"):"path"===n.type&&n.key&&a(n.key),e&&e(!1))},list:c})})}const be={currentInfo:{langId:"companyHierarchy.chip.currentCompany"},representingInfo:{langId:"companyHierarchy.chip.selectCompany"}};function je(){const e=C(),t=N(),[s,o]=j.useState(!1),[a,r]=j.useState(null),l=j.useRef(null),{state:{switchAccountButton:{color:c="#ED6C02"}}}=j.useContext(B),{id:x}=k(({company:e})=>e.companyInfo),m=k(({b2bFeatures:e})=>e.masqueradeCompany.id),{pagesSubsidiariesPermission:u}=k(({company:e})=>e),{selectCompanyHierarchyId:h,companyHierarchyList:g}=k(({company:e})=>e.companyHierarchyInfo),{isOpenCompanyHierarchyDropDown:y}=k(({global:e})=>e),f=j.useMemo(()=>Object.keys(u).some(e=>u[e]),[u]);j.useEffect(()=>{y&&l?.current&&l.current?.setOpenDropDown()},[y]);const b=j.useMemo(()=>{const e=h||x||m,t=g.find(t=>Number(t.companyId)===Number(e))?.companyName;return{title:t,list:g.map(e=>({name:e.companyName,key:e.companyId}))}},[h,x,g,m]),{langId:w}=h?be.representingInfo:be.currentInfo;return b?.list?.length&&f&&(x||m)?n.jsxs(n.Fragment,{children:[n.jsxs(i,{sx:{minWidth:"100px",display:"flex",justifyContent:"start",alignItems:"center",fontSize:"1rem",color:"#333333","& .MuiListItemButton-root":{paddingLeft:"0"}},children:[n.jsx(ge,{ref:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},menuRenderItemName:e=>{const{name:t,key:i}=e,s=h||x||m;return n.jsxs(p,{container:!0,direction:"row",sx:{justifyContent:"space-between"},children:[n.jsx(p,{sx:{mr:2},children:t}),n.jsx(p,{sx:{width:"20px",display:"flex",justifyContent:"center"},children:i===Number(s)&&n.jsx(re,{sx:{fontSize:"1.2rem"}})})]})},title:b?.title||"",handleItemClick:e=>(e=>{const t=b.list.find(t=>Number(t.key)===e);t&&(r({companyId:Number(t.key),companyName:t.name}),o(!0))})(Number(e)),list:b?.list||[]}),n.jsx(d,{label:e(w),size:"small",sx:{backgroundColor:h?c:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]}),n.jsx(pe,{open:s,handleClose:()=>{o(!1),t(L(!1))},currentRow:a})]}):null}const Ce=x(i)(()=>({"& svg":{color:"#FFFFFF"}}));function we(e){const{title:t}=e,i=N(),o=C(),a=k(({company:e})=>e.customer.loginType),r=k(({company:e})=>e.customer.role),l=k(({company:e})=>e.companyInfo.status),c=W.get("blockPendingAccountOrderCreation"),[d]=xe(),[p,x]=j.useState(""),[m,u]=j.useState(!1),[h,g]=j.useState("success"),[y,f]=j.useState("#2E7D32"),b=()=>{i(O(E.WAITING_LOGIN)),u(!1)},w={};return 0!==Number(l)&&(w.onClose=b),j.useEffect(()=>{const e=0===Number(l)||1===a,t=100!==r&&e;u(t),t&&(0===Number(l)&&(c&&d&&x(o(z.pendingOrderingAndViewPriceBlocked)),c&&!d&&x(o(z.pendingOrderingBlocked)),!c&&d&&x(o(z.pendingViewPriceBlocked)),c||d||x(o(z.pendingOrderingNotBlocked)),g("info"),f("#0288D1")),1===Number(l)&&(x(o(z.approvedTip)),g("success"),f("#2E7D32")),2===Number(l)&&(x(z.rejectedTip),g("warning"),f("#ED6C02")))},[c,d,l,a,r,o]),m?n.jsx(Ce,{sx:{mb:t?"20px":"0"},children:n.jsx(s,{...w,severity:h||"success",sx:{color:"#FFFFFF",backgroundColor:y},children:p})}):null}function ke({title:e}){const t=k(P),s=k(({company:e})=>e.customer.role),o=k(({company:e})=>e.companyInfo),a=k(({b2bFeatures:e})=>e.masqueradeCompany.companyName),r=k(({global:e})=>e.cartNumber),l=Z(),c=C(),[d]=I(),{state:{portalStyle:{backgroundColor:x="#FEF9F5"}}}=j.useContext(B),{purchasabilityPermission:h}=k(R),{isEnabledCompanyHierarchy:g}=k(({company:e})=>e.companyHierarchyInfo),y=!t||h,f=T(x);return j.useEffect(()=>{se()},[]),n.jsxs(i,{children:[n.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"70px",alignItems:"center"},children:[n.jsxs(p,{sx:{alignItems:"center",flexDirection:"row",display:"flex"},children:[n.jsx(i,{component:"h4",sx:{fontSize:"20px",fontWeight:"500",color:f||"#333333",ml:0},children:3===Number(s)&&(o?.companyName||a||c("global.B3MainHeader.superAdmin"))}),g&&n.jsx(je,{})]}),n.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[100!==s&&n.jsx(fe,{}),n.jsxs(i,{sx:{marginLeft:"8px"},children:[100===s&&n.jsx(m,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{l("/login")},children:c("global.B3MainHeader.signIn")}),n.jsx(m,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{window.location.href="/"},children:c("global.B3MainHeader.home")}),y&&n.jsxs(m,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{A("on-click-cart-button")&&(window.location.href=q)},children:[c("global.B3MainHeader.cart"),r>0?n.jsx(u,{id:"cart-number-icon",sx:{backgroundColor:"#1976D2",minWidth:"21px",height:"20px",color:"#FFFFFF",borderRadius:"64px",fontSize:"12px",fontWeight:"500",lineHeight:"20px",marginLeft:"3px",padding:"0px 6.5px"},children:r}):null]})]})]})]}),e&&n.jsx(i,{component:"h3",sx:{height:"40px",m:"0",fontSize:"34px",fontWeight:400,lineHeight:"42px",display:"flex",alignItems:"end",mb:"24px",mt:d?0:"24px",color:f},children:e}),n.jsx(we,{title:e})]})}const Fe=e=>e.reduce((e,t)=>{if(t?.subsidiariesCompanyKey){const n=t.permissionCodes?.includes(",")?t.permissionCodes.split(",")[0].trim():t.permissionCodes;e[t.subsidiariesCompanyKey]=G({level:3,code:n})}return e},{});function Ie({closeSidebar:e}){const[t]=I(),i=Z(),s=ee(),o=C(),{dispatch:l}=j.useContext(K),c=k(({company:e})=>e.customer.role),{selectCompanyHierarchyId:d,isEnabledCompanyHierarchy:p}=k(({company:e})=>e.companyHierarchyInfo),{permissions:x}=k(({company:e})=>e),{state:m}=j.useContext(v),{quoteDetailHasNewMessages:u,registerEnabled:b}=m,w=h().palette.primary.main,F=()=>{i("/register"),l({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},S=n=>{100!==c?(i(n.path),t&&e&&e(!1)):l({type:"common",payload:{globalMessageDialog:{open:!0,title:"Registration",message:"shoppingLists"===n.configKey?"Please create an account, or login to create a shopping list.":"To receive full access to buyer portal, please register. It will take 2 minutes.",cancelText:"Cancel",saveText:b?"Register":"",saveFn:F}}})};j.useEffect(()=>{let e=!1;const{hash:t}=window.location,n=t.split("#")[1]||"",i=V(m).filter(e=>e.isMenuItem);if(n){const t=V(m).find(e=>te(e.path,n));if(t&&t?.subsidiariesCompanyKey){const{permissionCodes:n}=t,i=n?.includes(",")?n.split(",")[0].trim():n;e=G({code:i,level:3})}}const s=Fe(i);X.dispatch(U(s)),X.dispatch($({isHasCurrentPagePermission:e}))},[d,m,i]);const D=j.useMemo(()=>{let e=V(m).filter(e=>e.isMenuItem);const t=Fe(e);return e=d?e.filter(e=>!!e?.subsidiariesCompanyKey&&t[e.subsidiariesCompanyKey]):e.filter(e=>"companyHierarchy"!==e?.subsidiariesCompanyKey||p&&t[e.subsidiariesCompanyKey]),e},[d,x,m,p]),M=e=>s.pathname===e?(W.set("prevPath",e),!0):!(!s.pathname.includes("orderDetail")||e!==("/company-orders"===W.get("prevPath")?"/company-orders":"/orders"))||(!(!s.pathname.includes("shoppingList")||"/shoppingLists"!==e)||!(!s.pathname.includes("/quoteDetail")&&!s.pathname.includes("/quoteDraft")||"/quotes"!==e));return n.jsx(g,{sx:{width:"100%",maxWidth:360,bgcolor:t?"background.paper":"background.default",color:w||"info.main","& .MuiListItem-root":{"& .MuiButtonBase-root.Mui-selected":{color:T(w)||"#fff",bgcolor:"primary.main",borderRadius:"4px"},"& .MuiButtonBase-root:hover:not(.Mui-selected)":{bgcolor:_(w,.12),borderRadius:"4px"}}},component:"nav","aria-labelledby":"nested-list-subheader",children:D.map(e=>{if("Quotes"===e.name){const{pathname:t}=s;return n.jsx(y,{disablePadding:!0,children:n.jsx(f,{badgeContent:u&&t.includes("quoteDetail")?"":0,variant:"dot",sx:{width:"100%","& .MuiBadge-badge.MuiBadge-dot":{width:8,height:8,bgcolor:"#FFFFFF",right:14,top:22}},children:n.jsx(a,{onClick:()=>S(e),selected:M(e.path),children:n.jsx(r,{primary:o(e.idLang)})})})},e.path)}return n.jsx(y,{disablePadding:!0,children:n.jsx(a,{onClick:()=>S(e),selected:M(e.path),children:n.jsx(r,{primary:o(e.idLang)})})},e.path)})})}function ve({children:e,title:t}){const s=k(P),[o,a]=j.useState(!1),r=k(({global:e})=>e.cartNumber),l=k(({b2bFeatures:e})=>e.masqueradeCompany.isAgenting),{purchasabilityPermission:c}=k(R),d=!s||c,{state:{portalStyle:{backgroundColor:p="#FEF9F5"}}}=j.useContext(B),x=T(p);return n.jsxs(i,{sx:{height:"70vh",p:"4vw",display:"flex",flexDirection:"column"},children:[n.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:"4.5vw"},children:[n.jsx(f,{badgeContent:0,color:"secondary",children:n.jsx(le,{onClick:()=>{a(!0)},sx:{color:x}})}),n.jsx(he,{}),n.jsxs(i,{sx:{display:"flex",justifyContent:"space-between","& span":{marginRight:"1.5rem"}},children:[d&&n.jsx(f,{badgeContent:r,max:1e3,sx:{"& .MuiBadge-badge":{color:"#FFFFFF",backgroundColor:"#1976D2",fontWeight:500,fontSize:"12px",minWidth:"18px",height:"18px",top:"8px",right:"3px",marginRight:"-0.5rem"}},children:n.jsx(ce,{sx:{color:"rgba(0, 0, 0, 0.54)",marginRight:"-0.5rem"},onClick:()=>{window.location.href=q}})}),n.jsx(i,{sx:{marginLeft:"2px",height:"24px"},children:n.jsx(ue,{})})]})]}),n.jsx(i,{component:"h1",sx:{p:0,m:0,mb:"6vw",fontSize:"34px",fontWeight:"400",color:x||"#263238"},children:t}),n.jsx(me,{}),n.jsx(i,{sx:{flex:1,display:"flex",paddingBottom:l?"52px":"0"},children:e}),o&&n.jsxs(i,{sx:{height:"100vh",position:"fixed",width:"92vw",zIndex:1e3,left:0,top:0,p:"4vw",backgroundColor:"white",boxShadow:"0px 7px 8px -4px #00000033, 0px 12px 17px 2px #00000024, 0px 5px 22px 4px #0000001f"},children:[n.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pb:"4vw"},children:[n.jsx(fe,{closeSidebar:a}),n.jsx(de,{onClick:()=>a(!1)})]}),n.jsx(Ie,{closeSidebar:a})]})]})}const Se={"/purchased-products":"global.purchasedProducts.title","/orders":"global.orders.title","/company-orders":"global.companyOrders.title"}}}});
//# sourceMappingURL=B3Layout-legacy-CS35zYoX.js.map
