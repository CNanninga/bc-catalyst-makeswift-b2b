{"version":3,"file":"config-CMx15DDp.js","sources":["../../src/pages/Login/config.ts"],"sourcesContent":["import { LangFormatFunction } from '@/lib/lang';\nimport { LoginFlagType, LoginTypeConfig } from '@/types/login';\nimport { BigCommerceStorefrontAPIBaseURL, validatorRules } from '@/utils';\nimport b2bLogger from '@/utils/b3Logger';\n\nexport type LoginConfig = {\n  email: string;\n  password: string;\n};\n\nexport const getForgotPasswordFields = (b3Lang: LangFormatFunction) => [\n  {\n    name: 'email',\n    label: b3Lang('global.loginText.emailAddress'),\n    required: true,\n    default: '',\n    fieldType: 'text',\n    xs: 12,\n    size: 'small',\n    variant: 'filled',\n    validate: validatorRules(['email']),\n  },\n];\n\nexport const getLoginFields = (b3Lang: LangFormatFunction, submitLoginFn: () => void) => [\n  {\n    name: 'email',\n    label: b3Lang('global.loginText.emailAddress'),\n    required: true,\n    default: '',\n    fieldType: 'text',\n    xs: 12,\n    variant: 'filled',\n    validate: validatorRules(['email']),\n    isAutoComplete: true,\n  },\n  {\n    name: 'password',\n    label: b3Lang('login.loginText.password'),\n    required: true,\n    default: '',\n    fieldType: 'password',\n    xs: 12,\n    variant: 'filled',\n    isEnterTrigger: true,\n    handleEnterClick: submitLoginFn,\n    isAutoComplete: true,\n  },\n];\n\nexport const loginCheckout = (data: LoginConfig) => {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  };\n\n  return fetch(\n    // cspell:disable\n    `${BigCommerceStorefrontAPIBaseURL}/internalapi/v1/checkout/customer`,\n    requestOptions,\n  ).then((response) => response.json());\n};\n\nexport const sendForgotPasswordEmailFor = (email: string) => {\n  const urlencoded = new URLSearchParams();\n  urlencoded.append('email', email);\n\n  const requestOptions: RequestInit = {\n    method: 'POST',\n    body: urlencoded,\n    redirect: 'follow',\n  };\n\n  return fetch(\n    `${BigCommerceStorefrontAPIBaseURL}/login.php?action=send_password_email`,\n    requestOptions,\n  )\n    .then((response) => response.text())\n    .catch((error) => b2bLogger.error('error', error));\n};\n\nexport const loginType: LoginTypeConfig = {\n  resetPassword: {\n    alertType: 'error',\n    tip: 'login.loginTipInfo.resetPassword',\n  },\n  receivePassword: {\n    alertType: 'success',\n    tip: 'login.loginTipInfo.receivePassword',\n  },\n  loggedOutLogin: {\n    alertType: 'success',\n    tip: 'login.loginTipInfo.loggedOutLogin',\n  },\n  accountIncorrect: {\n    alertType: 'error',\n    tip: 'login.loginTipInfo.accountIncorrect',\n  },\n  accountPrelaunch: {\n    alertType: 'warning',\n    tip: 'login.loginTipInfo.accountPrelaunch',\n  },\n  deviceCrowdingLogIn: {\n    alertType: 'success',\n    tip: 'login.loginText.deviceCrowdingLogIn',\n  },\n  invoiceErrorTip: {\n    alertType: 'error',\n    tip: 'login.loginText.invoiceErrorTip',\n  },\n};\n\nexport const isLoginFlagType = (value?: unknown): value is LoginFlagType => {\n  if (typeof value !== 'string') {\n    return false;\n  }\n\n  return Object.keys(loginType).includes(value);\n};\n"],"names":["getForgotPasswordFields","b3Lang","validatorRules","getLoginFields","submitLoginFn","loginCheckout","data","requestOptions","BigCommerceStorefrontAPIBaseURL","response","sendForgotPasswordEmailFor","email","urlencoded","error","b2bLogger","loginType","isLoginFlagType","value"],"mappings":"uMAUO,MAAMA,EAA2BC,GAA+B,CACrE,CACE,KAAM,QACN,MAAOA,EAAO,+BAA+B,EAC7C,SAAU,GACV,QAAS,GACT,UAAW,OACX,GAAI,GACJ,KAAM,QACN,QAAS,SACT,SAAUC,EAAe,CAAC,OAAO,CAAC,CAAA,CAEtC,EAEaC,EAAiB,CAACF,EAA4BG,IAA8B,CACvF,CACE,KAAM,QACN,MAAOH,EAAO,+BAA+B,EAC7C,SAAU,GACV,QAAS,GACT,UAAW,OACX,GAAI,GACJ,QAAS,SACT,SAAUC,EAAe,CAAC,OAAO,CAAC,EAClC,eAAgB,EAAA,EAElB,CACE,KAAM,WACN,MAAOD,EAAO,0BAA0B,EACxC,SAAU,GACV,QAAS,GACT,UAAW,WACX,GAAI,GACJ,QAAS,SACT,eAAgB,GAChB,iBAAkBG,EAClB,eAAgB,EAAA,CAEpB,EAEaC,EAAiBC,GAAsB,CAClD,MAAMC,EAAiB,CACrB,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,KAAM,KAAK,UAAUD,CAAI,CAAA,EAG3B,OAAO,MAEL,GAAG,OAAAE,EAA+B,qCAClCD,CAAA,EACA,KAAME,GAAaA,EAAS,MAAM,CACtC,EAEaC,EAA8BC,GAAkB,CAC3D,MAAMC,EAAa,IAAI,gBACvBA,EAAW,OAAO,QAASD,CAAK,EAEhC,MAAMJ,EAA8B,CAClC,OAAQ,OACR,KAAMK,EACN,SAAU,QAAA,EAGZ,OAAO,MACL,GAAG,OAAAJ,EAA+B,yCAClCD,CAAA,EAEC,KAAME,GAAaA,EAAS,KAAA,CAAM,EAClC,MAAOI,GAAUC,EAAU,MAAM,QAASD,CAAK,CAAC,CACrD,EAEaE,EAA6B,CACxC,cAAe,CACb,UAAW,QACX,IAAK,kCAAA,EAEP,gBAAiB,CACf,UAAW,UACX,IAAK,oCAAA,EAEP,eAAgB,CACd,UAAW,UACX,IAAK,mCAAA,EAEP,iBAAkB,CAChB,UAAW,QACX,IAAK,qCAAA,EAEP,iBAAkB,CAChB,UAAW,UACX,IAAK,qCAAA,EAEP,oBAAqB,CACnB,UAAW,UACX,IAAK,qCAAA,EAEP,gBAAiB,CACf,UAAW,QACX,IAAK,iCAAA,CAET,EAEaC,EAAmBC,GAC1B,OAAOA,GAAU,SACZ,GAGF,OAAO,KAAKF,CAAS,EAAE,SAASE,CAAK"}