{"version":3,"file":"index-legacy-BGrd1TS3.js","sources":["../../src/pages/QuoteDetail/index.tsx","../../../../node_modules/copy-to-clipboard/index.js","../../../../node_modules/toggle-selection/index.js","../../src/pages/quote/components/Message.tsx","../../src/pages/quote/utils/quoteCheckout.ts","../../src/pages/quote/components/QuoteDetailFooter.tsx","../../src/pages/quote/components/QuoteDetailHeader.tsx","../../src/pages/quote/components/QuoteDetailSummary.tsx","../../src/pages/quote/components/QuoteDetailTableCard.tsx","../../src/pages/quote/components/QuoteDetailTable.tsx","../../src/pages/quote/components/QuoteTermsAndConditions.tsx"],"sourcesContent":["import { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport { Box, Grid } from '@mui/material';\nimport copy from 'copy-to-clipboard';\nimport { get } from 'lodash-es';\n\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useMobile } from '@/hooks';\nimport useScrollBar from '@/hooks/useScrollBar';\nimport { useB3Lang } from '@/lib/lang';\nimport { GlobalContext } from '@/shared/global';\nimport {\n  exportQuotePdf,\n  getB2BQuoteDetail,\n  getBcQuoteDetail,\n  searchProducts,\n} from '@/shared/service/b2b';\nimport {\n  activeCurrencyInfoSelector,\n  isB2BUserSelector,\n  rolePermissionSelector,\n  TaxZoneRates,\n  useAppSelector,\n} from '@/store';\nimport { QuoteExtraFieldsData } from '@/types/quotes';\nimport { snackbar, verifyLevelPermission } from '@/utils';\nimport { b2bPermissionsMap } from '@/utils/b3CheckPermissions/config';\nimport { getVariantInfoOOSAndPurchase } from '@/utils/b3Product/b3Product';\nimport { conversionProductsList } from '@/utils/b3Product/shared/config';\nimport { getSearchVal } from '@/utils/loginInfo';\n\nimport Message from '../quote/components/Message';\nimport QuoteAttachment from '../quote/components/QuoteAttachment';\nimport QuoteDetailFooter from '../quote/components/QuoteDetailFooter';\nimport QuoteDetailHeader from '../quote/components/QuoteDetailHeader';\nimport QuoteDetailSummary from '../quote/components/QuoteDetailSummary';\nimport QuoteDetailTable from '../quote/components/QuoteDetailTable';\nimport QuoteInfo from '../quote/components/QuoteInfo';\nimport QuoteNote from '../quote/components/QuoteNote';\nimport QuoteTermsAndConditions from '../quote/components/QuoteTermsAndConditions';\nimport { ProductInfoProps } from '../quote/shared/config';\nimport getB2BQuoteExtraFields from '../quote/utils/getQuoteExtraFields';\nimport { handleQuoteCheckout } from '../quote/utils/quoteCheckout';\n\nfunction useData() {\n  const { id = '' } = useParams();\n\n  const {\n    state: { bcLanguage, quoteConfig },\n  } = useContext(GlobalContext);\n  const companyId = useAppSelector(({ company }) => company.companyInfo.id);\n  const emailAddress = useAppSelector(({ company }) => company.customer.emailAddress);\n  const customerGroupId = useAppSelector(({ company }) => company.customer.customerGroupId);\n  const role = useAppSelector(({ company }) => company.customer.role);\n\n  const isB2BUser = useAppSelector(isB2BUserSelector);\n  const { selectCompanyHierarchyId } = useAppSelector(\n    ({ company }) => company.companyHierarchyInfo,\n  );\n\n  const isAgenting = useAppSelector(({ b2bFeatures }) => b2bFeatures.masqueradeCompany.isAgenting);\n\n  const { currency_code: currencyCode } = useAppSelector(activeCurrencyInfoSelector);\n  const taxZoneRates = useAppSelector(({ global }) => global.taxZoneRates);\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n  const isEnableProduct = useAppSelector(\n    ({ global }) => global.blockPendingQuoteNonPurchasableOOS?.isEnableProduct,\n  );\n\n  const { purchasabilityPermission } = useAppSelector(rolePermissionSelector);\n\n  const handleGetProductsById = async (listProducts: ProductInfoProps[]) => {\n    if (listProducts.length > 0) {\n      const productIds: number[] = [];\n\n      listProducts.forEach((item) => {\n        if (!productIds.includes(item.productId)) {\n          productIds.push(item.productId);\n        }\n      });\n\n      const options = { productIds, currencyCode, companyId, customerGroupId };\n\n      const { productsSearch } = await searchProducts(options);\n\n      const newProductsSearch = conversionProductsList(productsSearch);\n\n      listProducts.forEach((item) => {\n        const listProduct = item;\n        const productInfo = newProductsSearch.find((search: CustomFieldItems) => {\n          const { id: productId } = search;\n\n          return Number(item.productId) === Number(productId);\n        });\n\n        listProduct.productsSearch = productInfo || {};\n      });\n\n      return listProducts;\n    }\n    return undefined;\n  };\n\n  const location = useLocation();\n\n  const getQuote = async () => {\n    const { search } = location;\n\n    const date = getSearchVal(search, 'date') || '';\n    const data = {\n      id: Number(id),\n      date: date.toString(),\n    };\n\n    const { quote } = await (Number(role) === 99\n      ? getBcQuoteDetail(data)\n      : getB2BQuoteDetail(data));\n\n    return quote;\n  };\n\n  return {\n    id,\n    bcLanguage,\n    quoteConfig,\n    role,\n    emailAddress,\n    isB2BUser,\n    selectCompanyHierarchyId,\n    isAgenting,\n    taxZoneRates,\n    enteredInclusiveTax,\n    isEnableProduct,\n    purchasabilityPermission,\n    handleGetProductsById,\n    getQuote,\n  };\n}\n\nfunction QuoteDetail() {\n  const navigate = useNavigate();\n\n  const {\n    id,\n    bcLanguage,\n    quoteConfig,\n    role,\n    emailAddress,\n    isB2BUser,\n    selectCompanyHierarchyId,\n    isAgenting,\n    taxZoneRates,\n    enteredInclusiveTax,\n    isEnableProduct,\n    purchasabilityPermission,\n    handleGetProductsById,\n    getQuote,\n  } = useData();\n\n  const [isMobile] = useMobile();\n\n  const b3Lang = useB3Lang();\n\n  const [quoteDetail, setQuoteDetail] = useState<any>({});\n  const [productList, setProductList] = useState<any>([]);\n  const [fileList, setFileList] = useState<any>([]);\n  const [isHandleApprove, setHandleApprove] = useState<boolean>(false);\n\n  const [isHideQuoteCheckout, setIsHideQuoteCheckout] = useState<boolean>(true);\n\n  const [quoteSummary, setQuoteSummary] = useState<any>({\n    originalSubtotal: 0,\n    discount: 0,\n    tax: 0,\n    shipping: 0,\n    totalAmount: 0,\n  });\n  const [isRequestLoading, setIsRequestLoading] = useState(false);\n  const [isShowFooter, setIsShowFooter] = useState(false);\n  const [quoteDetailTax, setQuoteDetailTax] = useState(0);\n  const [noBuyerProductName, setNoBuyerProductName] = useState({\n    oos: '',\n    nonPurchasable: '',\n  });\n\n  const [quotePurchasabilityPermissionInfo, setQuotePurchasabilityPermission] = useState({\n    quotePurchasabilityPermission: false,\n    quoteConvertToOrderPermission: false,\n  });\n\n  const [quoteCheckoutLoading, setQuoteCheckoutLoading] = useState<boolean>(false);\n\n  const location = useLocation();\n\n  useEffect(() => {\n    if (!quoteDetail?.id) return;\n\n    const { quoteConvertToOrderPermission: quoteCheckoutPermissionCode } = b2bPermissionsMap;\n\n    const getPurchasabilityAndConvertToOrderPermission = () => {\n      if (isB2BUser) {\n        const companyId = quoteDetail?.companyId?.id || null;\n        const userEmail = quoteDetail?.contactInfo?.email || '';\n        return {\n          quotePurchasabilityPermission: purchasabilityPermission,\n          quoteConvertToOrderPermission: verifyLevelPermission({\n            code: quoteCheckoutPermissionCode,\n            companyId,\n            userEmail,\n          }),\n        };\n      }\n\n      return {\n        quotePurchasabilityPermission: true,\n        quoteConvertToOrderPermission: true,\n      };\n    };\n\n    const { quotePurchasabilityPermission, quoteConvertToOrderPermission } =\n      getPurchasabilityAndConvertToOrderPermission();\n\n    setQuotePurchasabilityPermission({\n      quotePurchasabilityPermission,\n      quoteConvertToOrderPermission,\n    });\n  }, [isB2BUser, quoteDetail, selectCompanyHierarchyId, purchasabilityPermission]);\n\n  useEffect(() => {\n    let oosErrorList = '';\n    let nonPurchasableErrorList = '';\n\n    productList.forEach((item: CustomFieldItems) => {\n      const buyerInfo = getVariantInfoOOSAndPurchase(item);\n\n      if (buyerInfo?.type && isEnableProduct && !item?.purchaseHandled) {\n        if (buyerInfo.type === 'oos') {\n          oosErrorList += `${item.productName}${oosErrorList ? ',' : ''}`;\n        }\n\n        if (buyerInfo.type === 'non-purchasable') {\n          nonPurchasableErrorList += `${item.productName}${nonPurchasableErrorList ? ',' : ''}`;\n        }\n      }\n    });\n\n    const isHideCheckout = !!oosErrorList || !!nonPurchasableErrorList;\n    if (isEnableProduct && isHandleApprove && isHideCheckout) {\n      if (oosErrorList)\n        snackbar.error(\n          b3Lang('quoteDetail.message.insufficientStock', {\n            ProductName: oosErrorList,\n          }),\n        );\n\n      if (nonPurchasableErrorList)\n        snackbar.error(\n          b3Lang('quoteDetail.message.nonPurchasable', {\n            ProductName: nonPurchasableErrorList,\n          }),\n        );\n    }\n\n    setIsHideQuoteCheckout(isHideCheckout);\n\n    setNoBuyerProductName({\n      oos: oosErrorList,\n      nonPurchasable: nonPurchasableErrorList,\n    });\n    // disabling since b3Lang is a dependency that will trigger rendering issues\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isEnableProduct, isHandleApprove, productList]);\n\n  const proceedingCheckoutFn = useCallback(() => {\n    if (isHideQuoteCheckout) {\n      const { oos, nonPurchasable } = noBuyerProductName;\n      if (oos)\n        snackbar.error(\n          b3Lang('quoteDetail.message.insufficientStock', {\n            ProductName: oos,\n          }),\n        );\n\n      if (nonPurchasable)\n        snackbar.error(\n          b3Lang('quoteDetail.message.nonPurchasable', {\n            ProductName: nonPurchasable,\n          }),\n        );\n    }\n    return isHideQuoteCheckout;\n    // disabling as b3Lang is a dependency that will trigger rendering issues\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isHideQuoteCheckout, noBuyerProductName]);\n\n  const classRates: TaxZoneRates[] = [];\n  if (taxZoneRates?.length) {\n    const defaultTaxZone = taxZoneRates?.find((taxZone: { id: number }) => taxZone.id === 1);\n    if (defaultTaxZone) {\n      const { rates = [] } = defaultTaxZone;\n\n      if (rates[0] && rates[0].enabled && rates[0].classRates.length) {\n        rates[0].classRates.forEach((rate) => classRates.push(rate));\n      }\n    }\n  }\n\n  const getTaxRate = (taxClassId: number, variants: any) => {\n    if (variants.length) {\n      const taxExclusive = get(variants, '[0].bc_calculated_price.tax_exclusive', 0);\n      const taxInclusive = get(variants, '[0].bc_calculated_price.tax_inclusive', 0);\n      return taxExclusive > 0 ? (taxInclusive - taxExclusive) / taxExclusive : 0;\n    }\n    if (classRates.length) {\n      return (classRates.find((rate) => rate.taxClassId === taxClassId)?.rate || 0) / 100;\n    }\n    return 0;\n  };\n\n  const getQuoteExtraFields = async (currentExtraFields: QuoteExtraFieldsData[]) => {\n    const extraFieldsInfo = await getB2BQuoteExtraFields();\n    const quoteCurrentExtraFields: QuoteExtraFieldsData[] = [];\n    if (extraFieldsInfo.length) {\n      extraFieldsInfo.forEach((item) => {\n        const extraField = item;\n        const currentExtraField = currentExtraFields.find(\n          (field: QuoteExtraFieldsData) => field.fieldName === extraField.name,\n        );\n\n        quoteCurrentExtraFields.push({\n          fieldName: extraField.name || '',\n          fieldValue: currentExtraField?.fieldValue || extraField.default,\n        });\n      });\n    }\n\n    return quoteCurrentExtraFields;\n  };\n\n  const getQuoteDetail = async () => {\n    setIsRequestLoading(true);\n    setIsShowFooter(false);\n\n    try {\n      const quote = await getQuote();\n      const productsWithMoreInfo = await handleGetProductsById(quote.productsList).catch(() => {\n        return undefined;\n      });\n      const quoteExtraFieldInfos = await getQuoteExtraFields(quote.extraFields);\n\n      setQuoteDetail({\n        ...quote,\n        extraFields: quoteExtraFieldInfos,\n      });\n      setQuoteSummary({\n        originalSubtotal: quote.subtotal,\n        discount: quote.discount,\n        tax: quote.taxTotal,\n        shipping: quote.shippingTotal,\n        totalAmount: quote.totalAmount,\n      });\n      setProductList(productsWithMoreInfo);\n\n      if (Number(quote.shippingTotal) === 0) {\n        setQuoteDetailTax(Number(quote.taxTotal));\n      } else {\n        let taxPrice = 0;\n        productsWithMoreInfo?.forEach((product) => {\n          const {\n            quantity,\n            offeredPrice,\n            productsSearch: { variants = [], taxClassId },\n          } = product;\n\n          const taxRate = getTaxRate(taxClassId, variants);\n          taxPrice += enteredInclusiveTax\n            ? ((Number(offeredPrice) * taxRate) / (1 + taxRate)) * Number(quantity)\n            : Number(offeredPrice) * taxRate * Number(quantity);\n        });\n\n        setQuoteDetailTax(taxPrice);\n      }\n\n      const {\n        backendAttachFiles = [],\n        storefrontAttachFiles = [],\n        salesRep,\n        salesRepEmail,\n      } = quote;\n\n      setHandleApprove(!!salesRep || !!salesRepEmail);\n\n      const newFileList: CustomFieldItems[] = [];\n      storefrontAttachFiles.forEach((file: CustomFieldItems) => {\n        newFileList.push({\n          fileName: file.fileName,\n          fileType: file.fileType,\n          fileUrl: file.fileUrl,\n          id: file.id,\n          hasDelete: quoteDetail.status !== 4,\n          title: b3Lang('quoteDetail.uploadedByCustomer', {\n            createdBy: file.createdBy,\n          }),\n        });\n      });\n\n      backendAttachFiles.forEach((file: CustomFieldItems) => {\n        newFileList.push({\n          fileName: file.fileName,\n          fileType: file.fileType,\n          fileUrl: file.fileUrl,\n          id: file.id,\n          title: b3Lang('quoteDetail.uploadedBySalesRep', {\n            createdBy: file.createdBy,\n          }),\n        });\n      });\n\n      setFileList(newFileList);\n\n      return quote;\n    } catch (err: any) {\n      snackbar.error(err);\n      throw err;\n    } finally {\n      setIsRequestLoading(false);\n      setIsShowFooter(true);\n    }\n  };\n\n  const fetchPdfUrl = async (bool: boolean) => {\n    setIsRequestLoading(true);\n    const { id, createdAt } = quoteDetail;\n    try {\n      const data = {\n        quoteId: Number(id),\n        createdAt,\n        isPreview: bool,\n        lang: bcLanguage,\n      };\n\n      const quotePdf = await exportQuotePdf(data);\n\n      if (quotePdf) {\n        return {\n          url: quotePdf.quoteFrontendPdf.url,\n          content: quotePdf.quoteFrontendPdf.content,\n        };\n      }\n    } catch (err: any) {\n      snackbar.error(err);\n    }\n    return {\n      url: '',\n      content: '',\n    };\n  };\n\n  const exportPdf = async () => {\n    try {\n      const { url: quotePdfUrl } = await fetchPdfUrl(false);\n      if (quotePdfUrl) {\n        window.open(`${quotePdfUrl}`, '_blank');\n      }\n    } catch (err: any) {\n      snackbar.error(err);\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const printQuote = async () => {\n    try {\n      const { content } = await fetchPdfUrl(true);\n\n      const iframe = document.createElement('iframe');\n      iframe.setAttribute('style', 'display:none;');\n      document.getElementById('bundle-container')?.appendChild(iframe);\n      iframe.contentDocument?.open();\n      iframe.contentDocument?.write(content);\n      iframe.contentDocument?.close();\n      setIsRequestLoading(false);\n      iframe.contentWindow?.print();\n    } catch (err: any) {\n      snackbar.error(err);\n    }\n  };\n\n  const getQuoteTableDetails = async (params: any) => {\n    let allProductsList: any[] = productList;\n\n    if (allProductsList.length === 0) {\n      const quote = await getQuoteDetail();\n      allProductsList = quote?.productsList || [];\n    }\n\n    const startIndex = Number(params.offset);\n    const endIndex = Number(params.first) + startIndex;\n\n    if (!allProductsList.length) {\n      return {\n        edges: [],\n        totalCount: 0,\n      };\n    }\n    const list = allProductsList.slice(startIndex, endIndex);\n\n    return {\n      edges: list,\n      totalCount: allProductsList.length,\n    };\n  };\n\n  useEffect(() => {\n    const { state } = location;\n\n    if (!state) return;\n\n    setTimeout(() => {\n      snackbar.success(\n        Number(role) === 100\n          ? b3Lang('quoteDetail.submittedQuote')\n          : b3Lang('quoteDetail.quoteSubmitted'),\n        {\n          action: {\n            label:\n              Number(role) === 100\n                ? b3Lang('quoteDetail.copyQuoteLink')\n                : b3Lang('quoteDetail.reviewAllQuotes'),\n            onClick: () => {\n              if (Number(role) === 100) {\n                copy(window.location.href);\n                snackbar.success(b3Lang('quoteDetail.copySuccessful'));\n              } else {\n                navigate('/quotes');\n              }\n            },\n          },\n        },\n      );\n    }, 10);\n    location.state = null;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location, navigate, role]);\n\n  const quoteGotoCheckout = async () => {\n    try {\n      setQuoteCheckoutLoading(true);\n      await handleQuoteCheckout({\n        quoteId: id,\n        proceedingCheckoutFn,\n        role,\n        location,\n        navigate,\n      });\n    } finally {\n      setQuoteCheckoutLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (location.search.includes('isCheckout') && id) {\n      quoteGotoCheckout();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id, isHideQuoteCheckout]);\n\n  const isAutoEnableQuoteCheckout = useMemo(() => {\n    const isAutoEnable =\n      quoteConfig.find((item) => item.key === 'quote_auto_quoting')?.value === '1';\n\n    if (!isAutoEnable && !isHandleApprove) return false;\n\n    return true;\n  }, [quoteConfig, isHandleApprove]);\n\n  const isEnableProductShowCheckout = () => {\n    if (isEnableProduct) {\n      if (isHandleApprove && isHideQuoteCheckout) return true;\n      if (!isHideQuoteCheckout) return true;\n\n      return false;\n    }\n\n    return true;\n  };\n\n  const quoteAndExtraFieldsInfo = useMemo(() => {\n    const currentExtraFields = quoteDetail?.extraFields?.map(\n      (field: { fieldName: string; fieldValue: string | number }) => ({\n        fieldName: field.fieldName,\n        value: field.fieldValue,\n      }),\n    );\n\n    return {\n      info: {\n        quoteTitle: quoteDetail?.quoteTitle || '',\n        referenceNumber: quoteDetail?.referenceNumber || '',\n      },\n      extraFields: currentExtraFields || [],\n      recipients: quoteDetail?.recipients || [],\n    };\n  }, [quoteDetail]);\n\n  useScrollBar(false);\n\n  const { quotePurchasabilityPermission, quoteConvertToOrderPermission } =\n    quotePurchasabilityPermissionInfo;\n\n  return (\n    <B3Spin isSpinning={isRequestLoading || quoteCheckoutLoading}>\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n        }}\n      >\n        <QuoteDetailHeader\n          status={quoteDetail.status}\n          quoteNumber={quoteDetail.quoteNumber}\n          issuedAt={quoteDetail.createdAt}\n          expirationDate={quoteDetail.expiredAt}\n          exportPdf={exportPdf}\n          printQuote={printQuote}\n          role={role}\n          salesRepInfo={quoteDetail.salesRepInfo}\n        />\n\n        <Box\n          sx={{\n            marginTop: '1rem',\n          }}\n        >\n          <QuoteInfo\n            quoteAndExtraFieldsInfo={quoteAndExtraFieldsInfo}\n            contactInfo={quoteDetail.contactInfo}\n            shippingAddress={quoteDetail.shippingAddress}\n            billingAddress={quoteDetail.billingAddress}\n          />\n        </Box>\n\n        <Grid\n          container\n          spacing={isMobile ? 2 : 0}\n          rowSpacing={0}\n          sx={{\n            overflow: 'auto',\n            flexWrap: isMobile ? 'wrap' : 'nowrap',\n            paddingBottom: '20px',\n            marginBottom: isMobile ? '6rem' : 0,\n            marginTop: isMobile ? 0 : '1rem',\n            '@media print': {\n              overflow: 'hidden',\n            },\n          }}\n        >\n          <Grid\n            item\n            xs={isMobile ? 12 : 8}\n            rowSpacing={0}\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                    pl: '16px',\n                  }\n                : {\n                    mr: '16px',\n                  }\n            }\n          >\n            <Box\n              sx={\n                isMobile\n                  ? {\n                      flexBasis: '100%',\n                    }\n                  : {}\n              }\n            >\n              <QuoteDetailTable\n                total={productList.length}\n                currency={quoteDetail.currency}\n                isHandleApprove={isHandleApprove}\n                getQuoteTableDetails={getQuoteTableDetails}\n                getTaxRate={getTaxRate}\n                displayDiscount={quoteDetail.displayDiscount}\n              />\n            </Box>\n          </Grid>\n\n          <Grid\n            item\n            xs={isMobile ? 12 : 4}\n            rowSpacing={0}\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                  }\n                : {\n                    pl: 0,\n                  }\n            }\n          >\n            <Box\n              sx={{\n                marginBottom: '1rem',\n              }}\n            >\n              <QuoteDetailSummary\n                isHideQuoteCheckout={isHideQuoteCheckout}\n                quoteSummary={quoteSummary}\n                quoteDetailTax={quoteDetailTax}\n                status={quoteDetail.status}\n                quoteDetail={quoteDetail}\n              />\n            </Box>\n\n            {quoteDetail.notes && (\n              <Box\n                sx={{\n                  marginBottom: '1rem',\n                  displayPrint: 'none',\n                }}\n              >\n                <QuoteNote quoteNotes={quoteDetail.notes} />\n              </Box>\n            )}\n\n            <Box\n              sx={{\n                marginBottom: '1rem',\n                displayPrint: 'none',\n              }}\n            >\n              <Message\n                id={id}\n                status={quoteDetail.status}\n                isB2BUser={isB2BUser}\n                email={emailAddress || ''}\n                msgs={quoteDetail?.trackingHistory || []}\n              />\n            </Box>\n\n            <Box\n              sx={{\n                marginBottom: '1rem',\n                displayPrint: 'none',\n              }}\n            >\n              <QuoteAttachment\n                allowUpload={Number(quoteDetail.status) !== 4}\n                quoteId={quoteDetail.id}\n                status={quoteDetail.status}\n                defaultFileList={fileList}\n              />\n            </Box>\n\n            {quoteDetail.legalTerms && (\n              <Box\n                sx={{\n                  displayPrint: 'none',\n                }}\n              >\n                <QuoteTermsAndConditions quoteLegalTerms={quoteDetail.legalTerms} />\n              </Box>\n            )}\n          </Grid>\n        </Grid>\n\n        {quoteConvertToOrderPermission &&\n          quotePurchasabilityPermission &&\n          Number(quoteDetail.status) !== 4 &&\n          isShowFooter &&\n          quoteDetail?.allowCheckout &&\n          isAutoEnableQuoteCheckout &&\n          isEnableProductShowCheckout() && (\n            <QuoteDetailFooter\n              quoteId={quoteDetail.id}\n              role={role}\n              isAgenting={isAgenting}\n              status={quoteDetail.status}\n              proceedingCheckoutFn={proceedingCheckoutFn}\n            />\n          )}\n      </Box>\n    </B3Spin>\n  );\n}\n\nexport default QuoteDetail;\n","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"âŒ˜\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // avoid screen readers from reading out loud the text\n    mark.ariaHidden = \"true\"\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","import {\n  KeyboardEvent,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { ArrowUpward as ArrowUpwardIcon } from '@mui/icons-material';\nimport { Box, Card, CardContent, TextField, Tooltip, useTheme } from '@mui/material';\nimport { format, formatDistanceStrict } from 'date-fns';\n\nimport { B3CollapseContainer } from '@/components';\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useB3Lang } from '@/lib/lang';\nimport { GlobalContext } from '@/shared/global';\nimport { updateQuote } from '@/shared/service/b2b';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { displayExtendedFormat, storeHash } from '@/utils';\n\ninterface MessageProps {\n  date?: number;\n  message?: string;\n  role?: string;\n  isCustomer?: boolean;\n  key?: number | string;\n  read?: number;\n  sendTime?: number;\n}\n\ninterface MsgsProps {\n  msgs: MessageProps[];\n  id: string | number;\n  email: string;\n  isB2BUser: boolean;\n  status: number;\n}\n\ninterface CustomerMessageProps {\n  msg: MessageProps;\n  isEndMessage?: boolean;\n  isCustomer?: boolean;\n}\n\nfunction ChatMessage({ msg, isEndMessage, isCustomer }: CustomerMessageProps) {\n  const b3Lang = useB3Lang();\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: isCustomer ? 'flex-end' : 'flex-start',\n        paddingTop: '5px',\n      }}\n    >\n      {msg?.role && (\n        <Box\n          sx={{\n            height: '14px',\n            fontWeight: 400,\n            lineHeight: '14px',\n            fontSize: '10px',\n            letterSpacing: '0.17px',\n            color: 'rgba(0, 0, 0, 0.38)',\n          }}\n        >\n          {msg.role}\n        </Box>\n      )}\n      {msg?.message && (\n        <Box\n          sx={{\n            display: 'inline-block',\n            lineHeight: '34px',\n            padding: '0 10px',\n            background: isCustomer ? 'rgba(25, 118, 210, 0.3)' : 'rgba(0, 0, 0, 0.12)',\n            borderRadius: '18px',\n            m: '1px',\n          }}\n        >\n          <Tooltip title={format((msg.sendTime || 0) * 1000, 'K:m aa')} placement=\"top\" arrow>\n            <Box\n              sx={{\n                wordBreak: 'break-word',\n              }}\n            >\n              {msg.message}\n            </Box>\n          </Tooltip>\n          {isEndMessage && (\n            <Box\n              sx={{\n                height: '14px',\n                fontWeight: 400,\n                lineHeight: '14px',\n                fontSize: '10px',\n                letterSpacing: '0.17px',\n                color: 'rgba(0, 0, 0, 0.38)',\n              }}\n            >\n              {`${b3Lang('quoteDetail.message.sent')} ${formatDistanceStrict(\n                new Date((msg.sendTime || 0) * 1000),\n                new Date(),\n                {\n                  addSuffix: true,\n                },\n              )}`}\n            </Box>\n          )}\n        </Box>\n      )}\n    </Box>\n  );\n}\n\ninterface DateMessageProps {\n  msg: MessageProps;\n}\n\nfunction DateMessage({ msg }: DateMessageProps) {\n  return (\n    <Box\n      sx={{\n        color: 'rgba(0, 0, 0, 0.6)',\n        textAlign: 'center',\n        height: '21px',\n        mb: '5px',\n      }}\n    >\n      {`${displayExtendedFormat(msg?.date || 0)}`}\n    </Box>\n  );\n}\n\nfunction Message({ msgs, id, isB2BUser, email, status }: MsgsProps) {\n  const { dispatch: globalDispatch } = useContext(GlobalContext);\n\n  const theme = useTheme();\n  const primaryColor = theme.palette.primary.main;\n  const b3Lang = useB3Lang();\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const changeReadRef = useRef(0);\n\n  const [messages, setMessages] = useState<MessageProps[]>([]);\n\n  const [read, setRead] = useState<number>(0);\n\n  const [message, setMessage] = useState<string>('');\n\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const { quotesUpdateMessageActionsPermission } = useAppSelector(rolePermissionSelector);\n  const quotesUpdateMessagePermission = isB2BUser ? quotesUpdateMessageActionsPermission : true;\n\n  const convertedMsgs = (msgs: MessageProps[]) => {\n    let nextMsg: MessageProps = {};\n    const getNewMsgs: MessageProps[] = [];\n    let readNum = 0;\n    msgs.forEach((msg: MessageProps, index: number) => {\n      if (index === 0) {\n        getNewMsgs.push({\n          isCustomer: !msg.role?.includes('Sales rep:'),\n          date: msg?.date,\n          key: `${msg?.date}date`,\n        });\n        getNewMsgs.push({\n          isCustomer: !msg.role?.includes('Sales rep:'),\n          message: msg.message,\n          sendTime: msg.date,\n          role: msg.role,\n          key: msg?.date,\n        });\n        nextMsg = msg;\n        nextMsg.isCustomer = !msg.role?.includes('Sales rep:');\n      } else {\n        if ((msg?.date || 0) - (nextMsg?.date || 0) > 60 * 60) {\n          getNewMsgs.push({\n            isCustomer: !msg.role?.includes('Sales rep:'),\n            date: msg?.date,\n            key: `${msg?.date}date`,\n          });\n        }\n\n        if (nextMsg.isCustomer === !msg.role?.includes('Sales rep:')) {\n          getNewMsgs.push({\n            isCustomer: !msg.role?.includes('Sales rep:'),\n            message: msg.message,\n            sendTime: msg.date,\n            key: msg?.date,\n          });\n        } else {\n          getNewMsgs.push({\n            isCustomer: !msg.role?.includes('Sales rep:'),\n            message: msg.message,\n            role: msg.role,\n            sendTime: msg.date,\n            key: msg?.date,\n          });\n        }\n        nextMsg = msg;\n        nextMsg.isCustomer = !msg.role?.includes('Sales rep:');\n      }\n\n      if (msg.role?.includes('Sales rep:') && !msg.read) {\n        readNum += 1;\n      }\n    });\n\n    setRead(readNum);\n\n    setMessages(getNewMsgs);\n  };\n\n  const title = useMemo(\n    () => (\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        {`${b3Lang('quoteDetail.message.message')} `}\n        {read !== 0 && (\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              width: '20px',\n              height: '20px',\n              borderRadius: '50%',\n              background: primaryColor || '#1976D2',\n              color: '#fff',\n              fontSize: '12px',\n              ml: '8px',\n            }}\n          >\n            {read}\n          </Box>\n        )}\n      </Box>\n    ),\n    // disabling this rule as b3Lang will cause rendering issues\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [primaryColor, read],\n  );\n\n  useEffect(() => {\n    convertedMsgs(msgs);\n  }, [msgs]);\n\n  useEffect(() => {\n    if (messagesEndRef.current && messages.length) {\n      messagesEndRef.current.scrollTop = messagesEndRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const updateMsgs = async (msg: string) => {\n    try {\n      setLoading(true);\n      const {\n        quoteUpdate: {\n          quote: { trackingHistory },\n        },\n      } = await updateQuote({\n        id: Number(id),\n        quoteData: {\n          message: msg,\n          lastMessage: parseInt(`${new Date().getTime() / 1000}`, 10),\n          userEmail: email || '',\n          storeHash,\n        },\n      });\n      setMessage('');\n      setRead(0);\n      convertedMsgs(trackingHistory);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateMessage = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      updateMsgs((e.target as HTMLInputElement).value || '');\n    }\n  };\n\n  const handleOnChange = useCallback(\n    (open: boolean) => {\n      if (open) {\n        if (!quotesUpdateMessagePermission && isB2BUser) return;\n\n        if (changeReadRef.current === 0 && msgs.length) {\n          updateQuote({\n            id: Number(id),\n            quoteData: {\n              lastMessage: msgs[msgs.length - 1]?.date,\n              userEmail: email || '',\n              storeHash,\n            },\n          });\n        }\n        setRead(0);\n        if (messagesEndRef.current) {\n          messagesEndRef.current.scrollTop = messagesEndRef.current.scrollHeight;\n        }\n        changeReadRef.current += 1;\n      }\n    },\n    [email, id, isB2BUser, msgs, quotesUpdateMessagePermission],\n  );\n\n  useEffect(() => {\n    globalDispatch({\n      type: 'common',\n      payload: {\n        quoteDetailHasNewMessages: read !== 0,\n      },\n    });\n    // Disabling this rule as dispatcher dep globalDispatch is the same between renders\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [read]);\n\n  return (\n    <Card>\n      <CardContent\n        sx={{\n          p: '16px !important',\n        }}\n      >\n        <B3CollapseContainer handleOnChange={handleOnChange} title={title}>\n          <Box\n            sx={{\n              padding: '16px 0',\n            }}\n          >\n            <Box\n              sx={{\n                position: 'relative',\n                color: 'rgba(0, 0, 0, 0.6)',\n                opacity: 0.6,\n                textAlign: 'left',\n                width: '100%',\n                fontSize: '14px',\n              }}\n            >\n              {b3Lang('quoteDetail.message.merchantAnswers')}\n            </Box>\n            <Box\n              ref={messagesEndRef}\n              sx={{\n                mt: '20px',\n                maxHeight: '280px',\n                overflowY: 'auto',\n                '&::-webkit-scrollbar': {\n                  display: 'none',\n                },\n              }}\n            >\n              {messages.map((item: MessageProps, index: number) => (\n                <Box key={item.key}>\n                  <ChatMessage\n                    msg={item}\n                    isEndMessage={index === messages.length - 1}\n                    isCustomer={!!item.isCustomer}\n                  />\n                  {item.date && <DateMessage msg={item} />}\n                </Box>\n              ))}\n            </Box>\n          </Box>\n\n          {status !== 4 && quotesUpdateMessagePermission && (\n            <B3Spin\n              isSpinning={loading}\n              spinningHeight={50}\n              size={10}\n              isCloseLoading\n              tip=\"waiting..\"\n            >\n              <Box\n                sx={{\n                  display: 'flex',\n                  width: '100%',\n                }}\n              >\n                <TextField\n                  onKeyDown={updateMessage}\n                  sx={{\n                    width: '100%',\n                    '& .MuiFormLabel-root': {\n                      color: 'rgba(0, 0, 0, 0.38)',\n                    },\n                    '& input': {\n                      padding: '1.5rem 0.7rem 0.5rem',\n                    },\n                  }}\n                  value={message}\n                  onChange={(event) => {\n                    setMessage(event.target.value);\n                  }}\n                  size=\"small\"\n                  label={b3Lang('quoteDetail.message.typeMessage')}\n                  variant=\"filled\"\n                />\n                <Box\n                  onClick={() => updateMsgs(message)}\n                  sx={{\n                    width: '42px',\n                    height: '36px',\n                    margin: '10px 0 0 10px',\n                    background: '#BAD6F2',\n                    borderRadius: '50%',\n                  }}\n                >\n                  <ArrowUpwardIcon\n                    sx={{\n                      height: '18px',\n                      width: '18px',\n                      margin: '8px 0 0 9px',\n                      color: '#0000008A',\n                    }}\n                    fontSize=\"small\"\n                  />\n                </Box>\n              </Box>\n            </B3Spin>\n          )}\n        </B3CollapseContainer>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default Message;\n","import { Location, NavigateFunction } from 'react-router-dom';\n\nimport { getBCStorefrontProductSettings, quoteCheckout } from '@/shared/service/b2b';\nimport { setQuoteDetailToCheckoutUrl, store } from '@/store';\nimport { attemptCheckoutLoginAndRedirect, setQuoteToStorage } from '@/utils/b3checkout';\nimport b2bLogger from '@/utils/b3Logger';\nimport { platform } from '@/utils/basicConfig';\nimport { getSearchVal } from '@/utils/loginInfo';\n\ninterface QuoteCheckout {\n  role: string | number;\n  proceedingCheckoutFn: () => boolean;\n  location: Location;\n  quoteId: string;\n  navigate?: NavigateFunction;\n}\n\nexport const handleQuoteCheckout = async ({\n  role,\n  proceedingCheckoutFn,\n  location,\n  quoteId,\n  navigate,\n}: QuoteCheckout) => {\n  try {\n    store.dispatch(setQuoteDetailToCheckoutUrl(''));\n\n    const isHideQuoteCheckout = proceedingCheckoutFn();\n\n    if (isHideQuoteCheckout) return;\n\n    const {\n      storefrontProductSettings: { hidePriceFromGuests },\n    } = await getBCStorefrontProductSettings();\n\n    if (hidePriceFromGuests && Number(role) === 100 && navigate) {\n      store.dispatch(setQuoteDetailToCheckoutUrl(location.pathname + location.search));\n      navigate('/login');\n      return;\n    }\n\n    const date = getSearchVal(location.search, 'date');\n\n    const res = await quoteCheckout({\n      id: Number(quoteId),\n    });\n\n    setQuoteToStorage(quoteId, date);\n    const {\n      quoteCheckout: {\n        quoteCheckout: { checkoutUrl, cartId },\n      },\n    } = res;\n\n    if (platform === 'bigcommerce') {\n      window.location.href = checkoutUrl;\n      return;\n    }\n\n    if (platform === 'catalyst') {\n      window.location.href = `/checkout?cartId=${cartId}`;\n      return;\n    }\n\n    await attemptCheckoutLoginAndRedirect(cartId, checkoutUrl as string);\n  } catch (err) {\n    b2bLogger.error(err);\n  }\n};\n","import { useLocation, useNavigate } from 'react-router-dom';\nimport { Box } from '@mui/material';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\n\nimport { handleQuoteCheckout } from '../utils/quoteCheckout';\n\ninterface QuoteDetailFooterProps {\n  quoteId: string;\n  role: string | number;\n  isAgenting: boolean;\n  status: number;\n  proceedingCheckoutFn: () => boolean;\n}\n\nfunction QuoteDetailFooter(props: QuoteDetailFooterProps) {\n  const { quoteId, role, isAgenting, status, proceedingCheckoutFn } = props;\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const containerStyle = isMobile\n    ? {\n        alignItems: 'flex-end',\n        flexDirection: 'column',\n      }\n    : {\n        alignItems: 'center',\n      };\n\n  return status !== 5 ? (\n    <Box\n      sx={{\n        position: 'fixed',\n        bottom: isMobile && isAgenting ? '52px' : 0,\n        left: 0,\n        backgroundColor: '#fff',\n        width: '100%',\n        padding: '0.8rem 1rem',\n        height: 'auto',\n        display: 'flex',\n        zIndex: '999',\n        justifyContent: isMobile ? 'center' : 'flex-end',\n        displayPrint: 'none',\n        ...containerStyle,\n      }}\n    >\n      <CustomButton\n        variant=\"contained\"\n        onClick={() => {\n          handleQuoteCheckout({\n            proceedingCheckoutFn,\n            role,\n            location,\n            quoteId,\n            navigate,\n          });\n        }}\n        sx={{\n          width: isMobile ? '100%' : 'auto',\n        }}\n      >\n        {b3Lang('quoteDetail.footer.proceedToCheckout')}\n      </CustomButton>\n    </Box>\n  ) : null;\n}\n\nexport default QuoteDetailFooter;\n","import { useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ArrowBackIosNew } from '@mui/icons-material';\nimport { Box, Grid, styled, Typography, useTheme } from '@mui/material';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { b3HexToRgb, getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\nimport { displayFormat } from '@/utils';\n\nimport QuoteStatus from './QuoteStatus';\n\nconst StyledCreateName = styled('div')(() => ({\n  display: 'flex',\n  alignItems: 'center',\n  marginTop: '0.5rem',\n}));\n\ninterface QuoteDetailHeaderProps {\n  status: string;\n  quoteNumber: string;\n  issuedAt: number;\n  expirationDate: number;\n  exportPdf: () => void;\n  printQuote: () => Promise<void>;\n  role: string | number;\n  salesRepInfo: { [key: string]: string };\n}\n\nfunction QuoteDetailHeader(props: QuoteDetailHeaderProps) {\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n\n  const {\n    status,\n    quoteNumber,\n    issuedAt,\n    expirationDate,\n    exportPdf,\n    printQuote,\n    role,\n    salesRepInfo,\n  } = props;\n\n  const {\n    state: {\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n\n  const customColor = getContrastColor(backgroundColor);\n\n  const theme = useTheme();\n\n  const primaryColor = theme.palette.primary.main;\n\n  const navigate = useNavigate();\n  const gridOptions = (xs: number) =>\n    isMobile\n      ? {}\n      : {\n          xs,\n        };\n\n  return (\n    <>\n      {Number(role) !== 100 && (\n        <Box\n          sx={{\n            marginBottom: '10px',\n            width: 'fit-content',\n            displayPrint: 'none',\n          }}\n        >\n          <Box\n            sx={{\n              color: '#1976d2',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n            }}\n            onClick={() => {\n              navigate('/quotes');\n            }}\n          >\n            <ArrowBackIosNew\n              fontSize=\"small\"\n              sx={{\n                fontSize: '12px',\n                marginRight: '0.5rem',\n                color: primaryColor,\n              }}\n            />\n            <p\n              style={{\n                color: primaryColor,\n                margin: '0',\n              }}\n            >\n              {b3Lang('quoteDetail.header.backToQuoteLists')}\n            </p>\n          </Box>\n        </Box>\n      )}\n\n      <Grid\n        container\n        spacing={2}\n        sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          flexDirection: isMobile ? 'column' : 'row',\n          mb: isMobile ? '16px' : '',\n        }}\n      >\n        <Grid\n          item\n          {...gridOptions(8)}\n          sx={{\n            color: customColor,\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: isMobile ? 'start' : 'center',\n              flexDirection: isMobile ? 'column' : 'row',\n            }}\n          >\n            <Typography\n              sx={{\n                marginRight: '10px',\n                fontSize: '34px',\n                color: b3HexToRgb(customColor, 0.87),\n              }}\n            >\n              {b3Lang('quoteDetail.header.quoteNumber', {\n                quoteNumber: quoteNumber || '',\n              })}\n            </Typography>\n\n            <QuoteStatus code={status} />\n          </Box>\n          {(salesRepInfo?.salesRepName || salesRepInfo?.salesRepEmail) && (\n            <StyledCreateName>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{\n                  marginRight: '0.5rem',\n                  fontSize: '16px',\n                }}\n              >\n                {b3Lang('quoteDetail.header.salesRep')}\n              </Typography>\n              <span>\n                {salesRepInfo?.salesRepEmail !== ''\n                  ? `${salesRepInfo?.salesRepName}(${salesRepInfo?.salesRepEmail})`\n                  : salesRepInfo?.salesRepName}\n              </span>\n            </StyledCreateName>\n          )}\n          <Box>\n            <StyledCreateName>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{\n                  marginRight: '0.5rem',\n                  fontSize: '16px',\n                }}\n              >\n                {b3Lang('quoteDetail.header.issuedOn')}\n              </Typography>\n              <span>{`${issuedAt ? displayFormat(Number(issuedAt)) : ''}`}</span>\n            </StyledCreateName>\n            <StyledCreateName>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{\n                  marginRight: '0.5rem',\n                  fontSize: '16px',\n                }}\n              >\n                {b3Lang('quoteDetail.header.expirationDate')}\n              </Typography>\n              <span>{`${expirationDate ? displayFormat(Number(expirationDate)) : ''}`}</span>\n            </StyledCreateName>\n          </Box>\n        </Grid>\n        {Number(role) !== 100 && (\n          <Grid\n            item\n            sx={{\n              textAlign: isMobile ? 'none' : 'end',\n              displayPrint: 'none',\n            }}\n            {...gridOptions(4)}\n          >\n            <Box>\n              <CustomButton\n                variant=\"outlined\"\n                sx={{\n                  marginRight: '1rem',\n                  displayPrint: 'none',\n                }}\n                onClick={printQuote}\n              >\n                {b3Lang('quoteDetail.header.print')}\n              </CustomButton>\n              <CustomButton variant=\"outlined\" onClick={exportPdf}>\n                {b3Lang('quoteDetail.header.downloadPDF')}\n              </CustomButton>\n            </Box>\n          </Grid>\n        )}\n      </Grid>\n    </>\n  );\n}\n\nexport default QuoteDetailHeader;\n","import { Box, Card, CardContent, Grid, Typography } from '@mui/material';\n\nimport { useB3Lang } from '@/lib/lang';\nimport { useAppSelector } from '@/store';\nimport { currencyFormatConvert } from '@/utils';\n\ninterface Summary {\n  originalSubtotal: string | number;\n  discount: string | number;\n  tax: string | number;\n  shipping: string | number;\n  totalAmount: string | number;\n}\n\ninterface QuoteDetailSummaryProps {\n  quoteSummary: Summary;\n  quoteDetailTax: number;\n  status: string;\n  quoteDetail: CustomFieldItems;\n  isHideQuoteCheckout: boolean;\n}\n\nexport default function QuoteDetailSummary({\n  quoteSummary: { originalSubtotal, discount, tax, shipping, totalAmount },\n  quoteDetailTax = 0,\n  status,\n  quoteDetail,\n  isHideQuoteCheckout,\n}: QuoteDetailSummaryProps) {\n  const b3Lang = useB3Lang();\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n  const showInclusiveTaxPrice = useAppSelector(({ global }) => global.showInclusiveTaxPrice);\n\n  const getCurrentPrice = (price: number, quoteDetailTax: number) => {\n    if (enteredInclusiveTax) {\n      return showInclusiveTaxPrice ? price : price - quoteDetailTax;\n    }\n    return showInclusiveTaxPrice ? price + quoteDetailTax : price;\n  };\n\n  const priceFormat = (price: number) =>\n    currencyFormatConvert(price, {\n      currency: quoteDetail.currency,\n      isConversionRate: false,\n      useCurrentCurrency: !!quoteDetail.currency,\n    });\n\n  const getShippingAndTax = () => {\n    if (quoteDetail?.shippingMethod?.id) {\n      return {\n        shippingText: `${b3Lang('quoteDetail.summary.shipping')}(${\n          quoteDetail?.shippingMethod?.description || ''\n        })`,\n        shippingVal: priceFormat(Number(shipping)),\n        taxText: b3Lang('quoteDetail.summary.tax'),\n        taxVal: priceFormat(Number(tax)),\n      };\n    }\n\n    if (!quoteDetail?.salesRepEmail && !quoteDetail?.shippingMethod?.id && Number(status) === 1) {\n      return {\n        shippingText: b3Lang('quoteDetail.summary.shipping'),\n        shippingVal: b3Lang('quoteDetail.summary.tbd'),\n        taxText: b3Lang('quoteDetail.summary.estimatedTax'),\n        taxVal: priceFormat(Number(tax)),\n      };\n    }\n\n    if (\n      quoteDetail?.salesRepEmail &&\n      !quoteDetail?.shippingMethod?.id &&\n      (Number(status) === 1 || Number(status) === 5)\n    ) {\n      return {\n        shippingText: `${b3Lang('quoteDetail.summary.shipping')}(${b3Lang(\n          'quoteDetail.summary.quoteCheckout',\n        )})`,\n        shippingVal: b3Lang('quoteDetail.summary.tbd'),\n        taxText: b3Lang('quoteDetail.summary.tax'),\n        taxVal: b3Lang('quoteDetail.summary.tbd'),\n      };\n    }\n\n    return null;\n  };\n\n  const shippingAndTax = getShippingAndTax();\n\n  const showPrice = (price: string | number): string | number => {\n    if (isHideQuoteCheckout) return b3Lang('quoteDraft.quoteSummary.tbd');\n\n    return price;\n  };\n\n  const subtotalPrice = Number(originalSubtotal);\n  const quotedSubtotal = Number(originalSubtotal) - Number(discount);\n  return (\n    <Card>\n      <CardContent>\n        <Box>\n          <Typography variant=\"h5\">{b3Lang('quoteDetail.summary.quoteSummary')}</Typography>\n          <Box\n            sx={{\n              marginTop: '20px',\n              color: '#212121',\n            }}\n          >\n            {quoteDetail?.displayDiscount && (\n              <Grid\n                container\n                justifyContent=\"space-between\"\n                sx={{\n                  margin: '4px 0',\n                }}\n              >\n                <Typography>{b3Lang('quoteDetail.summary.originalSubtotal')}</Typography>\n                <Typography>\n                  {showPrice(priceFormat(getCurrentPrice(subtotalPrice, quoteDetailTax)))}\n                </Typography>\n              </Grid>\n            )}\n\n            {!quoteDetail?.salesRepEmail && Number(status) === 1 ? null : (\n              <Grid\n                container\n                justifyContent=\"space-between\"\n                sx={{\n                  margin: '4px 0',\n                  display: quoteDetail?.displayDiscount ? '' : 'none',\n                }}\n              >\n                <Typography>{b3Lang('quoteDetail.summary.discountAmount')}</Typography>\n                <Typography>\n                  {Number(discount) > 0\n                    ? `-${priceFormat(Number(discount))}`\n                    : priceFormat(Number(discount))}\n                </Typography>\n              </Grid>\n            )}\n\n            <Grid\n              container\n              justifyContent=\"space-between\"\n              sx={{\n                margin: '4px 0',\n              }}\n            >\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {b3Lang('quoteDetail.summary.quotedSubtotal')}\n              </Typography>\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {showPrice(priceFormat(getCurrentPrice(quotedSubtotal, quoteDetailTax)))}\n              </Typography>\n            </Grid>\n\n            {shippingAndTax && (\n              <>\n                <Grid\n                  container\n                  justifyContent=\"space-between\"\n                  sx={{\n                    margin: '4px 0',\n                  }}\n                >\n                  <Typography\n                    sx={{\n                      maxWidth: '70%',\n                      wordBreak: 'break-word',\n                    }}\n                  >\n                    {shippingAndTax.shippingText}\n                  </Typography>\n                  <Typography>{showPrice(shippingAndTax.shippingVal)}</Typography>\n                </Grid>\n                <Grid\n                  container\n                  justifyContent=\"space-between\"\n                  sx={{\n                    margin: '4px 0',\n                  }}\n                >\n                  <Typography>{shippingAndTax.taxText}</Typography>\n                  <Typography>{showPrice(shippingAndTax.taxVal)}</Typography>\n                </Grid>\n              </>\n            )}\n\n            <Grid\n              container\n              justifyContent=\"space-between\"\n              sx={{\n                margin: '24px 0 0',\n              }}\n            >\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {b3Lang('quoteDetail.summary.grandTotal')}\n              </Typography>\n              <Typography\n                sx={{\n                  fontWeight: 'bold',\n                  color: '#212121',\n                }}\n              >\n                {showPrice(priceFormat(Number(totalAmount)))}\n              </Typography>\n            </Grid>\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n","import { Box, CardContent, styled, Typography } from '@mui/material';\n\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useB3Lang } from '@/lib/lang';\nimport { useAppSelector } from '@/store';\nimport { currencyFormatConvert } from '@/utils';\nimport { getBCPrice } from '@/utils/b3Product/b3Product';\n\ninterface QuoteTableCardProps {\n  item: any;\n  len: number;\n  getTaxRate: (taxClassId: number, variants: any) => number;\n  itemIndex?: number;\n  showPrice: (price: string, row: CustomFieldItems) => string | number;\n  displayDiscount: boolean;\n  currency: CurrencyProps;\n}\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nfunction QuoteDetailTableCard(props: QuoteTableCardProps) {\n  const {\n    item: quoteTableItem,\n    len,\n    itemIndex,\n    getTaxRate,\n    showPrice,\n    currency,\n    displayDiscount,\n  } = props;\n  const b3Lang = useB3Lang();\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n\n  const {\n    basePrice,\n    quantity,\n    imageUrl,\n    productName,\n    options,\n    sku,\n    notes,\n    offeredPrice,\n    productsSearch: { productUrl, variants = [], taxClassId },\n  } = quoteTableItem;\n\n  const taxRate = getTaxRate(taxClassId, variants);\n  const taxPrice = enteredInclusiveTax\n    ? (Number(basePrice) * taxRate) / (1 + taxRate)\n    : Number(basePrice) * taxRate;\n  const discountTaxPrice = enteredInclusiveTax\n    ? (Number(offeredPrice) * taxRate) / (1 + taxRate)\n    : Number(offeredPrice) * taxRate;\n\n  const price = getBCPrice(Number(basePrice), taxPrice);\n  const discountPrice = getBCPrice(Number(offeredPrice), discountTaxPrice);\n\n  const isDiscount = Number(basePrice) - Number(offeredPrice) > 0 && displayDiscount;\n\n  const total = Number(price) * Number(quantity);\n  const totalWithDiscount = discountPrice * Number(quantity);\n\n  return (\n    <Box\n      key={quoteTableItem.id}\n      width=\"100%\"\n      sx={{\n        borderTop: '1px solid #D9DCE9',\n        borderBottom: itemIndex === len - 1 ? '1px solid #D9DCE9' : '',\n      }}\n    >\n      <CardContent\n        sx={{\n          color: '#313440',\n          display: 'flex',\n          pl: 0,\n        }}\n      >\n        <Box>\n          <StyledImage src={imageUrl || PRODUCT_DEFAULT_IMAGE} alt=\"Product-img\" loading=\"lazy\" />\n        </Box>\n        <Box\n          sx={{\n            flex: 1,\n          }}\n        >\n          <Typography\n            variant=\"body1\"\n            color=\"#212121\"\n            onClick={() => {\n              const {\n                location: { origin },\n              } = window;\n\n              if (productUrl) {\n                window.location.href = `${origin}${productUrl}`;\n              }\n            }}\n            sx={{\n              cursor: 'pointer',\n            }}\n          >\n            {productName}\n          </Typography>\n          <Typography variant=\"body1\" color=\"#616161\">\n            {sku}\n          </Typography>\n          <Box\n            sx={{\n              margin: '1rem 0',\n            }}\n          >\n            {options.length > 0 && (\n              <Box>\n                {options.map((option: any) => (\n                  <Typography\n                    sx={{\n                      fontSize: '0.75rem',\n                      lineHeight: '1.5',\n                      color: '#455A64',\n                    }}\n                    key={option.optionName}\n                  >\n                    {`${option.optionName}: ${option.optionLabel}`}\n                  </Typography>\n                ))}\n              </Box>\n            )}\n          </Box>\n          <Typography variant=\"body1\" color=\"#616161\">\n            {notes}\n          </Typography>\n\n          <Typography\n            sx={{\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('quoteDetail.tableCard.price')}\n            {isDiscount && (\n              <span\n                style={{\n                  marginLeft: '5px',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {`${showPrice(\n                  currencyFormatConvert(price, {\n                    currency,\n                  }),\n                  quoteTableItem,\n                )}`}\n              </span>\n            )}\n            <span\n              style={{\n                marginLeft: '5px',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {`${showPrice(\n                currencyFormatConvert(offeredPrice, {\n                  currency,\n                }),\n                quoteTableItem,\n              )}`}\n            </span>\n          </Typography>\n\n          <Typography\n            sx={{\n              padding: '12px 0',\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('quoteDetail.tableCard.qty', { quantity })}\n          </Typography>\n\n          <Typography\n            sx={{\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('quoteDetail.tableCard.total')}\n            {isDiscount && (\n              <span\n                style={{\n                  marginLeft: '5px',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {`${showPrice(\n                  currencyFormatConvert(total, {\n                    currency,\n                  }),\n                  quoteTableItem,\n                )}`}\n              </span>\n            )}\n            <span\n              style={{\n                marginLeft: '5px',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {`${showPrice(\n                currencyFormatConvert(totalWithDiscount, {\n                  currency,\n                }),\n                quoteTableItem,\n              )}`}\n            </span>\n          </Typography>\n        </Box>\n      </CardContent>\n    </Box>\n  );\n}\n\nexport default QuoteDetailTableCard;\n","import { forwardRef, Ref, useImperativeHandle, useRef, useState } from 'react';\nimport { Box, styled, Typography } from '@mui/material';\n\nimport { B3PaginationTable, GetRequestList } from '@/components/table/B3PaginationTable';\nimport { TableColumnItem } from '@/components/table/B3Table';\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useB3Lang } from '@/lib/lang';\nimport { useAppSelector } from '@/store';\nimport { currencyFormatConvert } from '@/utils';\nimport { getBCPrice, getDisplayPrice } from '@/utils/b3Product/b3Product';\n\nimport QuoteDetailTableCard from './QuoteDetailTableCard';\n\ninterface ProductInfoProps {\n  basePrice: number | string;\n  baseSku: string;\n  createdAt: number;\n  discount: number | string;\n  enteredInclusive: boolean;\n  id: number | string;\n  itemId: number;\n  optionList: string;\n  primaryImage: string;\n  productId: number;\n  productName: string;\n  productUrl: string;\n  quantity: number | string;\n  tax: number | string;\n  updatedAt: number;\n  variantId: number;\n  variantSku: string;\n  productsSearch: CustomFieldItems;\n  offeredPrice: number | string;\n}\n\ninterface ListItemProps {\n  node: ProductInfoProps;\n}\n\ninterface ShoppingDetailTableProps {\n  total: number;\n  getQuoteTableDetails: GetRequestList<SearchProps, ProductInfoProps>;\n  isHandleApprove: boolean;\n  getTaxRate: (taxClassId: number, variants: any) => number;\n  displayDiscount: boolean;\n  currency: CurrencyProps;\n}\n\ninterface SearchProps {\n  first?: number;\n  offset?: number;\n}\n\ninterface OptionProps {\n  optionId: number;\n  optionLabel: string;\n  optionName: string;\n  optionValue: string | number;\n}\n\ninterface PaginationTableRefProps extends HTMLInputElement {\n  getList: () => void;\n  setList: (items?: ListItemProps[]) => void;\n  getSelectedValue: () => void;\n}\n\nconst StyledQuoteTableContainer = styled('div')(() => ({\n  backgroundColor: '#FFFFFF',\n  padding: '1rem',\n  width: '100%',\n  border: '1px solid #E0E0E0',\n  boxShadow:\n    '0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)',\n  borderRadius: '4px',\n\n  '& tbody': {\n    '& tr': {\n      '& td': {\n        verticalAlign: 'top',\n      },\n      '& td: first-of-type': {\n        verticalAlign: 'inherit',\n      },\n    },\n    '& tr: hover': {\n      '& #shoppingList-actionList': {\n        opacity: 1,\n      },\n    },\n  },\n}));\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nfunction QuoteDetailTable(props: ShoppingDetailTableProps, ref: Ref<unknown>) {\n  const b3Lang = useB3Lang();\n  const { total, getQuoteTableDetails, getTaxRate, isHandleApprove, displayDiscount, currency } =\n    props;\n\n  const isEnableProduct = useAppSelector(\n    ({ global }) => global.blockPendingQuoteNonPurchasableOOS.isEnableProduct,\n  );\n  const enteredInclusiveTax = useAppSelector(\n    ({ storeConfigs }) => storeConfigs.currencies.enteredInclusiveTax,\n  );\n\n  const paginationTableRef = useRef<PaginationTableRefProps | null>(null);\n\n  const [search, setSearch] = useState<SearchProps>({\n    first: 12,\n    offset: 0,\n  });\n\n  useImperativeHandle(ref, () => ({\n    getList: () => paginationTableRef.current?.getList(),\n    refreshList: () => {\n      setSearch({\n        offset: 0,\n      });\n    },\n  }));\n\n  const showPrice = (price: string, row: CustomFieldItems): string | number => {\n    if (isEnableProduct) {\n      if (isHandleApprove) return price;\n      return getDisplayPrice({\n        price,\n        productInfo: row,\n        showText: b3Lang('quoteDraft.quoteSummary.tbd'),\n      });\n    }\n    return price;\n  };\n  const columnItems: TableColumnItem<ProductInfoProps>[] = [\n    {\n      key: 'Product',\n      title: b3Lang('quoteDetail.table.product'),\n      render: (row: CustomFieldItems) => {\n        const optionsValue = row.options;\n        const productUrl = row.productsSearch?.productUrl;\n\n        return (\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'flex-start',\n            }}\n          >\n            <StyledImage\n              src={row.imageUrl || PRODUCT_DEFAULT_IMAGE}\n              alt=\"Product-img\"\n              loading=\"lazy\"\n            />\n            <Box>\n              <Typography\n                variant=\"body1\"\n                color=\"#212121\"\n                onClick={() => {\n                  const {\n                    location: { origin },\n                  } = window;\n                  if (productUrl) {\n                    window.location.href = `${origin}${productUrl}`;\n                  }\n                }}\n                sx={{\n                  cursor: 'pointer',\n                }}\n              >\n                {row.productName}\n              </Typography>\n              <Typography variant=\"body1\" color=\"#616161\">\n                {row.sku}\n              </Typography>\n              {optionsValue.length > 0 && (\n                <Box>\n                  {optionsValue.map(\n                    (option: OptionProps) =>\n                      option.optionLabel && (\n                        <Typography\n                          sx={{\n                            fontSize: '0.75rem',\n                            lineHeight: '1.5',\n                            color: '#455A64',\n                          }}\n                          key={`${option.optionId}_${option.optionName}_${option.optionLabel}`}\n                        >\n                          {option.optionName}: {option.optionLabel}\n                        </Typography>\n                      ),\n                  )}\n                </Box>\n              )}\n              {row.notes && (\n                <Typography\n                  variant=\"body1\"\n                  color=\"#ED6C02\"\n                  sx={{\n                    fontSize: '0.9rem',\n                    whiteSpace: 'pre-wrap',\n                    wordBreak: 'break-word',\n                  }}\n                >\n                  <span>Notes: </span>\n                  {row.notes}\n                </Typography>\n              )}\n            </Box>\n          </Box>\n        );\n      },\n      width: '40%',\n    },\n    {\n      key: 'Price',\n      title: b3Lang('quoteDetail.table.price'),\n      render: (row: CustomFieldItems) => {\n        const {\n          basePrice,\n          offeredPrice,\n          productsSearch: { variants = [], taxClassId },\n        } = row;\n\n        const taxRate = getTaxRate(taxClassId, variants);\n        const taxPrice = enteredInclusiveTax\n          ? (Number(basePrice) * taxRate) / (1 + taxRate)\n          : Number(basePrice) * taxRate;\n        const discountTaxPrice = enteredInclusiveTax\n          ? (Number(offeredPrice) * taxRate) / (1 + taxRate)\n          : Number(offeredPrice) * taxRate;\n\n        const price = getBCPrice(Number(basePrice), taxPrice);\n        const discountPrice = getBCPrice(Number(offeredPrice), discountTaxPrice);\n\n        const isDiscount = Number(basePrice) - Number(offeredPrice) > 0 && displayDiscount;\n        return (\n          <>\n            {isDiscount && (\n              <Typography\n                sx={{\n                  padding: '12px 0 0 0',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {showPrice(\n                  currencyFormatConvert(price, {\n                    currency,\n                    isConversionRate: false,\n                    useCurrentCurrency: !!currency,\n                  }),\n                  row,\n                )}\n              </Typography>\n            )}\n\n            <Typography\n              sx={{\n                padding: isDiscount ? '0' : '12px 0 0 0',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {showPrice(\n                currencyFormatConvert(discountPrice, {\n                  currency,\n                  isConversionRate: false,\n                  useCurrentCurrency: !!currency,\n                }),\n                row,\n              )}\n            </Typography>\n          </>\n        );\n      },\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n    {\n      key: 'Qty',\n      title: b3Lang('quoteDetail.table.qty'),\n      render: (row) => (\n        <Typography\n          sx={{\n            padding: '12px 0',\n          }}\n        >\n          {row.quantity}\n        </Typography>\n      ),\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n    {\n      key: 'Total',\n      title: b3Lang('quoteDetail.table.total'),\n      render: (row: CustomFieldItems) => {\n        const {\n          basePrice,\n          quantity,\n          offeredPrice,\n          productsSearch: { variants = [], taxClassId },\n        } = row;\n\n        const taxRate = getTaxRate(taxClassId, variants);\n        const taxPrice = enteredInclusiveTax\n          ? (Number(basePrice) * taxRate) / (1 + taxRate)\n          : Number(basePrice) * taxRate;\n        const discountTaxPrice = enteredInclusiveTax\n          ? (Number(offeredPrice) * taxRate) / (1 + taxRate)\n          : Number(offeredPrice) * taxRate;\n\n        const price = getBCPrice(Number(basePrice), taxPrice);\n        const discountPrice = getBCPrice(Number(offeredPrice), discountTaxPrice);\n        const isDiscount = Number(basePrice) - Number(offeredPrice) > 0 && displayDiscount;\n\n        const total = price * Number(quantity);\n        const totalWithDiscount = discountPrice * Number(quantity);\n\n        return (\n          <Box>\n            {isDiscount && (\n              <Typography\n                sx={{\n                  padding: '12px 0 0 0',\n                  textDecoration: 'line-through',\n                }}\n              >\n                {showPrice(\n                  currencyFormatConvert(total, {\n                    currency,\n                    isConversionRate: false,\n                    useCurrentCurrency: !!currency,\n                  }),\n                  row,\n                )}\n              </Typography>\n            )}\n            <Typography\n              sx={{\n                padding: isDiscount ? '0' : '12px 0 0 0',\n                color: isDiscount ? '#2E7D32' : '#212121',\n              }}\n            >\n              {showPrice(\n                currencyFormatConvert(totalWithDiscount, {\n                  currency,\n                  isConversionRate: false,\n                  useCurrentCurrency: !!currency,\n                }),\n                row,\n              )}\n            </Typography>\n          </Box>\n        );\n      },\n      width: '20%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n  ];\n\n  return (\n    <StyledQuoteTableContainer>\n      <Box\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          margin: '0.5rem 0 1rem 0',\n        }}\n      >\n        <Typography\n          sx={{\n            fontSize: '24px',\n          }}\n        >\n          {b3Lang('quoteDetail.table.totalProducts', { total: total || 0 })}\n        </Typography>\n      </Box>\n      <B3PaginationTable\n        ref={paginationTableRef}\n        columnItems={columnItems}\n        rowsPerPageOptions={[12, 24, 36]}\n        getRequestList={getQuoteTableDetails}\n        isCustomRender={false}\n        hover\n        searchParams={search}\n        labelRowsPerPage={b3Lang('quoteDetail.table.perPage')}\n        showBorder={false}\n        itemIsMobileSpacing={0}\n        noDataText={b3Lang('quoteDetail.table.noProducts')}\n        tableKey=\"productId\"\n        renderItem={(row, index) => (\n          <QuoteDetailTableCard\n            len={total || 0}\n            item={row}\n            showPrice={showPrice}\n            itemIndex={index}\n            currency={currency}\n            displayDiscount={displayDiscount}\n            getTaxRate={getTaxRate}\n          />\n        )}\n      />\n    </StyledQuoteTableContainer>\n  );\n}\n\nexport default forwardRef(QuoteDetailTable);\n","import { useState } from 'react';\nimport { Box, Card, CardContent, Typography } from '@mui/material';\n\nimport { B3CollapseContainer } from '@/components';\nimport { useB3Lang } from '@/lib/lang';\n\ninterface QuoteTermsAndConditionsProps {\n  quoteLegalTerms: string;\n}\n\nexport default function QuoteTermsAndConditions(props: QuoteTermsAndConditionsProps) {\n  const { quoteLegalTerms = '' } = props;\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  const b3Lang = useB3Lang();\n\n  const handleOnChange = (open: boolean) => {\n    setIsOpen(open);\n  };\n\n  return (\n    <Card\n      sx={{\n        '.MuiCardContent-root': {\n          maxHeight: isOpen ? '637px' : 'auto',\n        },\n      }}\n    >\n      <CardContent\n        sx={{\n          p: '16px !important',\n        }}\n      >\n        <B3CollapseContainer\n          title={b3Lang('quoteDetail.termsAndConditions')}\n          handleOnChange={handleOnChange}\n        >\n          <Box>\n            <Typography\n              variant=\"body1\"\n              sx={{\n                padding: '16px 0',\n                maxHeight: '545px',\n                whiteSpace: 'pre-wrap',\n                overflow: 'auto',\n              }}\n            >\n              {quoteLegalTerms}\n            </Typography>\n          </Box>\n        </B3CollapseContainer>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":["navigate","useNavigate","id","bcLanguage","quoteConfig","role","emailAddress","isB2BUser","selectCompanyHierarchyId","isAgenting","taxZoneRates","enteredInclusiveTax","isEnableProduct","purchasabilityPermission","handleGetProductsById","getQuote","useParams","state","useContext","GlobalContext","companyId","useAppSelector","company","companyInfo","customer","customerGroupId","isB2BUserSelector","companyHierarchyInfo","b2bFeatures","masqueradeCompany","currency_code","currencyCode","activeCurrencyInfoSelector","global","storeConfigs","currencies","blockPendingQuoteNonPurchasableOOS","rolePermissionSelector","async","listProducts","length","productIds","forEach","item","includes","productId","push","options","productsSearch","searchProducts","newProductsSearch","conversionProductsList","listProduct","productInfo","find","search","Number","location","useLocation","date","getSearchVal","data","toString","quote","getBcQuoteDetail","getB2BQuoteDetail","useData","isMobile","useMobile","b3Lang","useB3Lang","quoteDetail","setQuoteDetail","useState","productList","setProductList","fileList","setFileList","isHandleApprove","setHandleApprove","isHideQuoteCheckout","setIsHideQuoteCheckout","quoteSummary","setQuoteSummary","originalSubtotal","discount","tax","shipping","totalAmount","isRequestLoading","setIsRequestLoading","isShowFooter","setIsShowFooter","quoteDetailTax","setQuoteDetailTax","noBuyerProductName","setNoBuyerProductName","oos","nonPurchasable","quotePurchasabilityPermissionInfo","setQuotePurchasabilityPermission","quotePurchasabilityPermission","quoteConvertToOrderPermission","quoteCheckoutLoading","setQuoteCheckoutLoading","useEffect","quoteCheckoutPermissionCode","b2bPermissionsMap","verifyLevelPermission","code","userEmail","contactInfo","email","oosErrorList","nonPurchasableErrorList","buyerInfo","getVariantInfoOOSAndPurchase","type","purchaseHandled","productName","isHideCheckout","snackbar","error","ProductName","proceedingCheckoutFn","useCallback","classRates","defaultTaxZone","taxZone","rates","enabled","rate","getTaxRate","taxClassId","variants","taxExclusive","get","taxInclusive","getQuoteDetail","productsWithMoreInfo","productsList","catch","quoteExtraFieldInfos","extraFieldsInfo","getB2BQuoteExtraFields","quoteCurrentExtraFields","extraField","currentExtraField","currentExtraFields","field","fieldName","name","fieldValue","default","getQuoteExtraFields","extraFields","subtotal","taxTotal","shippingTotal","taxPrice","product","quantity","offeredPrice","taxRate","backendAttachFiles","storefrontAttachFiles","salesRep","salesRepEmail","newFileList","file","fileName","fileType","fileUrl","hasDelete","status","title","createdBy","err","fetchPdfUrl","createdAt","quoteId","isPreview","bool","lang","quotePdf","exportQuotePdf","url","quoteFrontendPdf","content","setTimeout","success","action","label","onClick","copy","window","href","handleQuoteCheckout","quoteGotoCheckout","isAutoEnableQuoteCheckout","useMemo","key","value","quoteAndExtraFieldsInfo","map","info","quoteTitle","referenceNumber","recipients","useScrollBar","jsx","B3Spin","isSpinning","children","jsxs","Box","sx","display","flexDirection","flex","QuoteDetailHeader","quoteNumber","issuedAt","expirationDate","expiredAt","exportPdf","quotePdfUrl","open","printQuote","iframe","document","createElement","setAttribute","getElementById","appendChild","contentDocument","write","close","contentWindow","print","salesRepInfo","marginTop","QuoteInfo","shippingAddress","billingAddress","Grid","container","spacing","rowSpacing","overflow","flexWrap","paddingBottom","marginBottom","xs","flexBasis","pl","mr","QuoteDetailTable","total","currency","getQuoteTableDetails","allProductsList","startIndex","params","offset","endIndex","first","edges","slice","totalCount","displayDiscount","QuoteDetailSummary","notes","displayPrint","QuoteNote","quoteNotes","Message","msgs","trackingHistory","QuoteAttachment","allowUpload","defaultFileList","legalTerms","QuoteTermsAndConditions","quoteLegalTerms","allowCheckout","QuoteDetailFooter","deselectCurrent","toggleSelection","selection","getSelection","rangeCount","active","activeElement","ranges","i","getRangeAt","tagName","toUpperCase","blur","removeAllRanges","range","addRange","focus","clipboardToIE11Formatting","copyToClipboard","text","debug","message","reselectPrevious","mark","createRange","textContent","ariaHidden","style","all","position","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","addEventListener","e","stopPropagation","format","preventDefault","clipboardData","console","warn","clearData","setData","onCopy","body","selectNodeContents","execCommand","Error","copyKey","test","navigator","userAgent","replace","prompt","removeRange","removeChild","ChatMessage","msg","isEndMessage","isCustomer","alignItems","paddingTop","height","fontWeight","lineHeight","fontSize","letterSpacing","color","padding","background","borderRadius","m","Tooltip","sendTime","placement","arrow","wordBreak","formatDistanceStrict","Date","addSuffix","DateMessage","textAlign","mb","displayExtendedFormat","dispatch","globalDispatch","primaryColor","useTheme","palette","primary","main","messagesEndRef","useRef","changeReadRef","messages","setMessages","read","setRead","setMessage","loading","setLoading","quotesUpdateMessageActionsPermission","quotesUpdateMessagePermission","convertedMsgs","nextMsg","getNewMsgs","readNum","index","justifyContent","width","ml","current","scrollTop","scrollHeight","updateMsgs","quoteUpdate","updateQuote","quoteData","lastMessage","parseInt","getTime","storeHash","handleOnChange","payload","quoteDetailHasNewMessages","Card","CardContent","p","B3CollapseContainer","opacity","ref","mt","maxHeight","overflowY","spinningHeight","size","isCloseLoading","tip","TextField","onKeyDown","target","onChange","event","variant","margin","ArrowUpwardIcon","store","setQuoteDetailToCheckoutUrl","storefrontProductSettings","hidePriceFromGuests","getBCStorefrontProductSettings","pathname","res","quoteCheckout","setQuoteToStorage","checkoutUrl","cartId","platform","attemptCheckoutLoginAndRedirect","b2bLogger","props","containerStyle","bottom","left","backgroundColor","zIndex","CustomButton","StyledCreateName","styled","portalStyle","CustomStyleContext","customColor","getContrastColor","gridOptions","Fragment","cursor","ArrowBackIosNew","marginRight","Typography","b3HexToRgb","QuoteStatus","salesRepName","displayFormat","showInclusiveTaxPrice","getCurrentPrice","price","priceFormat","currencyFormatConvert","isConversionRate","useCurrentCurrency","shippingAndTax","shippingMethod","shippingText","description","shippingVal","taxText","taxVal","showPrice","subtotalPrice","quotedSubtotal","maxWidth","StyledImage","QuoteDetailTableCard","quoteTableItem","len","itemIndex","basePrice","imageUrl","sku","productUrl","discountTaxPrice","getBCPrice","discountPrice","isDiscount","totalWithDiscount","borderTop","borderBottom","src","PRODUCT_DEFAULT_IMAGE","alt","origin","option","optionName","optionLabel","marginLeft","textDecoration","StyledQuoteTableContainer","border","boxShadow","verticalAlign","QuoteDetailTable$1","forwardRef","paginationTableRef","setSearch","useImperativeHandle","getList","refreshList","row","getDisplayPrice","showText","columnItems","render","optionsValue","optionId","B3PaginationTable","rowsPerPageOptions","getRequestList","isCustomRender","hover","searchParams","labelRowsPerPage","showBorder","itemIsMobileSpacing","noDataText","tableKey","renderItem","isOpen","setIsOpen"],"mappings":"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","x_google_ignoreList":[1,2]}