System.register(["./mui-legacy-Co1sKVsS.js","./intl-legacy-f5dGU49Z.js","./react-setup-legacy-CKF-9cua.js"],function(n,e){"use strict";var t,a,r,i,s;return{setters:[n=>{t=n.j},n=>{a=n.r},n=>{r=n.u,i=n.b_,s=n.B}],execute:function(){n("C",function({theme:n,size:s,handleGetKey:d,siteKey:l}){const u=r(i),p=c(),w=a.useRef(!1);return a.useEffect(()=>{const n=n=>{if(n?.data?.startsWith?.(p)){const e=n.data.slice(p.length),{payload:t,type:a}=JSON.parse(e);"CAPTCHA_SUCCESS"===a&&t&&d(t)}};return window.addEventListener("message",n,!1),()=>{w.current&&window.removeEventListener("message",n)}},[p,d]),a.useEffect(()=>{void 0===u||w.current||(function(n){if(null===n?.head.querySelector(`script[src="${o}"]`)){const e=n.createElement("script");e.src=o,n.head.appendChild(e)}}(u),function(n,t){if(!n)return;const a=n.createElement("script"),r=e.replace(/PREFIX/g,t).replace(/PARENT_ORIGIN/g,window.location.origin);a.textContent=r,n.head.appendChild(a)}(u,p),w.current=!0)},[u,p]),t.jsx("div",{id:p,"data-sitekey":l,"data-theme":n,"data-size":s})});const e="/* eslint-disable */\n\nwindow.INITIALIZE_CAPTCHA_PREFIX = function () {\n  if (window.grecaptcha?.render === undefined) {\n    return\n  }\n\n  if (window.WIDGET_TIMER_PREFIX !== null) {\n    window.clearInterval(window.WIDGET_TIMER_PREFIX)\n    window.WIDGET_TIMER_PREFIX = null\n  }\n\n  var sendMessage = function (eventType, payload) {\n    window.parent.postMessage(\n      'PREFIX' +\n        JSON.stringify({\n          type: eventType,\n          payload: payload,\n        }),\n      'PARENT_ORIGIN'\n    )\n  }\n\n  window.grecaptcha.render(\n    'PREFIX',\n    {\n      callback: function (token) {\n        sendMessage('CAPTCHA_SUCCESS', token)\n      },\n      'error-callback': function () {\n        sendMessage('CAPTCHA_ERROR', null)\n      },\n      'expired-callback': function () {\n        sendMessage('CAPTCHA_EXPIRED', null)\n      },\n    },\n    true\n  )\n}\n\nwindow.WIDGET_TIMER_PREFIX = window.setInterval(\n  window.INITIALIZE_CAPTCHA_PREFIX,\n  250\n)\n",o="https://www.google.com/recaptcha/api.js?render=explicit",c=()=>a.useMemo(()=>`widget_${Date.now()}`,[]);n("r",(n,e)=>s.graphqlBCProxy({query:"mutation recaptcha($token: String!, $email: String!) {\n    customer {\n      requestResetPassword(\n        reCaptchaV2: { \n            token: $token\n        },\n        input: {\n          email: $email,\n        }\n      ) {\n        errors {\n          ... on ValidationError {\n            message\n          }\n        }\n      }\n    }\n  }\n",variables:{token:n,email:e}})),n("g",()=>s.graphqlBCProxy({query:"query {\n    site {\n        settings {\n            reCaptcha {\n                siteKey\n                isEnabledOnStorefront\n            }\n        }\n    }\n}"}).then(n=>n?.data?.site?.settings?.reCaptcha))}}});
//# sourceMappingURL=recaptcha-legacy-BW3fFCaW.js.map
