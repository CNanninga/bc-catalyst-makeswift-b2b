{"version":3,"file":"masquerade-AugZaLkf.js","sources":["../../src/utils/masquerade.ts"],"sourcesContent":["import {\n  getAgentInfo,\n  superAdminBeginMasquerade,\n  superAdminEndMasquerade,\n} from '@/shared/service/b2b';\nimport { AppStore, clearMasqueradeCompany, MasqueradeCompany, setMasqueradeCompany } from '@/store';\n\ninterface StartMasqueradeParams {\n  companyId: number;\n  customerId: string | number;\n}\n\nexport const startMasquerade = async (\n  { companyId, customerId }: StartMasqueradeParams,\n  store: AppStore,\n) => {\n  // change group in bc through b2b api\n  await superAdminBeginMasquerade(companyId);\n\n  // get data to be saved on global\n  const data = await getAgentInfo(customerId);\n  if (!data?.superAdminMasquerading) return;\n\n  const { id, companyName, customerGroupId = 0 } = data.superAdminMasquerading;\n\n  const masqueradeCompany: MasqueradeCompany = {\n    masqueradeCompany: {\n      id,\n      isAgenting: true,\n      companyName,\n      customerGroupId,\n    },\n  };\n\n  store.dispatch(setMasqueradeCompany(masqueradeCompany));\n};\n\nexport const endMasquerade = async (store: AppStore) => {\n  const { masqueradeCompany } = store.getState().b2bFeatures;\n  const salesRepCompanyId = masqueradeCompany.id;\n\n  // change group in bc through b2b api\n  await superAdminEndMasquerade(salesRepCompanyId);\n\n  store.dispatch(clearMasqueradeCompany());\n};\n"],"names":["startMasquerade","companyId","customerId","store","superAdminBeginMasquerade","data","getAgentInfo","id","companyName","customerGroupId","masqueradeCompany","setMasqueradeCompany","endMasquerade","salesRepCompanyId","superAdminEndMasquerade","clearMasqueradeCompany"],"mappings":"wKAYO,MAAMA,EAAkB,MAC7B,CAAE,UAAAC,EAAW,WAAAC,CAAA,EACbC,IACG,CAEH,MAAMC,EAA0BH,CAAS,EAGzC,MAAMI,EAAO,MAAMC,EAAaJ,CAAU,EAC1C,GAAI,EAACG,GAAA,MAAAA,EAAM,wBAAwB,OAEnC,KAAM,CAAE,GAAAE,EAAI,YAAAC,EAAa,gBAAAC,EAAkB,CAAA,EAAMJ,EAAK,uBAEhDK,EAAuC,CAC3C,kBAAmB,CACjB,GAAAH,EACA,WAAY,GACZ,YAAAC,EACA,gBAAAC,CAAA,CACF,EAGFN,EAAM,SAASQ,EAAqBD,CAAiB,CAAC,CACxD,EAEaE,EAAgB,MAAOT,GAAoB,CACtD,KAAM,CAAE,kBAAAO,CAAA,EAAsBP,EAAM,WAAW,YACzCU,EAAoBH,EAAkB,GAG5C,MAAMI,EAAwBD,CAAiB,EAE/CV,EAAM,SAASY,GAAwB,CACzC"}