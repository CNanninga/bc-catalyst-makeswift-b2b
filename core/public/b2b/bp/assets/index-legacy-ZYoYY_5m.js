System.register(["./mui-legacy-Co1sKVsS.js","./intl-legacy-f5dGU49Z.js","./react-setup-legacy-CKF-9cua.js","./load-functions-legacy-B3DSplhu.js","./form-legacy-LlvE08FY.js","./base-legacy-DAqmyLJs.js","./config-legacy-Cf595UXD.js","./QuoteStatus-legacy-BAlUXA_E.js","./ShoppingListDetailsContext-legacy-BtfwoB4t.js","./getQuoteExtraFields-legacy-CAC5l3Az.js","./useBlockPendingAccountViewPrice-legacy-DKuL4xOS.js","./SearchProduct-legacy-C7SSLInN.js","./muiIcon-legacy-C-h6sDde.js","./lodashEs-legacy-BTGS6uHg.js","./B3CustomForm-legacy-iy2Vgra_.js","./validatorRules-legacy-CnaQOFg7.js","./B3FilterSearch-legacy-DC2PyRhg.js","./router-legacy-CQEMCAt4.js","./reactVendor-legacy-C5drotBr.js","./eCache-legacy-QcRlogRO.js","./redux-legacy-DH94TLLa.js","./toolkit-legacy-DO7GmFjE.js","../index-legacy.JvindH6T.js","./global-legacy-vVqwfyov.js","./dropzone-legacy-B1uEXZk9.js","./dateFns-legacy-DHywh9DD.js"],function(e,t){"use strict";var a,n,i,r,o,s,l,c,d,u,p,m,f,x,h,b,g,y,j,q,S,N,v,I,C,D,T,w,k,P,A,L,E,O,z,B,F,_,R,V,U,Q,$,M,H,W,G,J,K,X,Y,Z,ee,te,ae,ne,ie,re,oe,se,le,ce,de,ue,pe,me,fe,xe,he,be,ge,ye,je,qe,Se,Ne,ve,Ie,Ce,De,Te,we,ke,Pe,Ae,Le,Ee,Oe,ze,Be,Fe,_e,Re,Ve,Ue,Qe,$e,Me,He,We,Ge,Je,Ke,Xe;return{setters:[e=>{a=e.j,n=e.A,i=e.ae,r=e.ah,o=e.B,s=e.O,l=e.T,c=e.w,d=e.G,u=e.s,p=e.b,m=e.v,f=e.x,x=e.ai},e=>{h=e.r},e=>{b=e.bz,g=e.bA,y=e.G,j=e.an,q=e.u,S=e.j,N=e.ag,v=e.bt,I=e.ak,C=e.ba,D=e.bb,T=e.bm,w=e.aN,k=e.bk,P=e.bl,A=e.ah,L=e.bB,E=e.a,O=e.bC,z=e.al,B=e.y,F=e.ad,_=e.a7,R=e.bD,V=e.bs,U=e.ay,Q=e.bE,$=e.aU,M=e.br,H=e.bh,W=e.i,G=e.bj,J=e.bx,K=e.bF,X=e.bG,Y=e.bH,Z=e.bg,ee=e.C,te=e.bI,ae=e.ao,ne=e.af,ie=e.l,re=e.bJ,oe=e.bK,se=e.aA,le=e.I,ce=e.aI,de=e.a3,ue=e.bL,pe=e.bM,me=e.p,fe=e.bN,xe=e.bn,he=e.bO,be=e.bP},null,e=>{ge=e.a,ye=e.u},e=>{je=e.b},e=>{qe=e.d,Se=e.c},e=>{Ne=e.Q,ve=e.c,Ie=e.d,Ce=e.f},e=>{De=e.v},e=>{Te=e.B,we=e.Q,ke=e.C,Pe=e.a,Ae=e.b,Le=e.g},e=>{Ee=e.u},e=>{Oe=e.S,ze=e.Q,Be=e.C},e=>{Fe=e.U,_e=e.E,Re=e.f,Ve=e.W,Ue=e.i},e=>{Qe=e.t,$e=e.f,Me=e.k,He=e.u,We=e.l},e=>{Ge=e.B},e=>{Je=e.v},e=>{Ke=e.B},e=>{Xe=e.a},null,null,null,null,null,null,null,null],execute:function(){e("default",function({setOpenPage:e}){const{state:{countriesList:t,openAPPParams:n}}=h.useContext(y),i=W(),r=G(),s=q(B),c=q(({company:e})=>e.companyInfo.id),d=q(({company:e})=>e.companyInfo.companyName),u=q(({company:e})=>e.customer),p=q(({company:e})=>e.customer.role),b=q(({storeConfigs:e})=>e.currencies.enteredInclusiveTax),g=q(({quoteInfo:e})=>e.draftQuoteList),j=q(({b2bFeatures:e})=>e.masqueradeCompany.id),v=q(({b2bFeatures:e})=>e.masqueradeCompany.companyName),C=q(({quoteInfo:e})=>e.draftQuoteInfo),D=q(Z),T=q(({global:e})=>e.quoteSubmissionResponse),{selectCompanyHierarchyId:w}=q(({company:e})=>e.companyHierarchyInfo),k=q(({global:e})=>e.blockPendingQuoteNonPurchasableOOS.isEnableProduct),{state:{portalStyle:{backgroundColor:P="#FEF9F5"}}}=h.useContext(ee),A=r["B2B-3318.move_stock_and_backorder_validation_to_backend"],L=h.useMemo(()=>!s||te(ae.quotesCreateActionsPermission,Number(w)),[s,w]),O=Xe(),z=S(),[F]=E(),[_,R]=h.useState(!1),[V,U]=h.useState(!1),[Q,$]=h.useState([]),[H,K]=h.useState(!1),[X,Y]=h.useState(!1),[ge,ye]=h.useState(!1),[Te,Ee]=h.useState(""),[Oe,ze]=h.useState(""),[Be,Fe]=h.useState([]),_e=h.useRef(null),[Re]=qe({level:se.COMPANY_SUBSIDIARIES,code:ae.getAddressesPermission,containOrEqual:"equal"});Ze();const Ve=h.useRef(null),Qe=h.useRef(null),Me=h.useRef(null);h.useEffect(()=>{(async()=>{R(!0);const e=$e(C);try{if(s){const t=c||j;let a=[];const n=async e=>{const{addresses:{edges:t}}=await ve(e);return t};w?w&&Re&&(a=await n(Number(w))):a=await n(Number(t));const i=a.find(e=>1===e?.node?.isDefaultShipping),r=a.find(e=>1===e?.node?.isDefaultBilling);if(i&&et(e,"shippingAddress")){const t={label:i?.node?.label||"",firstName:i?.node?.firstName||"",lastName:i?.node?.lastName||"",companyName:i?.node?.company||"",country:i?.node?.countryCode||"",address:i?.node?.addressLine1||"",apartment:i?.node?.addressLine2||"",city:i?.node?.city||"",state:i?.node?.state||"",zipCode:i?.node?.zipCode||"",phoneNumber:i?.node?.phoneNumber||"",addressId:i?.node?.id?Number(i.node.id):0};e.shippingAddress=t}if(r&&(!e?.billingAddress||et(e,"billingAddress"))){const t={label:r?.node?.label||"",firstName:r?.node?.firstName||"",lastName:r?.node?.lastName||"",companyName:r?.node?.company||"",country:r?.node?.countryCode||"",address:r?.node?.addressLine1||"",apartment:r?.node?.addressLine2||"",city:r?.node?.city||"",state:r?.node?.state||"",zipCode:r?.node?.zipCode||"",phoneNumber:r?.node?.phoneNumber||"",addressId:r?.node?.id?Number(r.node.id):0};e.billingAddress=t}$(a)}else if(100!==p){const{customerAddresses:{edges:e=[]}}=await Ie(),t=e.map(e=>({node:Se(e.node)}));$(t)}const t=await Le();if(t.length){Fe(t);const a=e.extraFields,n=t?.map(e=>{const t=a?.find(t=>t.fieldName===e.name)?.value||e?.default;return{id:Number(e.id),fieldName:e.name,value:t||""}});e.extraFields=n}!e||e?.contactInfo&&!et(e,"contactInfo")||100===Number(p)?e&&i(re(e)):(e=>{const t={...e};t.contactInfo={name:`${u.firstName} ${u.lastName}`,email:u.emailAddress,companyName:d||v||"",phoneNumber:u.phoneNumber},i(re(t))})(e)}finally{const e=u.b2bId||u.id||0;i(oe(Number(e))),R(!1)}})()},[w,Re]);const Ge=h.useMemo(()=>{const e=C.contactInfo||{};return{info:{quoteTitle:e?.quoteTitle||"",referenceNumber:C?.referenceNumber||""},extraFields:C.extraFields||[],recipients:C.recipients||[]}},[C]),Je=()=>{const e={shippingAddress:qt,billingAddress:St};return Qe?.current&&(e.billingAddress=Qe.current.getContactInfoValue()),Me?.current&&(e.shippingAddress=Me.current.getContactInfoValue()),e},Ke=async e=>{if(Ve?.current){const t=await Ve.current.getContactInfoValue();if(!t)return!1;const a=e?.recipients||[];t.ccEmail.trim().length&&(e.recipients=He(We(a,[t.ccEmail]))),e.contactInfo={name:t?.name,email:t?.email,companyName:t?.companyName||"",phoneNumber:t?.phoneNumber,quoteTitle:t?.quoteTitle},e.referenceNumber=t?.referenceNumber||"";const n=Be.map(e=>({id:Number(e.id),fieldName:e.name,value:e.name?t[e.name]:""}));return e.extraFields=n,!0}return!1},at=jt(F,z),it=()=>{_e.current?.refreshSummary()},rt=(e,t)=>{const a=e||Te,n=t||Oe;a&&(i(he()),i(be()),ue.delete("cartToQuoteId"),O(`/quoteDetail/${a}?date=${n}`,{state:{to:"draft"}}))},ot=async()=>{if(!_){R(!0);try{const a=$e(C);if(V&&Ve?.current&&!(await Ke(a)))return;const n=a?.contactInfo||{},i=n?.quoteTitle||"";"quoteTitle"in n&&delete n.quoteTitle;const r=Object.keys(n).every(e=>"phoneNumber"===e||"companyName"===e||n&&!!n[e]);if(et(C,"contactInfo")||!r)return void I.error(z("quoteDraft.addQuoteInfo"));if(!g||0===g.length)return void I.error(z("quoteDraft.submit"));if(!k&&!A&&g.some(e=>J(e)?.name))return void I.error(z("quoteDraft.submit.errorTip"));const o=(a?.note||"").trim().replace(/[\r\n]/g,"\\n"),l=e=>{const a=$e(e),n=t?.find(e=>e.countryCode===a.country);return n&&(a.country=n.countryName),a.address=e?.address||"",a.apartment=e?.apartment||"",a},{shippingAddress:d,billingAddress:m}=Qe?.current?Je():a,f=d?l(d):{},x=m?l(m):{};let h=0,y=0;const q=e=>"string"==typeof e&&e.includes("-")?""+new Date(e).getTime()/1e3:e,S=g.map(e=>{const{node:t}=e,a={...t.productsSearch,selectOptions:t?.optionList||""},n=M(a,{}).map(e=>({optionId:e.optionId,optionValue:"date"===e.fieldType?q(e.optionValue):e.optionValue,optionLabel:`${e.valueText}`,optionName:e.valueLabel,type:e?.fieldOriginType||e.fieldType})).filter(e=>!!e.optionName)||[],i=t?.productsSearch?.variants;let r;return Array.isArray(i)&&(r=i.find(e=>e.sku===t.variantSku)),h+=Number(t?.basePrice||0)*Number(t?.quantity||0),y+=Number(t?.taxPrice||0)*Number(t?.quantity||0),{productId:t?.productsSearch?.id,sku:t.variantSku,basePrice:Number(t?.basePrice||0).toFixed(D.decimal_places),discount:"0.00",offeredPrice:Number(t?.basePrice||0).toFixed(D.decimal_places),quantity:t.quantity,variantId:r?.variant_id,imageUrl:t.primaryImage,productName:t.productName,options:n,itemId:Ye()}}),N=(e=C?.fileInfo||[],100===p?[]:e.map(e=>({fileUrl:e.fileUrl,fileName:e.fileName,fileType:e.fileType,fileSize:e.fileSize}))),v={message:o,legalTerms:"",totalAmount:b?h.toFixed(D.decimal_places):(h+y).toFixed(D.decimal_places),grandTotal:h.toFixed(D.decimal_places),subtotal:h.toFixed(D.decimal_places),companyId:s?w||c||j:"",storeHash:ce,quoteTitle:i,discount:"0.00",channelId:le,userEmail:u.emailAddress,shippingAddress:f,billingAddress:x,contactInfo:n,productList:S,fileList:N,taxTotal:y.toFixed(D.decimal_places),currency:{currencyExchangeRate:D.currency_exchange_rate,token:D.token,location:D.token_location,decimalToken:D.decimal_token,decimalPlaces:D.decimal_places,thousandsToken:D.thousands_token,currencyCode:D.currency_code},referenceNumber:`${a.referenceNumber}`||"",extraFields:a.extraFields||[],recipients:a.recipients||[]};if(!de("on-quote-create",v))throw new Error;const P=await Ce(v);if(A&&P?.error?.extensions?.productValidationErrors?.length)return void P.error.extensions.productValidationErrors.forEach(e=>{I.error(z("quoteDraft.notification.productCannotBeAddedToQuote",{productId:e.productId}))});const{quoteCreate:{quote:{id:L,createdAt:E}}}=P;if(Ee(L),ze(E),L){const e=ue.get("cartToQuoteId"),t=pe(e);await me(t)}"0"===T.value?rt(L,E):ye(!0)}catch(a){je.error(a)}finally{R(!1)}var e}};return h.useEffect(()=>{if(X&&H&&Qe.current){const e=Qe.current.getContactInfoValue();Me.current&&Me.current.setShippingInfoValue(e)}},[X,H]),a.jsxs(ne,{isSpinning:_,children:[a.jsxs(o,{sx:{mb:"60px",width:"100%"},children:[a.jsx(o,{sx:{marginBottom:"10px",width:"fit-content",displayPrint:"none"},children:a.jsxs(o,{sx:{color:"primary.main",cursor:"pointer",display:"flex",alignItems:"center"},onClick:()=>{n?.quoteBtn||100===Number(p)?(O("/"),e({isOpen:!1,openUrl:""})):O("/quotes")},children:[a.jsx(Ue,{fontSize:"small",sx:{fontSize:"12px",marginRight:"0.5rem"}}),a.jsx("p",{style:{margin:"0"},children:(()=>{let e=100===Number(p)?z("quoteDraft.button.back"):z("quoteDraft.button.backToQuoteLists");return"open"===n?.quoteBtn?e=z("quoteDraft.button.back"):"add"===n?.quoteBtn&&(e=z("quoteDraft.button.backToProduct")),e})()})]})}),a.jsxs(o,{sx:{display:"flex",justifyContent:"space-between"},children:[a.jsxs(o,{sx:{display:"flex",mb:"24px",flexDirection:F?"column":"row",alignItems:F?"flex-start":"center"},children:[a.jsx(l,{component:"h3",sx:{fontSize:"34px",mr:"1rem",mb:F?"1rem":"0",color:ie(P)},children:z("quoteDraft.title.Quote")}),a.jsx(Ne,{code:"0"})]}),L&&a.jsx(o,{children:F?a.jsx(o,{sx:{position:"fixed",left:0,bottom:0,background:"#FFF",width:"100%",display:"flex",p:"8px 0",zIndex:100,justifyContent:"center"},children:a.jsx(N,{variant:"contained",size:"small",disabled:_,sx:{height:"38px",width:"90%"},onClick:ot,children:z("quoteDraft.button.submit")})}):a.jsx(N,{variant:"contained",size:"small",disabled:_,sx:{padding:"8px 22px",alignSelf:"center",marginBottom:"24px"},onClick:ot,children:z("quoteDraft.button.submit")})})]}),a.jsxs(o,{children:[!V&&a.jsx(we,{quoteAndExtraFieldsInfo:Ge,status:"Draft",contactInfo:C?.contactInfo,shippingAddress:C?.shippingAddress,billingAddress:C?.billingAddress||{},handleEditInfoClick:()=>{U(!0)}}),V&&a.jsxs(ke,{flexDirection:"column",children:[a.jsx(nt,{emailAddress:u.emailAddress,info:C?.contactInfo,referenceNumber:C?.referenceNumber||"",quoteExtraFields:Be,extraFieldsDefault:C.extraFields||[],recipients:C?.recipients||[],handleSaveCCEmail:async e=>{i(fe(e))},ref:Ve}),a.jsxs(o,{sx:{display:"flex",mt:F?0:"3rem",flexDirection:F?"column":"row"},children:[a.jsx(lt,{title:z("quoteDraft.section.billing"),info:C?.billingAddress,addressList:Q,pr:F?0:"8px",ref:Qe,role:p,accountFormFields:at,shippingSameAsBilling:H,type:"billing",setBillingChange:Y}),a.jsx(lt,{title:z("quoteDraft.section.shipping"),info:C?.shippingAddress,addressList:Q,pl:F?0:"8px",ref:Me,role:p,accountFormFields:at,shippingSameAsBilling:H,type:"shipping",setBillingChange:Y})]}),a.jsx(m,{label:z("quoteDraft.checkbox.sameAddressShippingAndBilling"),control:a.jsx(f,{checked:H,onChange:e=>{if(K(e.target.checked),Qe.current){const t=Qe.current.getContactInfoValue();Me.current&&e.target.checked&&Me.current.setShippingInfoValue(t)}}}),sx:{mt:2}}),a.jsx(N,{sx:{mt:"20px",mb:"15px"},onClick:async()=>{const e=$e(C);if(Ve?.current&&!(await Ke(e)))return;const{shippingAddress:t,billingAddress:a}=Je();e.shippingAddress=t,e.billingAddress=a,Object.keys(e.contactInfo).every(t=>"phoneNumber"===t||"companyName"===t||"quoteTitle"===t||!!e.contactInfo[t])&&(i(re(e)),U(!1))},variant:"outlined",children:z("quoteDraft.button.saveInfo")})]})]}),a.jsxs(o,{sx:{mt:"20px",display:"flex",flexDirection:F?"column":"row",alignItems:"flex-start"},children:[a.jsx(ke,{flexDirection:"column",xs:{flexBasis:F?"100%":"680px",flexGrow:2,marginRight:"20px",marginBottom:"20px",boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)",borderRadius:"4px"},children:a.jsx(yt,{updateSummary:it,total:g.length,items:g})}),a.jsx(ke,{flexDirection:"column",xs:{flexBasis:F?"100%":"340px",marginBottom:"20px",backgroundColor:"transparent",padding:0,flexGrow:1},children:a.jsxs(x,{spacing:2,sx:{width:"100%"},children:[a.jsx(ut,{ref:_e}),a.jsx(tt,{updateList:it,addToQuote:async e=>{if(A){const t=await De(e,z);return xe(t),t.length>0}return xe(e),!0}}),a.jsx(Pe,{quoteStatus:"Draft"}),100!==p&&a.jsx(Ae,{status:0})]})})]})]}),a.jsx(ct,{isOpen:ge,onClose:()=>{ye(!1),rt()},quoteSubmissionResponseInfo:T})]})});const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Ye(e,a,n){if(t.randomUUID&&!e)return t.randomUUID();const i=(e=e||{}).random??e.rng?.()??b();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=15&i[6]|64,i[8]=63&i[8]|128,g(i)}const Ze=()=>{const{state:{countriesList:e},dispatch:t}=h.useContext(y);h.useEffect(()=>{(async()=>{if(e&&!e.length){const{countries:e}=await j();t({type:"common",payload:{countriesList:e}})}})()},[e])},et=(e,t)=>Object.values(e?.[t]).every(e=>""===e||0===e);function tt(e){const{updateList:t,addToQuote:s}=e,l=q(({company:e})=>e.companyInfo.id),c=q(({company:e})=>e.customer.customerGroupId),d=q(({company:e})=>e.companyInfo.status),[u,p]=h.useState(!1),[m,f]=h.useState(!1),[x]=Ee(),b=S(),g=e=>e.map(e=>{const{variantId:t,newSelectOptionList:a,id:n,name:i,quantity:r,variants:o=[],basePrice:s,taxPrice:l,calculatedValue:c}=e,d=1===o.length?o[0]:o.find(e=>e.variant_id===t),{image_url:u="",sku:p}=d;let m;try{m=JSON.stringify(a)}catch(h){m="[]"}const f=d.bc_calculated_price.tax_exclusive,x=d.bc_calculated_price.tax_inclusive;return{node:{basePrice:s||f,taxPrice:l||Number(x)-Number(f),optionList:m,id:k(),primaryImage:u,productId:n,productName:i,calculatedValue:c,productsSearch:{...e,selectOptions:m},quantity:r,variantSku:p}}});return a.jsx(n,{children:a.jsx(i,{sx:{p:"16px !important"},children:a.jsxs(Te,{title:b("quoteDraft.collapseTitle.addToQuote"),children:[a.jsx(Oe,{updateList:t,addToList:async e=>{const t=g(e),a=e.filter(({sku:e,variantId:t,variants:a})=>{const n=a.find(e=>e.variant_id===t||e.variantId===t).sku;return!(e||n)});a.length>0&&I.error(b("quoteDraft.notification.cantAddProductsNoSku")),a.length!==e.length&&await s(t)&&I.success(b("quoteDraft.notification.productSingular"))},type:"quote",searchDialogTitle:b("quoteDraft.modalTitle.addToQuote"),addButtonText:b("quoteDraft.searchProduct.addToQuoteButton")}),a.jsx(r,{}),a.jsx(ze,{updateList:t,quickAddToList:async e=>{const t=e.map(e=>e.productId),{productsSearch:a}=await C({productIds:t,companyId:l,customerGroupId:c}),n=D(a).map(t=>{const a=e.find(e=>e.productId===t.id)||{},{variantId:n,newSelectOptionList:i,quantity:r}=a;return{...t,variantId:n,newSelectOptionList:i,quantity:r}});await T(n);const i=g(n);await s(i)&&I.success(b("quoteDraft.notification.productPlural"))},level:1,buttonText:b("quoteDraft.button.addProductsToAddToQuote")}),a.jsx(r,{}),a.jsx(o,{sx:{margin:"20px 0 0"},children:a.jsxs(N,{variant:"text",onClick:()=>{x&&0===d?I.info(b("quoteDraft.notification.businessAccountPendingActivation")):p(!0)},children:[a.jsx(Fe,{sx:{marginRight:"8px"}}),b("quoteDraft.button.bulkUploadCSV")]})}),a.jsx(v,{isOpen:u,setIsOpen:p,handleAddToList:async e=>{f(!0);try{const{validProduct:a}=e,n=[];a.forEach(e=>{const{products:t}=e;n.includes(Number(t.productId))||n.push(Number(t.productId))});const{productsSearch:i}=await C({productIds:n,companyId:l,customerGroupId:c}),r=D(i),o=[];a.forEach(e=>{const{products:{option:t,variantSku:a,productId:n,productName:i,variantId:s},qty:l}=e,c=(d=t,0===d?.length?[]:d.map(({option_id:e,id:t})=>({optionId:`attribute[${e}]`,optionValue:t})));var d;const u=r.find(e=>Number(e.id)===Number(n)),p=u.variants.find(e=>e?.sku?.toUpperCase()===a?.toUpperCase()),m={node:{id:k(),variantSku:p?.sku,variantId:s,productsSearch:{...u,newSelectOptionList:c,variantId:s},primaryImage:p.image_url||w,productName:i,quantity:Number(l)||1,optionList:JSON.stringify(c),productId:n,basePrice:p.bc_calculated_price.as_entered,taxPrice:p.bc_calculated_price.tax_inclusive-p.bc_calculated_price.tax_exclusive}};o.push(m)}),P(o)?(await T(o,"2"),await s(o)&&I.success(b("quoteDraft.notification.productPlural")),t(),p(!1)):I.error(b("quoteDraft.notification.errorRangeProducts"))}catch(a){je.error(a)}finally{f(!1)}},isLoading:m,withModifiers:!0})]})})})}const at=Je(["email"]),nt=h.forwardRef(function({info:e,emailAddress:t,quoteExtraFields:n,referenceNumber:i,extraFieldsDefault:r,recipients:s,handleSaveCCEmail:l},c){const{control:d,getValues:u,setError:p,formState:{errors:m},setValue:f,handleSubmit:x}=ye({mode:"onSubmit"}),b=q(({company:e})=>e.customer.role)===A.GUEST,g=q(L),[y]=E(),j=S();h.useEffect(()=>{e&&"{}"!==JSON.stringify(e)&&Object.keys(e).forEach(t=>{f(t,e&&e[t])}),r.length&&r.forEach(e=>{e.fieldName&&f(e.fieldName,e.value)})},[e,r]);const N=async()=>{let e=!0;return await x(async a=>{e=await(async e=>t===Qe(e)||(g||p("email",{type:"custom",message:j("quoteDraft.contactInfo.emailExists")}),g))(a.email)},()=>{e=!1})(),e&&(e=await(async()=>{const e=u(),t=n.map(t=>({fieldName:t.name,fieldValue:t.name?e[t.name]:""})),a=await O({extraFields:t});if(200!==a.code){const e=(a.data?.errMsg||a.message||"").split(":");if(e.length>=2){const t=n?.find(t=>t.name===e[0]);if(t&&t.name)return p(t.name,{type:"manual",message:e[1]}),!1}return!1}return!0})()),e?u():e};h.useImperativeHandle(c,()=>({getContactInfoValue:N}));const v=((e,t,a)=>[{name:"name",label:t("quoteDraft.contactInfo.contactPerson"),required:!0,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small",disabled:!a},{name:"email",label:t("quoteDraft.contactInfo.email"),required:!0,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small",validate:at,disabled:!a},{name:"phoneNumber",label:t("quoteDraft.contactInfo.phone"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},{name:"companyName",label:t("quoteDraft.contactInfo.companyName"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"}])(y,j,b),I=(({isMobile:e,b3Lang:t,quoteExtraFields:a,referenceNumber:n,recipients:i,handleSaveClick:r})=>{const o=a.map(t=>({...t,xs:e?12:6}));return[{name:"quoteTitle",label:t("quoteDraft.contactInfo.quoteTitle"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},{name:"referenceNumber",label:t("quoteDraft.contactInfo.referenceNumber"),required:!1,default:n||"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},...o,{name:"ccEmail",label:t("quoteDraft.contactInfo.ccEmail"),required:!1,default:"",fieldType:"multiInputText",xs:e?12:6,variant:"filled",size:"small",isEmail:!0,existValue:i,validate:at,isEnterTrigger:!0,handleSave:r}]})({isMobile:y,b3Lang:j,quoteExtraFields:n,referenceNumber:i,recipients:s,handleSaveClick:e=>{l(e)}}),C=[{title:j("quoteDraft.contactInfo.contact"),infos:v},{title:j("quoteDraft.quoteInfo.title"),infos:I,style:{mt:"20px"}}];return a.jsx(o,{width:"100%",children:C.map(e=>a.jsxs(o,{width:"100%",children:[a.jsx(o,{sx:{fontWeight:400,fontSize:"24px",height:"32px",mb:"20px",...e?.style},children:e.title}),a.jsx(Ge,{formFields:e.infos,errors:m,control:d,setError:p,getValues:u,setValue:f})]},e.title))})}),it=c("div")(({marginBottom:e})=>({marginBottom:e,"& > span:not(:last-child)":{marginRight:"4px"}})),rt=c("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:e.spacing(3)}));function ot(e){const{item:t,onSetAddress:r}=e,o=s(),c=S();return a.jsx(n,{children:a.jsxs(i,{sx:{color:"#313440",wordBreak:"break-word"},children:[t.label&&a.jsx(l,{variant:"h5",sx:{marginBottom:1===t.isDefaultShipping||1===t.isDefaultBilling?o.spacing(1):o.spacing(3),color:"rgba(0, 0, 0, 0.87)"},children:t.label}),a.jsxs(it,{marginBottom:1===t.isDefaultShipping||1===t.isDefaultBilling?o.spacing(3):0,children:[1===t.isDefaultShipping&&a.jsx(z,{color:"#C4DD6C",textColor:"rgba(0, 0, 0, 0.87)",children:c("quoteDraft.addressItemCard.defaultShipping")}),1===t.isDefaultBilling&&a.jsx(z,{color:"#C4DD6C",textColor:"rgba(0, 0, 0, 0.87)",children:c("quoteDraft.addressItemCard.defaultBilling")})]}),a.jsx(l,{variant:"body1",children:`${t.firstName} ${t.lastName}`}),a.jsx(l,{variant:"body1",children:t.company||""}),a.jsx(l,{variant:"body1",children:t.addressLine1}),a.jsx(l,{variant:"body1",children:t.addressLine2}),a.jsx(l,{variant:"body1",children:`${t.city}, ${t.state} ${t.zipCode}, ${t.country}`}),a.jsx(l,{variant:"body1",children:t.phoneNumber}),a.jsx(rt,{children:a.jsx(N,{variant:"text",onClick:()=>{r(t)},children:c("quoteDraft.addressItemCard.chooseAddress")})})]})},t.id)}function st({isOpen:e,closeModal:t,handleChangeAddress:n,addressList:i=[],type:r}){const s=h.useRef({copyList:[]}),l=S(),c=q(B),[u,p]=h.useState([]);h.useEffect(()=>{if(i.length){const e=i.map(e=>e.node),t=e.filter(e=>1===e.isShipping&&"shipping"===r||1===e.isBilling&&"billing"===r);s.current.copyList=c?t:e,p(t)}},[i,r,c]);const m=["address","firstName","lastName","phoneNumber","state","zipCode","country","label","address","addressLine1"];return a.jsxs(F,{fullWidth:!0,isOpen:e,handleLeftClick:()=>{t()},title:l("quoteDraft.chooseAddress.chooseFromSaved"),showRightBtn:!1,maxWidth:"lg",children:[a.jsx(o,{children:a.jsx(Ke,{searchBGColor:"rgba(0, 0, 0, 0.06)",placeholder:l("quoteDraft.chooseAddress.searchAddress"),handleChange:e=>{(e=>{if(!e&&s?.current)return void p(s.current.copyList);const t=[];m.forEach(a=>{let n=!0;u.forEach(i=>{i[a].includes(e)&&n&&(t.push(i),n=!1)})}),p(t)})(e)}})}),a.jsx(o,{sx:{mt:"20px"},children:a.jsx(d,{container:!0,spacing:2,children:u.map(e=>a.jsx(d,{item:!0,xs:4,children:a.jsx(ot,{item:e,onSetAddress:n})},e.id))})})]})}const lt=h.forwardRef(function({title:e,addressList:t=[],pr:n=0,pl:i=0,info:r,role:s,accountFormFields:c=[],shippingSameAsBilling:d=!1,type:u,setBillingChange:p},m){const{control:f,getValues:x,formState:{errors:b},setValue:g}=ye({mode:"onSubmit"}),[j]=E(),q=S(),[N,v]=h.useState(!1),[I,C]=h.useState($e(c));(({setAddress:e,setValue:t,getValues:a,control:n,addresses:i})=>{const{state:{countriesList:r}}=h.useContext(y),o=ge({control:n,name:"country"});h.useEffect(()=>{const t=i.findIndex(e=>"country"===e.name);r?.length&&-1!==t&&e(i.map((e,a)=>t===a?{...e,options:r}:e))},[r]),h.useEffect(()=>{if(!o||!r?.length)return;const n=r.find(e=>e.countryCode===o)?.states||[],s=i.findIndex(e=>"state"===e.name);-1!==s&&e(i.map((e,t)=>s===t?n.length>0?{...e,fieldType:"dropdown",options:n,required:!0}:{...e,fieldType:"text",options:[],required:!1}:e));const l=a("state");t("state",l&&o&&(n.find(e=>e.stateName===l)||0===n.length)?l:"")},[o,r])})({control:f,setValue:g,getValues:x,setAddress:C,addresses:I});const D=()=>x(),T=e=>{Object.keys(e).forEach(t=>{"company"!==t&&g(t,e[t])})};h.useImperativeHandle(m,()=>({getContactInfoValue:D,setShippingInfoValue:T}));const w=()=>{v(!1)};h.useEffect(()=>{"{}"!==JSON.stringify(r)&&Object.keys(r).forEach(e=>{g(e,r[e])})},[r]);const k=h.useId();return a.jsxs(o,{role:"group","aria-labelledby":k,width:j?"100%":"50%",mt:j?"2rem":"0",pr:n,pl:i,children:[a.jsxs(o,{sx:{display:"flex",mb:"20px"},children:[a.jsx(l,{id:k,sx:{fontWeight:400,fontSize:"24px",height:"32px",mr:"16px"},children:e}),100!==Number(s)&&a.jsx(l,{onClick:()=>{v(!0)},sx:{fontWeight:500,fontSize:"14px",color:"primary.main",display:"flex",alignItems:"flex-end",cursor:"pointer",textTransform:"uppercase"},children:q("quoteDraft.quoteAddress.chooseFromSaved")})]}),a.jsx(Ge,{formFields:I,errors:b,control:f,getValues:x,setValue:g}),a.jsx(st,{isOpen:N,handleChangeAddress:e=>{const t={label:e?.label||"",firstName:e?.firstName||"",lastName:e?.lastName||"",company:e?.company||"",country:e?.countryCode||"",address:e?.addressLine1||"",apartment:e?.addressLine2||"",city:e?.city||"",state:e?.state||"",zipCode:e?.zipCode||"",phoneNumber:e?.phoneNumber||""};Object.keys(t).forEach(e=>{"company"!==e&&g(e,t[e])}),"billing"===u&&d&&p(!0),w()},closeModal:w,addressList:t,type:u})]})});function ct({isOpen:e=!1,onClose:t,quoteSubmissionResponseInfo:n}){const i=S(),r=n.message.split("\n");return a.jsx(o,{sx:{"#b2b-dialog-container":{'& [aria-labelledby="alert-dialog-title"]':{width:"500px",maxHeight:"500px"},"& h2":{color:"#313440"},"& h6":{color:"#313440",fontSize:"16px"}}},children:a.jsx(F,{isOpen:e,title:n.title,showLeftBtn:!1,handRightClick:t,isShowBordered:!1,rightSizeBtn:i("quoteDraft.submission.response.button.text"),maxWidth:!1,children:r.map(e=>a.jsx(l,{variant:"subtitle2",sx:{marginTop:"1rem"},children:e},e))})})}const dt={subtotal:0,shipping:0,tax:0,grandTotal:0},ut=h.forwardRef((e,t)=>{const r=S(),[s,c]=h.useState({...dt}),[u,p]=h.useState(!1),m=q(({global:e})=>e.showInclusiveTaxPrice),f=q(({quoteInfo:e})=>e.draftQuoteList),x=e=>parseFloat(String(e)),b=h.useCallback(()=>{const e=(e=>{const{global:{blockPendingQuoteNonPurchasableOOS:{isEnableProduct:t}}}=_.getState();return!!t&&e.some(e=>!R(e.node.basePrice,e))})(f);p(e);const t=f.reduce((e,t)=>{const{basePrice:a,taxPrice:n=0,quantity:i}=t.node;let{subtotal:r,grandTotal:o,tax:s}=e;const{shipping:l}=e,c=V(Number(a),Number(n));return r+=x(c*i),s+=x(Number(n)*Number(i)),o=(m?r:r+s)+l,{grandTotal:o,shipping:l,tax:s,subtotal:r}},{...dt});c(t)},[m,f]);h.useEffect(()=>{b()},[b]),h.useImperativeHandle(t,()=>({refreshSummary:()=>b()}));const g=e=>U(e),y=e=>u?r("quoteDraft.quoteSummary.tbd"):e,j=h.useId();return a.jsx(n,{role:"article","aria-labelledby":j,children:a.jsx(i,{children:a.jsxs(o,{children:[a.jsx(l,{id:j,variant:"h5",children:r("quoteDraft.quoteSummary.summary")}),a.jsxs(o,{sx:{marginTop:"20px",color:"#212121"},children:[a.jsxs(d,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[a.jsx(l,{children:r("quoteDraft.quoteSummary.subTotal")}),a.jsx(l,{children:y(g(s.subtotal))})]}),a.jsxs(d,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[a.jsx(l,{children:r("quoteDraft.quoteSummary.shipping")}),a.jsx(l,{children:r("quoteDraft.quoteSummary.tbd")})]}),a.jsxs(d,{container:!0,justifyContent:"space-between",sx:{margin:"4px 0"},children:[a.jsx(l,{children:r("quoteDraft.quoteSummary.tax")}),a.jsx(l,{children:y(g(s.tax))})]}),a.jsxs(d,{container:!0,justifyContent:"space-between",sx:{margin:"24px 0 0"},children:[a.jsx(l,{sx:{fontWeight:"bold"},children:r("quoteDraft.quoteSummary.grandTotal")}),a.jsx(l,{sx:{fontWeight:"bold"},children:y(g(s.grandTotal))})]})]})]})})})});function pt({columnItems:e,isCustomRender:t=!1,tableKey:n,renderItem:i,noDataText:r="",tableFixed:o=!1,tableHeaderHide:s=!1,rowsPerPageOptions:l=[10,20,30],itemSpacing:c=2,itemXs:d=4,showCheckbox:u=!1,showSelectAllCheckbox:p=!1,selectedSymbol:m="id",isSelectOtherPageCheckbox:f=!1,showBorder:x=!0,getSelectCheckbox:b,hover:g=!1,labelRowsPerPage:y="",itemIsMobileSpacing:j=2,disableCheckbox:q=!1,onClickRow:S,showPagination:N=!0,showRowsPerPageOptions:v=!0,CollapseComponent:I,applyAllDisableCheckbox:C=!0,sortDirection:D="asc",sortByFn:T=()=>{},orderBy:w="",pageType:k="",items:P}){const A={offset:0,first:l[0]},[L,O]=h.useState(A),[z,B]=h.useState(!1),[F,_]=h.useState([]),[R]=E();h.useEffect(()=>{b&&b(F)},[F,P]);const V={...L,count:P.length},U=h.useCallback(()=>!!F.length&&P.every(e=>{const t=Q(e)?e.node:e;return F.includes(t[m])}),[P,F,m]);return h.useEffect(()=>{if(f){const e=U();B(e)}},[F,L,f,U]),a.jsx($,{hover:g,columnItems:e||[],listItems:P.slice(L.offset,L.offset+L.first),pagination:V,rowsPerPageOptions:l,onPaginationChange:async e=>{O(e)},isCustomRender:t,isInfiniteScroll:R,renderItem:i,tableFixed:o,tableHeaderHide:s,itemSpacing:c,itemXs:d,noDataText:r,tableKey:n,itemIsMobileSpacing:j,showCheckbox:u,showSelectAllCheckbox:p,disableCheckbox:q,selectedSymbol:m,isSelectOtherPageCheckbox:f,isAllSelect:z,selectCheckbox:F,handleSelectAllItems:()=>{f?(()=>{const e=U(),t=[...F];e?P.forEach(e=>{const a=Q(e)?e.node:e,n=t.findIndex(e=>e===a[m]);t.splice(n,1)}):P.forEach(e=>{const a=Q(e)?e.node:e;F.includes(a[m])||t.push(a[m])}),_(t)})():(()=>{if(F.length===P.length)_([]);else{const e=[];P.forEach(t=>{const a=Q(t)?t.node:t;a&&("shoppingListDetailsTable"===k?e.push(a.quantity>0||!a.disableCurrentCheckbox?a[m]:""):e.push(a[m]))}),_(e)}})()},handleSelectOneItem:e=>{const t=[...F],a=t.indexOf(e);-1!==a?t.splice(a,1):t.push(e),_(t)},showBorder:x,labelRowsPerPage:y,onClickRow:S,showPagination:N,showRowsPerPageOptions:v,CollapseComponent:I,applyAllDisableCheckbox:C,sortDirection:D,sortByFn:T,orderBy:w})}const mt=u("img")(()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"}));function ft(e){const{item:t,onEdit:n,onDelete:r,handleUpdateProductQty:s,idEdit:c,len:d,itemIndex:u}=e,{basePrice:m,quantity:f,id:x,primaryImage:h,productName:b,variantSku:g,productsSearch:y,taxPrice:j=0}=t,q=S(),N=V(Number(m),Number(j)),v=N*Number(f),I={...t.productsSearch,selectOptions:t.optionList},C=M(I,{}),D=JSON.parse(t.optionList),T=C.filter(e=>e.valueText),{productUrl:k}=y,P=H({price:U(N),productInfo:t,showText:q("quoteDraft.quoteSummary.tbd")}),A=H({price:U(v),productInfo:t,showText:q("quoteDraft.quoteSummary.tbd")});return a.jsx(o,{width:"100%",sx:{borderTop:"1px solid #D9DCE9",borderBottom:u===d-1?"1px solid #D9DCE9":""},children:a.jsxs(i,{sx:{color:"#313440",display:"flex",pl:0},children:[a.jsx(o,{children:a.jsx(mt,{src:h||w,alt:"Product-img",loading:"lazy"})}),a.jsxs(o,{sx:{flex:1},children:[a.jsx(l,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:e}}=window;k&&(window.location.href=`${e}${k}`)},sx:{cursor:"pointer"},children:b}),a.jsx(l,{variant:"body1",color:"#616161",children:g}),a.jsx(o,{sx:{margin:"1rem 0"},children:D.length>0&&T.length>0&&a.jsx(o,{children:T.map(e=>a.jsx(l,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel))})}),a.jsx(l,{sx:{fontSize:"14px"},children:`Price: ${P}`}),a.jsx(p,{size:"small",type:"number",variant:"filled",label:"qty",disabled:!c,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},value:f,sx:{margin:"1rem 0",width:"60%",maxWidth:"100px","& label":{fontSize:"14px"},"& input":{fontSize:"14px"}},onChange:e=>{s(t,e.target.value)}}),a.jsx(l,{sx:{fontSize:"14px"},children:`Total: ${A}`}),a.jsxs(o,{sx:{marginTop:"1rem",textAlign:"end"},id:"shoppingList-actionList-mobile",children:[D.length>0&&c&&a.jsx(_e,{sx:{marginRight:"0.5rem",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{n({...y,quantity:f,selectOptions:t.optionList},x)}}),c&&a.jsx(Re,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{r(x)}})]})]})]})},t.id)}const xt=u("div")(()=>({backgroundColor:"#FFFFFF",padding:"0",width:"100%","& tbody":{"& tr":{"& td":{verticalAlign:"top"},"& td: first-of-type":{verticalAlign:"inherit"}},"& tr: hover":{"& #shoppingList-actionList":{opacity:1}}}})),ht=u("img")(()=>({maxWidth:"60px",height:"auto",marginRight:"0.5rem"})),bt=u(p)(()=>({"& input":{paddingTop:"12px",paddingRight:"6px"}})),gt=1e6;function yt(e){const{total:t,items:n,idEdit:i=!0,updateSummary:r}=e,s=S(),c=W(),d=G(),[u,p]=h.useState(!1),[m,f]=h.useState(!1),[x,b]=h.useState(null),[g,y]=h.useState(""),j=q(({global:e})=>e.blockPendingQuoteNonPurchasableOOS.isEnableProduct),N=async(e,t)=>{const a=await K(e,Number(t));c(X({id:a.id,product:{node:a}})),r()},v=e=>{c(Y(e)),r()},C=(e,t)=>{b(e),y(t),f(!0)},D=[{key:"Product",title:s("quoteDraft.quoteTable.product"),render:e=>{const t={...e.productsSearch,selectOptions:e.optionList},n=M(t,{}),i=JSON.parse(e.optionList),r=n.filter(e=>e.valueText);let c=null,u=null;if(!d["B2B-3318.move_stock_and_backorder_validation_to_backend"]){const a=J(e);if(!j&&a?.name)if("oos"===a?.type){const a=t.inventoryTracking||e.inventoryTracking||"none";let n=t.inventoryLevel||e.inventoryLevel||0;if("variant"===a){const a=t.variants.find(t=>t.sku===e.variantSku);n=a?.inventory_level}c=s("quoteDraft.quoteTable.outOfStock.tip"),u=s("quoteDraft.quoteTable.oosNumber.tip",{qty:n})}else c=s("quoteDraft.quoteTable.unavailable.tip")}return a.jsxs(o,{sx:{display:"flex",alignItems:"flex-start"},children:[a.jsx(ht,{src:e.primaryImage||w,alt:"Product-img",loading:"lazy"}),a.jsxs(o,{children:[a.jsx(l,{variant:"body1",color:"#212121",onClick:()=>{const{location:{origin:e}}=window;t?.productUrl&&(window.location.href=`${e}${t?.productUrl}`)},sx:{cursor:"pointer"},children:e.productName}),a.jsx(l,{variant:"body1",color:"#616161",children:e.variantSku}),i.length>0&&r.length>0&&a.jsx(o,{children:r.map(e=>a.jsx(l,{sx:{fontSize:"0.75rem",lineHeight:"1.5",color:"#455A64"},children:`${e.valueLabel}: ${e.valueText}`},e.valueLabel))}),c&&a.jsxs(o,{sx:{color:"red"},children:[a.jsxs(o,{sx:{mt:"1rem",display:"flex",alignItems:"center","& svg":{mr:"0.5rem"}},children:[a.jsx(Ve,{color:"error",fontSize:"small"}),c]}),u&&a.jsx(o,{children:u})]})]})]})},width:"40%"},{key:"Price",title:s("quoteDraft.quoteTable.price"),render:e=>{const{basePrice:t,taxPrice:n}=e,i=V(Number(t),Number(n));return a.jsx(l,{sx:{padding:"12px 0"},children:H({price:U(i),productInfo:e,showText:s("quoteDraft.quoteSummary.tbd")})})},width:"15%",style:{textAlign:"right"}},{key:"Qty",title:s("quoteDraft.quoteTable.qty"),render:e=>a.jsx(bt,{size:"small",type:"number",variant:"filled",disabled:!i,value:e.quantity,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:t=>{N(e,Number(t.target.value))},onBlur:t=>{(async(e,t)=>{let a=Me(Number(t));a===Number(t)&&a>=1&&a<=gt||(Number(t)<1&&(a=1),Number(t)>gt&&(a=gt),N(e,a))})(e,Number(t.target.value))},sx:{width:"75%"}}),width:"15%",style:{textAlign:"right"}},{key:"Total",title:s("quoteDraft.quoteTable.total"),render:e=>{const{basePrice:t,quantity:n,taxPrice:r}=e,c=V(Number(t),Number(r))*Number(n),d=JSON.parse(e.optionList);return a.jsxs(o,{children:[a.jsx(l,{sx:{padding:"12px 0"},children:H({price:U(c),productInfo:e,showText:s("quoteDraft.quoteSummary.tbd")})}),a.jsxs(o,{sx:{marginTop:"1rem",opacity:0,textAlign:"end"},id:"shoppingList-actionList",children:[d.length>0&&i&&a.jsx(_e,{sx:{marginRight:"0.5rem",cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{const{productsSearch:t,id:a,optionList:n,quantity:i}=e;C({...t,quantity:i,selectOptions:n},a)}}),i&&a.jsx(Re,{sx:{cursor:"pointer",color:"rgba(0, 0, 0, 0.54)"},onClick:()=>{const{id:t}=e;v(t)}})]})]})},width:"15%",style:{textAlign:"right"}}];return a.jsxs(xt,{children:[a.jsx(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0.5rem 0 1rem"},children:a.jsx(l,{sx:{fontSize:"24px"},children:s("quoteDraft.quoteTable.totalProducts",{total:t||0})})}),a.jsx(pt,{columnItems:D,rowsPerPageOptions:[12,24,36],items:n,isCustomRender:!1,hover:!0,labelRowsPerPage:s("quoteDraft.quoteTable.perPage"),showBorder:!1,itemIsMobileSpacing:0,noDataText:s("quoteDraft.quoteTable.noProducts"),renderItem:(e,n)=>a.jsx(ft,{len:t||0,item:e,itemIndex:n,onEdit:C,onDelete:v,handleUpdateProductQty:N,idEdit:i})}),a.jsx(Be,{isOpen:m,isLoading:u,setIsLoading:p,product:x,onCancel:()=>{f(!1)},onConfirm:async e=>{await T(e);const t=(e=>e.map(e=>{const{variantId:t,newSelectOptionList:a,id:n,productId:i,name:r,quantity:o,variants:s=[],basePrice:l,taxPrice:c=0,calculatedNoTaxPrice:d=0,calculatedTaxPrice:u=0}=e;let[p]=s;s.length>1&&(p=s.find(e=>e.variant_id===t)??p);const{image_url:m="",sku:f}=p;let x;try{x=JSON.stringify(a)}catch(b){x="[]"}const h=p.bc_calculated_price?.tax_exclusive||0;return{node:{basePrice:l||h,taxPrice:c,optionList:x,id:n.toString(),primaryImage:m,productId:i,productName:r,productsSearch:{...e,selectOptions:x},quantity:Number(o),variantSku:f,calculatedTaxPrice:u,calculatedNoTaxPrice:d,calculatedValue:{}}}}))(e);t.forEach(e=>{const{basePrice:t}=e.node,a=e;a.node.id=g,a.node.basePrice=t}),f(!1),c(X({id:g,product:t[0]})),r(),I.success(s("quoteDraft.quoteTable.productUpdated"))},isEdit:!0})]})}const jt=(e,t)=>[{name:"label",label:t("quoteDraft.config.addressLabel"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"},{name:"firstName",label:t("quoteDraft.config.firstName"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},{name:"lastName",label:t("quoteDraft.config.lastName"),required:!1,default:"",fieldType:"text",xs:e?12:6,variant:"filled",size:"small"},{name:"companyName",label:t("quoteDraft.config.company"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"},{name:"country",label:t("quoteDraft.config.country"),required:!1,default:"",fieldType:"dropdown",options:[],xs:12,variant:"filled",size:"small",replaceOptions:{label:"countryName",value:"countryCode"}},{name:"address",label:t("quoteDraft.config.addressLine1"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"},{name:"apartment",label:t("quoteDraft.config.addressLine2"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"},{name:"city",label:t("quoteDraft.config.city"),required:!1,default:"",fieldType:"text",options:[],xs:12,variant:"filled",size:"small"},{name:"state",label:t("quoteDraft.config.state"),required:!1,default:"",fieldType:"text",options:[],xs:e?12:6,variant:"filled",size:"small",replaceOptions:{label:"stateName",value:"stateName"}},{name:"zipCode",label:t("quoteDraft.config.zipCode"),required:!1,default:"",fieldType:"text",options:[],xs:e?12:6,variant:"filled",size:"small"},{name:"phoneNumber",label:t("quoteDraft.config.phoneNumber"),required:!1,default:"",fieldType:"text",xs:12,variant:"filled",size:"small"}],qt={address:"",addressId:0,apartment:"",city:"",country:"",firstName:"",label:"",lastName:"",phoneNumber:"",state:"",zipCode:"",companyName:""},St={address:"",addressId:0,apartment:"",city:"",country:"",firstName:"",label:"",lastName:"",phoneNumber:"",state:"",zipCode:"",companyName:""}}}});
//# sourceMappingURL=index-legacy-ZYoYY_5m.js.map
