System.register(["./mui-legacy-Co1sKVsS.js","./intl-legacy-f5dGU49Z.js","./react-setup-legacy-DEc0vKYV.js","./load-functions-legacy-ksbQXdn-.js","./HierarchyDialog-legacy-CStSqS6g.js","./base-legacy-DAqmyLJs.js","./muiIcon-legacy-C-h6sDde.js","./reactVendor-legacy-C5drotBr.js","./eCache-legacy-QcRlogRO.js","./redux-legacy-DH94TLLa.js","./toolkit-legacy-DO7GmFjE.js","./lodashEs-legacy-BTGS6uHg.js","../index-legacy.js","./global-legacy-vVqwfyov.js","./router-legacy-CQEMCAt4.js","./dropzone-legacy-B1uEXZk9.js","./dateFns-legacy-DHywh9DD.js"],function(e,a){"use strict";var n,l,r,t,o,s,i,c,m,d,p,h,u,y,x,g,j,b,C,I,f,N,w,S,H,v;return{setters:[e=>{n=e.j,l=e.A,r=e.B,t=e.I,o=e.C,s=e.X,i=e.Y,c=e.aE,m=e.D,d=e.E,p=e.H,h=e.J,u=e.K,y=e.M},e=>{x=e.r},e=>{g=e.j,j=e.C,b=e.a,C=e.u,I=e.af,f=e.cm},null,e=>{N=e.H,w=e.b},null,e=>{S=e.B,H=e.M,v=e.K},null,null,null,null,null,null,null,null,null,null],execute:function(){function a({company:e,currentCompanyId:a="",selectCompanyId:c="",onSwitchCompany:m,getDisplayName:d=e=>e.companyName,getNodeId:p=e=>e.companyId}){const h=x.useId(),u=p(e),[y,b]=x.useState(null),C=g(),{state:{switchAccountButton:{color:I="#ED6C02"}}}=x.useContext(j),f=Number(u)===Number(a),N=Number(u)===Number(c),w=Boolean(y),v=x.useMemo(()=>c?Number(c)!==Number(e.companyId):Number(a)!==Number(e.companyId),[a,c,e]),z=()=>{b(null)},k=w?{borderRadius:"10%",backgroundColor:"rgba(0, 0, 0, 0.14)"}:{};return n.jsxs(l,{sx:{padding:"16px",marginBottom:"16px"},role:"listitem","aria-labelledby":h,children:[n.jsxs(r,{children:[n.jsxs(r,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[n.jsxs(r,{id:h,sx:{display:"flex",alignItems:"flex-start"},children:[n.jsx(S,{sx:{color:"rgba(0, 0, 0, 0.54)",mr:1}}),d(e)]}),e?.channelFlag&&v&&n.jsx(t,{size:"small",onClick:e=>{b(e.currentTarget)},"aria-controls":w?"company-menu":void 0,"aria-haspopup":"true","aria-expanded":w?"true":void 0,"data-testid":"actions",sx:{pt:0,"& svg":{...k}},children:n.jsx(H,{})})]}),N&&n.jsx(o,{label:C("companyHierarchy.chip.selectCompany"),size:"small",sx:{mt:2,backgroundColor:I,color:"white",height:24,"& .MuiChip-label":{px:1}}}),f&&n.jsx(o,{label:C("companyHierarchy.chip.currentCompany"),size:"small",sx:{mt:2,backgroundColor:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]}),n.jsx(s,{id:"company-menu",anchorEl:y,open:w,onClose:z,MenuListProps:{"aria-labelledby":"company-button"},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:n.jsx(i,{sx:{color:"primary.main"},onClick:()=>{z(),m?.(e)},children:C("companyHierarchy.dialog.title")})})]})}function z({node:e,level:a=0,currentCompanyId:l="",selectCompanyId:c="",onSwitchCompany:m,getDisplayName:d=e=>e.companyName,getNodeId:p=e=>e.companyId}){const[y,b]=x.useState(!0),[C,I]=x.useState(null),f=g(),{state:{switchAccountButton:{color:N="#ED6C02"}}}=x.useContext(j),w=e.children&&e.children.length>0,k=p(e),D=Number(k)===Number(l),M=Number(k)===Number(c),E=Boolean(C),B=x.useMemo(()=>c?Number(c)!==Number(e.companyId):Number(l)!==Number(e.companyId),[l,c,e]),F=()=>{I(null)};return n.jsxs(n.Fragment,{children:[n.jsxs(h,{sx:{"&:last-child td, &:last-child th":{border:0},"& > td":{bgcolor:"background.paper"},height:"3.25rem"},children:[n.jsx(u,{sx:{width:"100%",py:1},children:n.jsx(r,{sx:{display:"flex",alignItems:"center"},children:n.jsxs(r,{sx:{display:"flex",ml:4*a,alignItems:"center"},children:[w?n.jsx(t,{"data-testid":y?"collapse":"open",size:"small",onClick:()=>b(!y),sx:{mr:1},children:n.jsx(v,{sx:{transform:y?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s",color:"rgba(0, 0, 0, 0.54)"}})}):n.jsx(r,{sx:{width:40}}),n.jsx(r,{sx:{mr:1,display:"flex",alignItems:"center"},children:n.jsx(S,{sx:{color:"rgba(0, 0, 0, 0.54)"}})}),n.jsx(r,{component:"span",sx:{mr:1},children:d(e)}),M&&n.jsx(o,{label:f("companyHierarchy.chip.selectCompany"),size:"small",sx:{backgroundColor:N,color:"white",height:24,"& .MuiChip-label":{px:1}}}),D&&n.jsx(o,{label:f("companyHierarchy.chip.currentCompany"),size:"small",sx:{backgroundColor:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]})})}),n.jsxs(u,{align:"right",sx:{width:48,py:1},children:[e?.channelFlag&&B&&n.jsx(t,{size:"small",onClick:e=>{I(e.currentTarget)},"aria-controls":E?"company-menu":void 0,"aria-haspopup":"true","aria-expanded":E?"true":void 0,"data-testid":"actions",children:n.jsx(H,{})}),n.jsx(s,{id:"company-menu",anchorEl:C,open:E,onClose:F,MenuListProps:{"aria-labelledby":"company-button"},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:n.jsx(i,{sx:{color:"primary.main"},onClick:()=>{F(),m?.(e)},children:f("companyHierarchy.dialog.title")})})]})]}),y&&w&&(e?.children||[]).map(e=>n.jsx(z,{node:e,level:a+1,currentCompanyId:l,selectCompanyId:c,onSwitchCompany:m,getDisplayName:d,getNodeId:p},p(e)))]})}function k({data:e,currentCompanyId:l,selectCompanyId:r,onSwitchCompany:t,getDisplayName:o=e=>e.companyName,getNodeId:s=e=>e.companyId}){const[i]=b(),x=g(),j=(e,a)=>(0===e.length||e.forEach(e=>{a.push({...e,children:[]}),e.children&&e.children.length>0&&j(e?.children||[],a)}),a),C=j(e,[]);return n.jsx(n.Fragment,{children:i?n.jsx("div",{role:"list",children:C.map(e=>n.jsx(a,{company:e,currentCompanyId:l,selectCompanyId:r,onSwitchCompany:t,getDisplayName:o,getNodeId:s},s(e)))}):n.jsx(c,{sx:{width:"100%",minHeight:"100px",mx:"auto",mt:2},children:n.jsx(m,{children:n.jsxs(d,{size:"small","aria-label":"company structure table",children:[n.jsx(p,{children:n.jsxs(h,{sx:{height:"3.25rem"},children:[n.jsx(u,{sx:{fontWeight:500,pl:8},children:x("companyHierarchy.table.name")}),n.jsx(u,{sx:{width:48}})]})}),n.jsx(y,{children:e.map(e=>n.jsx(z,{node:e,currentCompanyId:l,selectCompanyId:r,onSwitchCompany:t,getDisplayName:o,getNodeId:s},s(e)))})]})})})})}e("default",function(){const[e,a]=x.useState([]),[l,t]=x.useState(!1),[o,s]=x.useState(null),[i,c]=x.useState(!1),m=x.useRef([]),{id:d}=C(({company:e})=>e.companyInfo),{selectCompanyHierarchyId:p}=C(({company:e})=>e.companyHierarchyInfo);return x.useEffect(()=>{d&&(async()=>{c(!0);const{companySubsidiaries:e}=await f(),n=w({data:e||[]});m.current=e,a(n),c(!1)})()},[d]),n.jsx(I,{isSpinning:i,children:n.jsxs(r,{sx:{display:"flex",flexDirection:"column",flex:1,width:"100%"},children:[n.jsx(k,{data:e,onSwitchCompany:e=>{s(e),t(!0)},currentCompanyId:d,selectCompanyId:p}),n.jsx(N,{open:l,handleClose:()=>{t(!1)},currentRow:o,companyHierarchyAllList:m?.current||[]})]})})})}}});
//# sourceMappingURL=index-legacy-sc0U0H4a.js.map
