System.register(["./mui-legacy-Co1sKVsS.js","./intl-legacy-f5dGU49Z.js","./react-setup-legacy-DEc0vKYV.js","./base-legacy-DAqmyLJs.js","./load-functions-legacy-ksbQXdn-.js","./router-legacy-CQEMCAt4.js"],function(a,n){"use strict";var e,t,i,r,c,o,s,l,p,d,y,m,h,u,g,f,I;return{setters:[a=>{e=a.j,t=a.B},a=>{i=a.r},a=>{r=a.j,c=a.u,o=a.ad,s=a.t,l=a.o,p=a.aG,d=a.cj,y=a.bM,m=a.p,h=a.a7,u=a.q,g=a.a9},a=>{f=a.b},null,a=>{I=a.a}],execute:function(){a("H",function({open:a=!1,handleClose:x,currentRow:j,companyHierarchyAllList:C,title:H,context:N,dialogParams:L={}}){const S=r(),w=I(),{id:P}=c(({company:a})=>a.companyInfo),{pagesSubsidiariesPermission:k}=c(({company:a})=>a),{isHasCurrentPagePermission:A,companyHierarchyAllList:D}=c(({company:a})=>a.companyHierarchyInfo),[M,B]=i.useState(!1);return e.jsx(o,{isOpen:a,rightSizeBtn:S("global.button.next"),title:H||S("companyHierarchy.dialog.title"),fullWidth:!0,loading:M,handleLeftClick:x,handRightClick:async()=>{if(j)try{B(!0);const a=l.get("cartId"),{companyId:e}=j;if(!e)return;if(e===Number(P)?await p():e&&await d(Number(e)),a){const n=y(a);await m(n),h.dispatch(u(0))}const t=e===Number(P)?"":e,i=C||D;h.dispatch(g({selectCompanyHierarchyId:t,...C&&{companyHierarchyAllList:C},companyHierarchySelectSubsidiariesList:b(n({data:i,companyId:e})[0])}))}catch(a){f.error(a)}finally{B(!1),x()}},restDialogParams:{TransitionProps:{onExited:()=>{if(!j)return;const{companyId:a}=j;if(a===Number(P)){const{hash:a}=window.location;a.includes("/shoppingList/")&&w("/shoppingLists")}if(a!==Number(P)&&!A){const a=Object.keys(k).find(a=>!!k[a]),n=s.find(n=>n.key===a);n&&(x(),B(!1),w(n.path))}}}},dialogSx:{"& .MuiDialogTitle-root":{border:0},"& .MuiDialogActions-root":{border:0}},...L,children:e.jsx(t,{sx:{maxHeight:"600px"},children:e.jsx(t,{sx:{display:"flex",flexDirection:"column",flex:1},children:N||S("companyHierarchy.dialog.content")})})})});const n=a("b",({data:a,companyId:e,parentId:t})=>a.filter(a=>e?a.companyId===e:t?a.parentCompanyId===t:null===a.parentCompanyId||0===a.parentCompanyId).map(e=>({...e,children:n({data:a,parentId:e.companyId})}))),b=a=>{let n=[];return n.push({companyId:a.companyId,companyName:a.companyName,parentCompanyId:a.parentCompanyId,parentCompanyName:a.parentCompanyName,channelFlag:a.channelFlag}),a.children&&a.children.length>0&&a.children.forEach(a=>{n=n.concat(b(a))}),n}}}});
//# sourceMappingURL=HierarchyDialog-legacy-CStSqS6g.js.map
