var vn=Object.defineProperty;var bn=(e,n,t)=>n in e?vn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Pe=(e,n,t)=>bn(e,typeof n!="symbol"?n+"":n,t);import{r as y}from"./intl-D34a3Rgg.js";import{B as te,w as zn,i as wn,x as yn,j as kn,G as En,u as S,y as Pn,z as $n,C as Zn,o as $e,A as In,H as Tn,I as On,J as Nn,K as An,L as Cn,M as Sn,N as jn,O as Ze,Q as Rn}from"./react-setup-Ctz-bmMs.js";import{s as Ln}from"./load-functions-utyuqH_X.js";import"./mui-DjJKBaL-.js";import{useAddedToShoppingListAlert as Bn,addProductsToShoppingList as Fn,addProductsToShoppingListErrorHandler as Mn}from"./index-B3Ism599.js";import{b as He}from"./base-CC7kTJh2.js";import{g as xn,a as Dn}from"./shoppingList-5c4DgHH6.js";import{c as Vn}from"./OrderShoppingList-qu8HwRgc.js";import{b as Un}from"./b3TriggerCartNumber-Dt8ppjJx.js";import{e as Ie,s as qn}from"./masquerade-jcZ_v0Kw.js";import"./reactVendor-CkUTLE5B.js";import"./redux-Bt5-tVzx.js";import"./toolkit-CpEbzTSY.js";import"./lodashEs-CONzB2I0.js";import"../index.js";import"./global-D7Yn0gGb.js";import"./router-DcuTQ_yx.js";import"./muiIcon-BBtg8u0V.js";import"./dropzone-B1UJxEDf.js";import"./dateFns-DubixNBV.js";import"./eCache-97HTO8co.js";import"./form-pKe_k4Gy.js";import"./B3CustomForm-BLuJSiae.js";class Gn{constructor(){Pe(this,"callbacks",new Map)}addEventListener(n,t){var r;if(typeof t!="function"){console.error("callback should be a function");return}if(!this.callbacks.has(n))this.callbacks.set(n,[t]);else{const o=(r=this.callbacks.get(n))!=null?r:[];o.find(s=>s===t)||o.push(t)}}removeEventListener(n,t){var u;if(!this.callbacks.has(n))return!1;const r=(u=this.callbacks.get(n))!=null?u:[],o=r.findIndex(s=>s===t);return o===-1?!1:(r.splice(o,1),this.callbacks.set(n,r),!0)}dispatchEvent(n,t){var s;let r=!0;const o={data:t,preventDefault:()=>{r=!1}};return this.callbacks.has(n)?(((s=this.callbacks.get(n))!=null?s:[]).forEach(a=>{try{a(o)}catch(i){r=!1,i instanceof Error&&He.error(i.message)}}),r):!0}}function f(e,n,t){var a;function r(i,c){var h,l;var p;Object.defineProperty(i,"_zod",{value:(h=i._zod)!=null?h:{},enumerable:!1}),(l=(p=i._zod).traits)!=null||(p.traits=new Set),i._zod.traits.add(e),n(i,c);for(const d in s.prototype)d in i||Object.defineProperty(i,d,{value:s.prototype[d].bind(i)});i._zod.constr=s,i._zod.def=c}const o=(a=t==null?void 0:t.Parent)!=null?a:Object;class u extends o{}Object.defineProperty(u,"name",{value:e});function s(i){var h;var c;const p=t!=null&&t.Parent?new u:this;r(p,i),(h=(c=p._zod).deferred)!=null||(c.deferred=[]);for(const l of p._zod.deferred)l();return p}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:i=>{var c,p;return t!=null&&t.Parent&&i instanceof t.Parent?!0:(p=(c=i==null?void 0:i._zod)==null?void 0:c.traits)==null?void 0:p.has(e)}}),Object.defineProperty(s,"name",{value:e}),s}class F extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Ke extends Error{constructor(n){super("Encountered unidirectional transform during encode: ".concat(n)),this.name="ZodEncodeError"}}const Xe={};function j(e){return Xe}function Qn(e){const n=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>n.indexOf(+r)===-1).map(([r,o])=>o)}function re(e,n){return typeof n=="bigint"?n.toString():n}function se(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function ie(e){return e==null}function ce(e){const n=e.startsWith("^")?1:0,t=e.endsWith("$")?e.length-1:e.length;return e.slice(n,t)}function Wn(e,n){const t=(e.toString().split(".")[1]||"").length,r=n.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const i=r.match(/\d?e-(\d?)/);i!=null&&i[1]&&(o=Number.parseInt(i[1]))}const u=t>o?t:o,s=Number.parseInt(e.toFixed(u).replace(".","")),a=Number.parseInt(n.toFixed(u).replace(".",""));return s%a/10**u}const Te=Symbol("evaluating");function _(e,n,t){let r;Object.defineProperty(e,n,{get(){if(r!==Te)return r===void 0&&(r=Te,r=t()),r},set(o){Object.defineProperty(e,n,{value:o})},configurable:!0})}function Jn(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function N(e,n,t){Object.defineProperty(e,n,{value:t,writable:!0,enumerable:!0,configurable:!0})}function M(...e){const n={};for(const t of e){const r=Object.getOwnPropertyDescriptors(t);Object.assign(n,r)}return Object.defineProperties({},n)}function Oe(e){return JSON.stringify(e)}const en="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Q(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Yn=se(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const n=Function;return new n(""),!0}catch(n){return!1}});function x(e){if(Q(e)===!1)return!1;const n=e.constructor;if(n===void 0)return!0;const t=n.prototype;return!(Q(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function nn(e){return x(e)?{...e}:e}const Hn=new Set(["string","number","symbol"]);function Kn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(e,n,t){const r=new e._zod.constr(n!=null?n:e._zod.def);return(!n||t!=null&&t.parent)&&(r._zod.parent=e),r}function g(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if((n==null?void 0:n.message)!==void 0){if((n==null?void 0:n.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function Xn(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}const et={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function nt(e,n){const t=e._zod.def,r=M(e._zod.def,{get shape(){const o={};for(const u in n){if(!(u in t.shape))throw new Error('Unrecognized key: "'.concat(u,'"'));n[u]&&(o[u]=t.shape[u])}return N(this,"shape",o),o},checks:[]});return A(e,r)}function tt(e,n){const t=e._zod.def,r=M(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const u in n){if(!(u in t.shape))throw new Error('Unrecognized key: "'.concat(u,'"'));n[u]&&delete o[u]}return N(this,"shape",o),o},checks:[]});return A(e,r)}function rt(e,n){if(!x(n))throw new Error("Invalid input to extend: expected a plain object");const t=e._zod.def.checks;if(t&&t.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const o=M(e._zod.def,{get shape(){const u={...e._zod.def.shape,...n};return N(this,"shape",u),u},checks:[]});return A(e,o)}function ot(e,n){if(!x(n))throw new Error("Invalid input to safeExtend: expected a plain object");const t={...e._zod.def,get shape(){const r={...e._zod.def.shape,...n};return N(this,"shape",r),r},checks:e._zod.def.checks};return A(e,t)}function ut(e,n){const t=M(e._zod.def,{get shape(){const r={...e._zod.def.shape,...n._zod.def.shape};return N(this,"shape",r),r},get catchall(){return n._zod.def.catchall},checks:[]});return A(e,t)}function st(e,n,t){const r=M(n._zod.def,{get shape(){const o=n._zod.def.shape,u={...o};if(t)for(const s in t){if(!(s in o))throw new Error('Unrecognized key: "'.concat(s,'"'));t[s]&&(u[s]=e?new e({type:"optional",innerType:o[s]}):o[s])}else for(const s in o)u[s]=e?new e({type:"optional",innerType:o[s]}):o[s];return N(this,"shape",u),u},checks:[]});return A(n,r)}function it(e,n,t){const r=M(n._zod.def,{get shape(){const o=n._zod.def.shape,u={...o};if(t)for(const s in t){if(!(s in u))throw new Error('Unrecognized key: "'.concat(s,'"'));t[s]&&(u[s]=new e({type:"nonoptional",innerType:o[s]}))}else for(const s in o)u[s]=new e({type:"nonoptional",innerType:o[s]});return N(this,"shape",u),u},checks:[]});return A(n,r)}function B(e,n=0){var t;if(e.aborted===!0)return!0;for(let r=n;r<e.issues.length;r++)if(((t=e.issues[r])==null?void 0:t.continue)!==!0)return!0;return!1}function tn(e,n){return n.map(t=>{var o;var r;return(o=(r=t).path)!=null||(r.path=[]),t.path.unshift(e),t})}function U(e){return typeof e=="string"?e:e==null?void 0:e.message}function R(e,n,t){var o,u,s,a,i,c,p,h,l,d,b;const r={...e,path:(o=e.path)!=null?o:[]};if(!e.message){const Z=(b=(d=(h=(c=U((a=(s=(u=e.inst)==null?void 0:u._zod.def)==null?void 0:s.error)==null?void 0:a.call(s,e)))!=null?c:U((i=n==null?void 0:n.error)==null?void 0:i.call(n,e)))!=null?h:U((p=t.customError)==null?void 0:p.call(t,e)))!=null?d:U((l=t.localeError)==null?void 0:l.call(t,e)))!=null?b:"Invalid input";r.message=Z}return delete r.inst,delete r.continue,n!=null&&n.reportInput||delete r.input,r}function ae(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function D(...e){const[n,t,r]=e;return typeof n=="string"?{message:n,code:"custom",input:t,inst:r}:{...n}}const rn=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,re,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},on=f("$ZodError",rn),un=f("$ZodError",rn,{Parent:Error});function ct(e,n=t=>t.message){const t={},r=[];for(const o of e.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(n(o))):r.push(n(o));return{formErrors:r,fieldErrors:t}}function at(e,n){const t=n||function(u){return u.message},r={_errors:[]},o=u=>{for(const s of u.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>o({issues:a}));else if(s.code==="invalid_key")o({issues:s.issues});else if(s.code==="invalid_element")o({issues:s.issues});else if(s.path.length===0)r._errors.push(t(s));else{let a=r,i=0;for(;i<s.path.length;){const c=s.path[i];i===s.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(s))):a[c]=a[c]||{_errors:[]},a=a[c],i++}}};return o(e),r}const le=e=>(n,t,r,o)=>{var a;const u=r?Object.assign(r,{async:!1}):{async:!1},s=n._zod.run({value:t,issues:[]},u);if(s instanceof Promise)throw new F;if(s.issues.length){const i=new((a=o==null?void 0:o.Err)!=null?a:e)(s.issues.map(c=>R(c,u,j())));throw en(i,o==null?void 0:o.callee),i}return s.value},de=e=>async(n,t,r,o)=>{var a;const u=r?Object.assign(r,{async:!0}):{async:!0};let s=n._zod.run({value:t,issues:[]},u);if(s instanceof Promise&&(s=await s),s.issues.length){const i=new((a=o==null?void 0:o.Err)!=null?a:e)(s.issues.map(c=>R(c,u,j())));throw en(i,o==null?void 0:o.callee),i}return s.value},J=e=>(n,t,r)=>{const o=r?{...r,async:!1}:{async:!1},u=n._zod.run({value:t,issues:[]},o);if(u instanceof Promise)throw new F;return u.issues.length?{success:!1,error:new(e!=null?e:on)(u.issues.map(s=>R(s,o,j())))}:{success:!0,data:u.value}},lt=J(un),Y=e=>async(n,t,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let u=n._zod.run({value:t,issues:[]},o);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new e(u.issues.map(s=>R(s,o,j())))}:{success:!0,data:u.value}},dt=Y(un),ft=e=>(n,t,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return le(e)(n,t,o)},pt=e=>(n,t,r)=>le(e)(n,t,r),ht=e=>async(n,t,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return de(e)(n,t,o)},mt=e=>async(n,t,r)=>de(e)(n,t,r),_t=e=>(n,t,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return J(e)(n,t,o)},gt=e=>(n,t,r)=>J(e)(n,t,r),vt=e=>async(n,t,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Y(e)(n,t,o)},bt=e=>async(n,t,r)=>Y(e)(n,t,r),zt=/^\d+$/,wt=/^-?\d+(?:\.\d+)?/i,I=f("$ZodCheck",(e,n)=>{var r,o;var t;(r=e._zod)!=null||(e._zod={}),e._zod.def=n,(o=(t=e._zod).onattach)!=null||(t.onattach=[])}),sn={number:"number",bigint:"bigint",object:"date"},cn=f("$ZodCheckLessThan",(e,n)=>{I.init(e,n);const t=sn[typeof n.value];e._zod.onattach.push(r=>{var s;const o=r._zod.bag,u=(s=n.inclusive?o.maximum:o.exclusiveMaximum)!=null?s:Number.POSITIVE_INFINITY;n.value<u&&(n.inclusive?o.maximum=n.value:o.exclusiveMaximum=n.value)}),e._zod.check=r=>{(n.inclusive?r.value<=n.value:r.value<n.value)||r.issues.push({origin:t,code:"too_big",maximum:n.value,input:r.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),an=f("$ZodCheckGreaterThan",(e,n)=>{I.init(e,n);const t=sn[typeof n.value];e._zod.onattach.push(r=>{var s;const o=r._zod.bag,u=(s=n.inclusive?o.minimum:o.exclusiveMinimum)!=null?s:Number.NEGATIVE_INFINITY;n.value>u&&(n.inclusive?o.minimum=n.value:o.exclusiveMinimum=n.value)}),e._zod.check=r=>{(n.inclusive?r.value>=n.value:r.value>n.value)||r.issues.push({origin:t,code:"too_small",minimum:n.value,input:r.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),yt=f("$ZodCheckMultipleOf",(e,n)=>{I.init(e,n),e._zod.onattach.push(t=>{var o;var r;(o=(r=t._zod.bag).multipleOf)!=null||(r.multipleOf=n.value)}),e._zod.check=t=>{if(typeof t.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof t.value=="bigint"?t.value%n.value===BigInt(0):Wn(t.value,n.value)===0)||t.issues.push({origin:typeof t.value,code:"not_multiple_of",divisor:n.value,input:t.value,inst:e,continue:!n.abort})}}),kt=f("$ZodCheckNumberFormat",(e,n)=>{var s;I.init(e,n),n.format=n.format||"float64";const t=(s=n.format)==null?void 0:s.includes("int"),r=t?"int":"number",[o,u]=et[n.format];e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=n.format,i.minimum=o,i.maximum=u,t&&(i.pattern=zt)}),e._zod.check=a=>{const i=a.value;if(t){if(!Number.isInteger(i)){a.issues.push({expected:r,format:n.format,code:"invalid_type",continue:!1,input:i,inst:e});return}if(!Number.isSafeInteger(i)){i>0?a.issues.push({input:i,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!n.abort}):a.issues.push({input:i,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!n.abort});return}}i<o&&a.issues.push({origin:"number",input:i,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!n.abort}),i>u&&a.issues.push({origin:"number",input:i,code:"too_big",maximum:u,inst:e})}}),Et=f("$ZodCheckMaxLength",(e,n)=>{var r;var t;I.init(e,n),(r=(t=e._zod.def).when)!=null||(t.when=o=>{const u=o.value;return!ie(u)&&u.length!==void 0}),e._zod.onattach.push(o=>{var s;const u=(s=o._zod.bag.maximum)!=null?s:Number.POSITIVE_INFINITY;n.maximum<u&&(o._zod.bag.maximum=n.maximum)}),e._zod.check=o=>{const u=o.value;if(u.length<=n.maximum)return;const a=ae(u);o.issues.push({origin:a,code:"too_big",maximum:n.maximum,inclusive:!0,input:u,inst:e,continue:!n.abort})}}),Pt=f("$ZodCheckMinLength",(e,n)=>{var r;var t;I.init(e,n),(r=(t=e._zod.def).when)!=null||(t.when=o=>{const u=o.value;return!ie(u)&&u.length!==void 0}),e._zod.onattach.push(o=>{var s;const u=(s=o._zod.bag.minimum)!=null?s:Number.NEGATIVE_INFINITY;n.minimum>u&&(o._zod.bag.minimum=n.minimum)}),e._zod.check=o=>{const u=o.value;if(u.length>=n.minimum)return;const a=ae(u);o.issues.push({origin:a,code:"too_small",minimum:n.minimum,inclusive:!0,input:u,inst:e,continue:!n.abort})}}),$t=f("$ZodCheckLengthEquals",(e,n)=>{var r;var t;I.init(e,n),(r=(t=e._zod.def).when)!=null||(t.when=o=>{const u=o.value;return!ie(u)&&u.length!==void 0}),e._zod.onattach.push(o=>{const u=o._zod.bag;u.minimum=n.length,u.maximum=n.length,u.length=n.length}),e._zod.check=o=>{const u=o.value,s=u.length;if(s===n.length)return;const a=ae(u),i=s>n.length;o.issues.push({origin:a,...i?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!n.abort})}}),Zt=f("$ZodCheckOverwrite",(e,n)=>{I.init(e,n),e._zod.check=t=>{t.value=n.tx(t.value)}});class It{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const r=n.split("\n").filter(s=>s),o=Math.min(...r.map(s=>s.length-s.trimStart().length)),u=r.map(s=>s.slice(o)).map(s=>" ".repeat(this.indent*2)+s);for(const s of u)this.content.push(s)}compile(){var u;const n=Function,t=this==null?void 0:this.args,o=[...((u=this==null?void 0:this.content)!=null?u:[""]).map(s=>"  ".concat(s))];return new n(...t,o.join("\n"))}}const Tt={major:4,minor:1,patch:5},v=f("$ZodType",(e,n)=>{var o,u,s;var t;e!=null||(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=Tt;const r=[...(o=e._zod.def.checks)!=null?o:[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const a of r)for(const i of a._zod.onattach)i(e);if(r.length===0)(u=(t=e._zod).deferred)!=null||(t.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const a=(c,p,h)=>{let l=B(c),d;for(const b of p){if(b._zod.def.when){if(!b._zod.def.when(c))continue}else if(l)continue;const Z=c.issues.length,T=b._zod.check(c);if(T instanceof Promise&&(h==null?void 0:h.async)===!1)throw new F;if(d||T instanceof Promise)d=(d!=null?d:Promise.resolve()).then(async()=>{await T,c.issues.length!==Z&&(l||(l=B(c,Z)))});else{if(c.issues.length===Z)continue;l||(l=B(c,Z))}}return d?d.then(()=>c):c},i=(c,p,h)=>{if(B(c))return c.aborted=!0,c;const l=a(p,r,h);if(l instanceof Promise){if(h.async===!1)throw new F;return l.then(d=>e._zod.parse(d,h))}return e._zod.parse(l,h)};e._zod.run=(c,p)=>{if(p.skipChecks)return e._zod.parse(c,p);if(p.direction==="backward"){const l=e._zod.parse({value:c.value,issues:[]},{...p,skipChecks:!0});return l instanceof Promise?l.then(d=>i(d,c,p)):i(l,c,p)}const h=e._zod.parse(c,p);if(h instanceof Promise){if(p.async===!1)throw new F;return h.then(l=>a(l,r,p))}return a(h,r,p)}}e["~standard"]={validate:a=>{var i;try{const c=lt(e,a);return c.success?{value:c.data}:{issues:(i=c.error)==null?void 0:i.issues}}catch(c){return dt(e,a).then(p=>{var h;return p.success?{value:p.data}:{issues:(h=p.error)==null?void 0:h.issues}})}},vendor:"zod",version:1}}),ln=f("$ZodNumber",(e,n)=>{var t;v.init(e,n),e._zod.pattern=(t=e._zod.bag.pattern)!=null?t:wt,e._zod.parse=(r,o)=>{if(n.coerce)try{r.value=Number(r.value)}catch(a){}const u=r.value;if(typeof u=="number"&&!Number.isNaN(u)&&Number.isFinite(u))return r;const s=typeof u=="number"?Number.isNaN(u)?"NaN":Number.isFinite(u)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:u,inst:e,...s?{received:s}:{}}),r}}),Ot=f("$ZodNumber",(e,n)=>{kt.init(e,n),ln.init(e,n)}),Nt=f("$ZodUnknown",(e,n)=>{v.init(e,n),e._zod.parse=t=>t}),At=f("$ZodNever",(e,n)=>{v.init(e,n),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function Ne(e,n,t){e.issues.length&&n.issues.push(...tn(t,e.issues)),n.value[t]=e.value}const Ct=f("$ZodArray",(e,n)=>{v.init(e,n),e._zod.parse=(t,r)=>{const o=t.value;if(!Array.isArray(o))return t.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),t;t.value=Array(o.length);const u=[];for(let s=0;s<o.length;s++){const a=o[s],i=n.element._zod.run({value:a,issues:[]},r);i instanceof Promise?u.push(i.then(c=>Ne(c,t,s))):Ne(i,t,s)}return u.length?Promise.all(u).then(()=>t):t}});function W(e,n,t,r){e.issues.length&&n.issues.push(...tn(t,e.issues)),e.value===void 0?t in r&&(n.value[t]=void 0):n.value[t]=e.value}function dn(e){const n=Object.keys(e.shape);for(const r of n)if(!e.shape[r]._zod.traits.has("$ZodType"))throw new Error('Invalid element at key "'.concat(r,'": expected a Zod schema'));const t=Xn(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(t)}}function fn(e,n,t,r,o,u){const s=[],a=o.keySet,i=o.catchall._zod,c=i.def.type;for(const p of Object.keys(n)){if(a.has(p))continue;if(c==="never"){s.push(p);continue}const h=i.run({value:n[p],issues:[]},r);h instanceof Promise?e.push(h.then(l=>W(l,t,p,n))):W(h,t,p,n)}return s.length&&t.issues.push({code:"unrecognized_keys",keys:s,input:n,inst:u}),e.length?Promise.all(e).then(()=>t):t}const St=f("$ZodObject",(e,n)=>{v.init(e,n);const t=se(()=>dn(n));_(e._zod,"propValues",()=>{var i;const s=n.shape,a={};for(const c in s){const p=s[c]._zod;if(p.values){(i=a[c])!=null||(a[c]=new Set);for(const h of p.values)a[c].add(h)}}return a});const r=Q,o=n.catchall;let u;e._zod.parse=(s,a)=>{u!=null||(u=t.value);const i=s.value;if(!r(i))return s.issues.push({expected:"object",code:"invalid_type",input:i,inst:e}),s;s.value={};const c=[],p=u.shape;for(const h of u.keys){const d=p[h]._zod.run({value:i[h],issues:[]},a);d instanceof Promise?c.push(d.then(b=>W(b,s,h,i))):W(d,s,h,i)}return o?fn(c,i,s,a,t.value,e):c.length?Promise.all(c).then(()=>s):s}}),jt=f("$ZodObjectJIT",(e,n)=>{St.init(e,n);const t=e._zod.parse,r=se(()=>dn(n)),o=l=>{const d=new It(["shape","payload","ctx"]),b=r.value,Z=E=>{const k=Oe(E);return"shape[".concat(k,"]._zod.run({ value: input[").concat(k,"], issues: [] }, ctx)")};d.write("const input = payload.value;");const T=Object.create(null);let L=0;for(const E of b.keys)T[E]="key_".concat(L++);d.write("const newResult = {}");for(const E of b.keys){const k=T[E],O=Oe(E);d.write("const ".concat(k," = ").concat(Z(E),";")),d.write("\n        if (".concat(k,".issues.length) {\n          payload.issues = payload.issues.concat(").concat(k,".issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [").concat(O,", ...iss.path] : [").concat(O,"]\n          })));\n        }\n        \n        if (").concat(k,".value === undefined) {\n          if (").concat(O," in input) {\n            newResult[").concat(O,"] = undefined;\n          }\n        } else {\n          newResult[").concat(O,"] = ").concat(k,".value;\n        }\n      "))}d.write("payload.value = newResult;"),d.write("return payload;");const H=d.compile();return(E,k)=>H(l,E,k)};let u;const s=Q,a=!Xe.jitless,c=a&&Yn.value,p=n.catchall;let h;e._zod.parse=(l,d)=>{h!=null||(h=r.value);const b=l.value;return s(b)?a&&c&&(d==null?void 0:d.async)===!1&&d.jitless!==!0?(u||(u=o(n.shape)),l=u(l,d),p?fn([],b,l,d,h,e):l):t(l,d):(l.issues.push({expected:"object",code:"invalid_type",input:b,inst:e}),l)}});function Ae(e,n,t,r){for(const u of e)if(u.issues.length===0)return n.value=u.value,n;const o=e.filter(u=>!B(u));return o.length===1?(n.value=o[0].value,o[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:t,errors:e.map(u=>u.issues.map(s=>R(s,r,j())))}),n)}const Rt=f("$ZodUnion",(e,n)=>{v.init(e,n),_(e._zod,"optin",()=>n.options.some(o=>o._zod.optin==="optional")?"optional":void 0),_(e._zod,"optout",()=>n.options.some(o=>o._zod.optout==="optional")?"optional":void 0),_(e._zod,"values",()=>{if(n.options.every(o=>o._zod.values))return new Set(n.options.flatMap(o=>Array.from(o._zod.values)))}),_(e._zod,"pattern",()=>{if(n.options.every(o=>o._zod.pattern)){const o=n.options.map(u=>u._zod.pattern);return new RegExp("^(".concat(o.map(u=>ce(u.source)).join("|"),")$"))}});const t=n.options.length===1,r=n.options[0]._zod.run;e._zod.parse=(o,u)=>{if(t)return r(o,u);let s=!1;const a=[];for(const i of n.options){const c=i._zod.run({value:o.value,issues:[]},u);if(c instanceof Promise)a.push(c),s=!0;else{if(c.issues.length===0)return c;a.push(c)}}return s?Promise.all(a).then(i=>Ae(i,o,e,u)):Ae(a,o,e,u)}}),Lt=f("$ZodIntersection",(e,n)=>{v.init(e,n),e._zod.parse=(t,r)=>{const o=t.value,u=n.left._zod.run({value:o,issues:[]},r),s=n.right._zod.run({value:o,issues:[]},r);return u instanceof Promise||s instanceof Promise?Promise.all([u,s]).then(([i,c])=>Ce(t,i,c)):Ce(t,u,s)}});function oe(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(x(e)&&x(n)){const t=Object.keys(n),r=Object.keys(e).filter(u=>t.indexOf(u)!==-1),o={...e,...n};for(const u of r){const s=oe(e[u],n[u]);if(!s.valid)return{valid:!1,mergeErrorPath:[u,...s.mergeErrorPath]};o[u]=s.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let r=0;r<e.length;r++){const o=e[r],u=n[r],s=oe(o,u);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};t.push(s.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function Ce(e,n,t){if(n.issues.length&&e.issues.push(...n.issues),t.issues.length&&e.issues.push(...t.issues),B(e))return e;const r=oe(n.value,t.value);if(!r.valid)throw new Error("Unmergable intersection. Error path: "+"".concat(JSON.stringify(r.mergeErrorPath)));return e.value=r.data,e}const Bt=f("$ZodEnum",(e,n)=>{v.init(e,n);const t=Qn(n.entries),r=new Set(t);e._zod.values=r,e._zod.pattern=new RegExp("^(".concat(t.filter(o=>Hn.has(typeof o)).map(o=>typeof o=="string"?Kn(o):o.toString()).join("|"),")$")),e._zod.parse=(o,u)=>{const s=o.value;return r.has(s)||o.issues.push({code:"invalid_value",values:t,input:s,inst:e}),o}}),Ft=f("$ZodTransform",(e,n)=>{v.init(e,n),e._zod.parse=(t,r)=>{if(r.direction==="backward")throw new Ke(e.constructor.name);const o=n.transform(t.value,t);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(s=>(t.value=s,t));if(o instanceof Promise)throw new F;return t.value=o,t}});function Se(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const Mt=f("$ZodOptional",(e,n)=>{v.init(e,n),e._zod.optin="optional",e._zod.optout="optional",_(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),_(e._zod,"pattern",()=>{const t=n.innerType._zod.pattern;return t?new RegExp("^(".concat(ce(t.source),")?$")):void 0}),e._zod.parse=(t,r)=>{if(n.innerType._zod.optin==="optional"){const o=n.innerType._zod.run(t,r);return o instanceof Promise?o.then(u=>Se(u,t.value)):Se(o,t.value)}return t.value===void 0?t:n.innerType._zod.run(t,r)}}),xt=f("$ZodNullable",(e,n)=>{v.init(e,n),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),_(e._zod,"pattern",()=>{const t=n.innerType._zod.pattern;return t?new RegExp("^(".concat(ce(t.source),"|null)$")):void 0}),_(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(t,r)=>t.value===null?t:n.innerType._zod.run(t,r)}),Dt=f("$ZodDefault",(e,n)=>{v.init(e,n),e._zod.optin="optional",_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>{if(r.direction==="backward")return n.innerType._zod.run(t,r);if(t.value===void 0)return t.value=n.defaultValue,t;const o=n.innerType._zod.run(t,r);return o instanceof Promise?o.then(u=>je(u,n)):je(o,n)}});function je(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const Vt=f("$ZodPrefault",(e,n)=>{v.init(e,n),e._zod.optin="optional",_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>(r.direction==="backward"||t.value===void 0&&(t.value=n.defaultValue),n.innerType._zod.run(t,r))}),Ut=f("$ZodNonOptional",(e,n)=>{v.init(e,n),_(e._zod,"values",()=>{const t=n.innerType._zod.values;return t?new Set([...t].filter(r=>r!==void 0)):void 0}),e._zod.parse=(t,r)=>{const o=n.innerType._zod.run(t,r);return o instanceof Promise?o.then(u=>Re(u,e)):Re(o,e)}});function Re(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const qt=f("$ZodCatch",(e,n)=>{v.init(e,n),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),_(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(t,r)=>{if(r.direction==="backward")return n.innerType._zod.run(t,r);const o=n.innerType._zod.run(t,r);return o instanceof Promise?o.then(u=>(t.value=u.value,u.issues.length&&(t.value=n.catchValue({...t,error:{issues:u.issues.map(s=>R(s,r,j()))},input:t.value}),t.issues=[]),t)):(t.value=o.value,o.issues.length&&(t.value=n.catchValue({...t,error:{issues:o.issues.map(u=>R(u,r,j()))},input:t.value}),t.issues=[]),t)}}),Gt=f("$ZodPipe",(e,n)=>{v.init(e,n),_(e._zod,"values",()=>n.in._zod.values),_(e._zod,"optin",()=>n.in._zod.optin),_(e._zod,"optout",()=>n.out._zod.optout),_(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(t,r)=>{if(r.direction==="backward"){const u=n.out._zod.run(t,r);return u instanceof Promise?u.then(s=>q(s,n.in,r)):q(u,n.in,r)}const o=n.in._zod.run(t,r);return o instanceof Promise?o.then(u=>q(u,n.out,r)):q(o,n.out,r)}});function q(e,n,t){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},t)}const Qt=f("$ZodReadonly",(e,n)=>{v.init(e,n),_(e._zod,"propValues",()=>n.innerType._zod.propValues),_(e._zod,"values",()=>n.innerType._zod.values),_(e._zod,"optin",()=>n.innerType._zod.optin),_(e._zod,"optout",()=>n.innerType._zod.optout),e._zod.parse=(t,r)=>{if(r.direction==="backward")return n.innerType._zod.run(t,r);const o=n.innerType._zod.run(t,r);return o instanceof Promise?o.then(Le):Le(o)}});function Le(e){return e.value=Object.freeze(e.value),e}const Wt=f("$ZodCustom",(e,n)=>{I.init(e,n),v.init(e,n),e._zod.parse=(t,r)=>t,e._zod.check=t=>{const r=t.value,o=n.fn(r);if(o instanceof Promise)return o.then(u=>Be(u,t,r,e));Be(o,t,r,e)}});function Be(e,n,t,r){var o;if(!e){const u={code:"custom",input:t,inst:r,path:[...(o=r._zod.def.path)!=null?o:[]],continue:!r._zod.def.abort};r._zod.def.params&&(u.params=r._zod.def.params),n.issues.push(D(u))}}class Jt{constructor(){this._map=new Map,this._idmap=new Map}add(n,...t){const r=t[0];if(this._map.set(n,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error("ID ".concat(r.id," already exists in the registry"));this._idmap.set(r.id,n)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(n){const t=this._map.get(n);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(n),this}get(n){var r;const t=n._zod.parent;if(t){const o={...(r=this.get(t))!=null?r:{}};delete o.id;const u={...o,...this._map.get(n)};return Object.keys(u).length?u:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function Yt(){return new Jt}const G=Yt();function Ht(e,n){return new e({type:"number",checks:[],...g(n)})}function Kt(e,n){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...g(n)})}function Xt(e){return new e({type:"unknown"})}function er(e,n){return new e({type:"never",...g(n)})}function Fe(e,n){return new cn({check:"less_than",...g(n),value:e,inclusive:!1})}function ee(e,n){return new cn({check:"less_than",...g(n),value:e,inclusive:!0})}function Me(e,n){return new an({check:"greater_than",...g(n),value:e,inclusive:!1})}function ne(e,n){return new an({check:"greater_than",...g(n),value:e,inclusive:!0})}function xe(e,n){return new yt({check:"multiple_of",...g(n),value:e})}function nr(e,n){return new Et({check:"max_length",...g(n),maximum:e})}function De(e,n){return new Pt({check:"min_length",...g(n),minimum:e})}function tr(e,n){return new $t({check:"length_equals",...g(n),length:e})}function rr(e){return new Zt({check:"overwrite",tx:e})}function or(e,n,t){return new e({type:"array",element:n,...g(t)})}function ur(e,n,t){return new e({type:"custom",check:"custom",fn:n,...g(t)})}function sr(e){const n=ir(t=>(t.addIssue=r=>{var o,u,s,a;if(typeof r=="string")t.issues.push(D(r,t.value,n._zod.def));else{const i=r;i.fatal&&(i.continue=!1),(o=i.code)!=null||(i.code="custom"),(u=i.input)!=null||(i.input=t.value),(s=i.inst)!=null||(i.inst=n),(a=i.continue)!=null||(i.continue=!n._zod.def.abort),t.issues.push(D(i))}},e(t.value,t)));return n}function ir(e,n){const t=new I({check:"custom",...g(n)});return t._zod.check=e,t}const cr=(e,n)=>{on.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>at(e,t)},flatten:{value:t=>ct(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,re,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,re,2)}},isEmpty:{get(){return e.issues.length===0}}})},$=f("ZodError",cr,{Parent:Error}),ar=le($),lr=de($),dr=J($),fr=Y($),pr=ft($),hr=pt($),mr=ht($),_r=mt($),gr=_t($),vr=gt($),br=vt($),zr=bt($),z=f("ZodType",(e,n)=>(v.init(e,n),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...t)=>{var r;return e.clone({...n,checks:[...(r=n.checks)!=null?r:[],...t.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]})},e.clone=(t,r)=>A(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>ar(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>dr(e,t,r),e.parseAsync=async(t,r)=>lr(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>fr(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>pr(e,t,r),e.decode=(t,r)=>hr(e,t,r),e.encodeAsync=async(t,r)=>mr(e,t,r),e.decodeAsync=async(t,r)=>_r(e,t,r),e.safeEncode=(t,r)=>gr(e,t,r),e.safeDecode=(t,r)=>vr(e,t,r),e.safeEncodeAsync=async(t,r)=>br(e,t,r),e.safeDecodeAsync=async(t,r)=>zr(e,t,r),e.refine=(t,r)=>e.check(Qr(t,r)),e.superRefine=t=>e.check(Wr(t)),e.overwrite=t=>e.check(rr(t)),e.optional=()=>Ge(e),e.nullable=()=>Qe(e),e.nullish=()=>Ge(Qe(e)),e.nonoptional=t=>Mr(e,t),e.array=()=>hn(e),e.or=t=>Tr([e,t]),e.and=t=>Nr(e,t),e.transform=t=>We(e,Sr(t)),e.default=t=>Lr(e,t),e.prefault=t=>Fr(e,t),e.catch=t=>Dr(e,t),e.pipe=t=>We(e,t),e.readonly=()=>qr(e),e.describe=t=>{const r=e.clone();return G.add(r,{description:t}),r},Object.defineProperty(e,"description",{get(){var t;return(t=G.get(e))==null?void 0:t.description},configurable:!0}),e.meta=(...t)=>{if(t.length===0)return G.get(e);const r=e.clone();return G.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),pn=f("ZodNumber",(e,n)=>{var r,o,u,s,a,i,c,p,h;ln.init(e,n),z.init(e,n),e.gt=(l,d)=>e.check(Me(l,d)),e.gte=(l,d)=>e.check(ne(l,d)),e.min=(l,d)=>e.check(ne(l,d)),e.lt=(l,d)=>e.check(Fe(l,d)),e.lte=(l,d)=>e.check(ee(l,d)),e.max=(l,d)=>e.check(ee(l,d)),e.int=l=>e.check(Ue(l)),e.safe=l=>e.check(Ue(l)),e.positive=l=>e.check(Me(0,l)),e.nonnegative=l=>e.check(ne(0,l)),e.negative=l=>e.check(Fe(0,l)),e.nonpositive=l=>e.check(ee(0,l)),e.multipleOf=(l,d)=>e.check(xe(l,d)),e.step=(l,d)=>e.check(xe(l,d)),e.finite=()=>e;const t=e._zod.bag;e.minValue=(u=Math.max((r=t.minimum)!=null?r:Number.NEGATIVE_INFINITY,(o=t.exclusiveMinimum)!=null?o:Number.NEGATIVE_INFINITY))!=null?u:null,e.maxValue=(i=Math.min((s=t.maximum)!=null?s:Number.POSITIVE_INFINITY,(a=t.exclusiveMaximum)!=null?a:Number.POSITIVE_INFINITY))!=null?i:null,e.isInt=((c=t.format)!=null?c:"").includes("int")||Number.isSafeInteger((p=t.multipleOf)!=null?p:.5),e.isFinite=!0,e.format=(h=t.format)!=null?h:null});function Ve(e){return Ht(pn,e)}const wr=f("ZodNumberFormat",(e,n)=>{Ot.init(e,n),pn.init(e,n)});function Ue(e){return Kt(wr,e)}const yr=f("ZodUnknown",(e,n)=>{Nt.init(e,n),z.init(e,n)});function qe(){return Xt(yr)}const kr=f("ZodNever",(e,n)=>{At.init(e,n),z.init(e,n)});function Er(e){return er(kr,e)}const Pr=f("ZodArray",(e,n)=>{Ct.init(e,n),z.init(e,n),e.element=n.element,e.min=(t,r)=>e.check(De(t,r)),e.nonempty=t=>e.check(De(1,t)),e.max=(t,r)=>e.check(nr(t,r)),e.length=(t,r)=>e.check(tr(t,r)),e.unwrap=()=>e.element});function hn(e,n){return or(Pr,e,n)}const $r=f("ZodObject",(e,n)=>{jt.init(e,n),z.init(e,n),_(e,"shape",()=>n.shape),e.keyof=()=>Ar(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:qe()}),e.loose=()=>e.clone({...e._zod.def,catchall:qe()}),e.strict=()=>e.clone({...e._zod.def,catchall:Er()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>rt(e,t),e.safeExtend=t=>ot(e,t),e.merge=t=>ut(e,t),e.pick=t=>nt(e,t),e.omit=t=>tt(e,t),e.partial=(...t)=>st(mn,e,t[0]),e.required=(...t)=>it(_n,e,t[0])});function Zr(e,n){const t={type:"object",get shape(){return N(this,"shape",e?Jn(e):{}),this.shape},...g(n)};return new $r(t)}const Ir=f("ZodUnion",(e,n)=>{Rt.init(e,n),z.init(e,n),e.options=n.options});function Tr(e,n){return new Ir({type:"union",options:e,...g(n)})}const Or=f("ZodIntersection",(e,n)=>{Lt.init(e,n),z.init(e,n)});function Nr(e,n){return new Or({type:"intersection",left:e,right:n})}const ue=f("ZodEnum",(e,n)=>{Bt.init(e,n),z.init(e,n),e.enum=n.entries,e.options=Object.values(n.entries);const t=new Set(Object.keys(n.entries));e.extract=(r,o)=>{const u={};for(const s of r)if(t.has(s))u[s]=n.entries[s];else throw new Error("Key ".concat(s," not found in enum"));return new ue({...n,checks:[],...g(o),entries:u})},e.exclude=(r,o)=>{const u={...n.entries};for(const s of r)if(t.has(s))delete u[s];else throw new Error("Key ".concat(s," not found in enum"));return new ue({...n,checks:[],...g(o),entries:u})}});function Ar(e,n){const t=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new ue({type:"enum",entries:t,...g(n)})}const Cr=f("ZodTransform",(e,n)=>{Ft.init(e,n),z.init(e,n),e._zod.parse=(t,r)=>{if(r.direction==="backward")throw new Ke(e.constructor.name);t.addIssue=u=>{var s,a,i;if(typeof u=="string")t.issues.push(D(u,t.value,n));else{const c=u;c.fatal&&(c.continue=!1),(s=c.code)!=null||(c.code="custom"),(a=c.input)!=null||(c.input=t.value),(i=c.inst)!=null||(c.inst=e),t.issues.push(D(c))}};const o=n.transform(t.value,t);return o instanceof Promise?o.then(u=>(t.value=u,t)):(t.value=o,t)}});function Sr(e){return new Cr({type:"transform",transform:e})}const mn=f("ZodOptional",(e,n)=>{Mt.init(e,n),z.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Ge(e){return new mn({type:"optional",innerType:e})}const jr=f("ZodNullable",(e,n)=>{xt.init(e,n),z.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Qe(e){return new jr({type:"nullable",innerType:e})}const Rr=f("ZodDefault",(e,n)=>{Dt.init(e,n),z.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Lr(e,n){return new Rr({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():nn(n)}})}const Br=f("ZodPrefault",(e,n)=>{Vt.init(e,n),z.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Fr(e,n){return new Br({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():nn(n)}})}const _n=f("ZodNonOptional",(e,n)=>{Ut.init(e,n),z.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Mr(e,n){return new _n({type:"nonoptional",innerType:e,...g(n)})}const xr=f("ZodCatch",(e,n)=>{qt.init(e,n),z.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Dr(e,n){return new xr({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const Vr=f("ZodPipe",(e,n)=>{Gt.init(e,n),z.init(e,n),e.in=n.in,e.out=n.out});function We(e,n){return new Vr({type:"pipe",in:e,out:n})}const Ur=f("ZodReadonly",(e,n)=>{Qt.init(e,n),z.init(e,n),e.unwrap=()=>e._zod.def.innerType});function qr(e){return new Ur({type:"readonly",innerType:e})}const Gr=f("ZodCustom",(e,n)=>{Wt.init(e,n),z.init(e,n)});function Qr(e,n={}){return ur(Gr,e,n)}function Wr(e){return sr(e)}const Jr=hn(Zr({optionEntityId:Ve(),valueEntityId:Ve()})),Yr=({query:e,variables:n})=>zn==="bigcommerce"?te.graphqlBC({query:e,variables:n}):te.graphqlBCProxy({query:e,variables:n}),Je=async({selectedOptions:e=[],productEntityId:n})=>{const{data:t}=await Yr({query:"\n    query ProductsWithOptionSelections (\n      $productId: Int!,\n      $optionValueIds: [OptionValueId!]\n    ) {\n      site {\n        productWithSelectedOptions: product(\n          entityId: $productId\n          optionValueIds: $optionValueIds\n        ) {\n          sku\n        }\n      }\n    }",variables:{productId:n,optionValueIds:Jr.parse(e)}});return t.site.productWithSelectedOptions.sku},Ye=e=>e.map(n=>{var r,o;const t=(o=(r=n.selectedOptions)==null?void 0:r.reduce((u,{optionEntityId:s,optionValueEntityId:a})=>(u["attribute[".concat(s,"]")]=a,u),{}))!=null?o:{};return{...n,productId:n.productEntityId,selectedOptions:t,optionSelections:t}}),Hr=new Gn;function ko({setOpenPage:e}){const n=wn(),t=yn(),r=kn(),{state:o}=y.useContext(En),u=S(Pn),s=S(({b2bFeatures:P})=>P.masqueradeCompany.id),a=S(({company:P})=>P.customer),i=S(({company:P})=>P.customer.role),c=S($n),p=S(({b2bFeatures:P})=>P.masqueradeCompany.isAgenting),h=S(({company:P})=>P.tokens.B2BToken),l=Bn(),{state:{addQuoteBtn:d,shoppingListBtn:b,addToAllQuoteBtn:Z}}=y.useContext(Zn),{addToQuoteFromCart:T,addToQuoteFromCookie:L}=In(e,r),{registerEnabled:H,productQuoteEnabled:E,cartQuoteEnabled:k,shoppingListEnabled:O,quoteConfig:fe}=o,gn=()=>{e({isOpen:!0,openUrl:"/register"})},pe=a.id,K=y.useRef(Number(s)),he=y.useRef(pe),C=y.useRef(a),me=y.useRef(Number(i)),X=y.useRef(u),_e=y.useRef(E),ge=y.useRef(O),ve=y.useRef(k),be=y.useRef(d),ze=y.useRef(b),we=y.useRef(Z);return K.current=Number(s),he.current=pe,C.current=a,me.current=Number(i),X.current=u,_e.current=E,ge.current=O,ve.current=k,be.current=d,ze.current=b,we.current=Z,y.useEffect(()=>{var P,ye,ke,Ee;window.b2b={...window.b2b,callbacks:Hr,utils:{getRoutes:()=>Tn(o),openPage:m=>setTimeout(()=>{if(m==="CLOSE"){e({isOpen:!1});return}const w=m.startsWith("/")?m:Rn[m];e({isOpen:!0,openUrl:w})},0),setConfig:(m,w)=>{Ln(m,w)},quote:{addProductFromPage:async m=>{const w={...m,sku:await Je(m)};return Ze([w],e,r)},addProductsFromCart:L,addProductsFromCartId:T,addProducts:async m=>{const w=await Promise.all(m.map(async V=>({...V,sku:await Je(V)})));return Ze(w,e,r)},getQuoteConfigs:()=>fe,getCurrent:()=>({productList:c}),getButtonInfo:()=>({...be.current,enabled:_e.current}),getButtonInfoAddAllFromCartToQuote:()=>({...we.current,enabled:ve.current})},user:{getProfile:()=>({...C.current,role:i}),getMasqueradeState:async()=>{if(typeof C.current.b2bId!="number")return{current_company_id:K.current,companies:[]};const{superAdminCompanies:{edges:m=[]}}=await jn(C.current.b2bId,{first:50,offset:0,orderBy:"companyName"});return{current_company_id:K.current,companies:m.map(({node:w})=>w)}},getB2BToken:()=>h,setMasqueradeCompany:m=>{typeof C.current.b2bId=="number"&&qn({companyId:m,customerId:he.current},t)},endMasquerade:()=>{typeof C.current.b2bId=="number"&&Ie(t)},graphqlBCProxy:te.graphqlBCProxy,loginWithB2BStorefrontToken:async m=>{n(Cn(m)),await Sn(m)},logout:async()=>{try{p&&await Ie(t)}catch(m){He.error(m)}finally{window.sessionStorage.clear(),An(),window.b2b.callbacks.dispatchEvent("on-logout")}}},shoppingList:{itemFromCurrentPage:(Ee=(ke=(ye=(P=window.b2b)==null?void 0:P.utils)==null?void 0:ye.shoppingList)==null?void 0:ke.itemFromCurrentPage)!=null?Ee:[],addProductFromPage:m=>{window.b2b.utils.shoppingList.itemFromCurrentPage=Ye([m]),Nn({role:me.current,storeDispatch:n,saveFn:gn,setOpenPage:e,registerEnabled:H})},addProducts:(m,w)=>Fn({shoppingListId:m,items:Ye(w),isB2BUser:X.current,customerGroupId:C.current.customerGroupId}).then(()=>l(m.toString())).catch(Mn),createNewShoppingList:async(m,w)=>{const{shoppingListsCreate:V}=await Vn({data:{name:m,description:w},isB2BUser:X.current});return V.shoppingList},getButtonInfo:()=>({...ze.current,enabled:ge.current}),getLists:async()=>{const{edges:m=[]}=u?await xn():await Dn({channelId:On});return m.map(({node:w})=>w)}},cart:{setEntityId:m=>{$e.set("cartId",m),Un()},getEntityId:()=>$e.get("cartId")}}}},[c,h,o,fe]),null}export{ko as default};
//# sourceMappingURL=index-BOANHier.js.map
