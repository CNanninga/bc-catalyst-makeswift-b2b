import{j as u,a4 as D,a5 as L,a6 as j}from"./mui-DjJKBaL-.js";import{r as i}from"./intl-D34a3Rgg.js";import{c as T}from"./eCache-97HTO8co.js";import{i as k,R as F,S as b}from"./react-setup-Ctz-bmMs.js";import"./reactVendor-CkUTLE5B.js";import"./redux-Bt5-tVzx.js";import"./toolkit-CpEbzTSY.js";import"./base-CC7kTJh2.js";import"./global-D7Yn0gGb.js";import"./lodashEs-CONzB2I0.js";import"./load-functions-utyuqH_X.js";import"../index.js";import"./router-DcuTQ_yx.js";import"./muiIcon-BBtg8u0V.js";import"./dropzone-B1UJxEDf.js";import"./dateFns-DubixNBV.js";function I(t,n,c=!1){if(t){const o=t;if("srcdoc"in HTMLIFrameElement.prototype&&!c)o.srcdoc=n;else{const e=o.contentDocument;e==null||e.open("text/html","replace"),e==null||e.write(n),e==null||e.close()}}}const p=t=>{var n,c;(c=(n=t.current)==null?void 0:n.contentDocument)!=null&&c.addEventListener&&(t.current.contentDocument.addEventListener("keydown",()=>{document.dispatchEvent(new Event("keydown"))}),t.current.contentDocument.addEventListener("mousedown",()=>{document.dispatchEvent(new Event("mousedown"))}),t.current.contentDocument.addEventListener("touchstart",()=>{document.dispatchEvent(new Event("touchstart"))}),t.current.contentDocument.addEventListener("touchmove",()=>{document.dispatchEvent(new Event("touchmove"))}),t.current.contentDocument.addEventListener("click",()=>{document.dispatchEvent(new Event("click"))}))},P="<!DOCTYPE html><html><head></head><body></body></html>";function N(t){const n=k(),{isSetupComplete:c,emotionCache:o,iframeDocument:e,bodyRef:a,children:d}=t;return i.useEffect(()=>(e&&n(F(e)),()=>{e&&n(b())}),[e]),!c||!o||!e?null:((a==null?void 0:a.current)!==void 0&&(a.current=e.body),D.createPortal(u.jsxs(L,{value:o,children:[u.jsx(j,{}),d]}),e.body))}function X(t){var v;const{title:n,className:c,fontUrl:o,customStyles:e,children:a,bodyRef:d}=t,r=i.useRef(null),[h,E]=i.useState(!1),[w,x]=i.useState(void 0);return i.useEffect(()=>{var C,y;const f=r.current;if(!f)return;I(f,P,!0);const s=(C=r.current)==null?void 0:C.contentDocument;if(!s)return;if(o){const m=s.createElement("link");m.rel="stylesheet",m.href=o,s.head.appendChild(m)}if(e){const m=s.createElement("style");m.appendChild(document.createTextNode(e)),s.head.appendChild(m)}const S=T({key:"css",container:s.head,prepend:!0});x(S),s.readyState==="complete"?p(r):(y=r.current)==null||y.addEventListener("load",()=>p(r)),E(!0);const l=r.current;return()=>{E(!1),l==null||l.removeEventListener("load",()=>{p(r)})}},[e,o]),u.jsx("iframe",{allowFullScreen:!0,className:h?c:void 0,title:n,ref:r,children:u.jsx(N,{isSetupComplete:h,emotionCache:w,iframeDocument:(v=r.current)==null?void 0:v.contentDocument,bodyRef:d,children:a})})}export{X as default};
//# sourceMappingURL=ThemeFrame-ok3eDzgH.js.map
