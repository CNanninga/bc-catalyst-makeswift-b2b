import{_ as j,b as _,c as We,r as c,a as qe}from"./intl-D34a3Rgg.js";import{P as s}from"./mui-DjJKBaL-.js";import{g as Ne}from"./reactVendor-CkUTLE5B.js";var Ge=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function $(e,r){var n=Ye(e);if(typeof n.path!="string"){var o=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof r=="string"?r:typeof o=="string"&&o.length>0?o:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Ye(e){var r=e.name,n=r&&r.lastIndexOf(".")!==-1;if(n&&!e.type){var o=r.split(".").pop().toLowerCase(),i=Ge.get(o);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var Je=[".DS_Store","Thumbs.db"];function Qe(e){return j(this,void 0,void 0,function(){return _(this,function(r){return[2,Ue(e)&&e.dataTransfer?Ze(e.dataTransfer,e.type):Ve(e)]})})}function Ue(e){return!!e.dataTransfer}function Ve(e){var r=Xe(e.target)?e.target.files?X(e.target.files):[]:[];return r.map(function(n){return $(n)})}function Xe(e){return e!==null}function Ze(e,r){return j(this,void 0,void 0,function(){var n,o;return _(this,function(i){switch(i.label){case 0:return e.items?(n=X(e.items).filter(function(a){return a.kind==="file"}),r!=="drop"?[2,n]:[4,Promise.all(n.map(er))]):[3,2];case 1:return o=i.sent(),[2,Fe(Pe(o))];case 2:return[2,Fe(X(e.files).map(function(a){return $(a)}))]}})})}function Fe(e){return e.filter(function(r){return Je.indexOf(r.name)===-1})}function X(e){for(var r=[],n=0;n<e.length;n++){var o=e[n];r.push(o)}return r}function er(e){if(typeof e.webkitGetAsEntry!="function")return Ee(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?je(r):Ee(e)}function Pe(e){return e.reduce(function(r,n){return We(r,Array.isArray(n)?Pe(n):[n])},[])}function Ee(e){var r=e.getAsFile();if(!r)return Promise.reject(e+" is not a File");var n=$(r);return Promise.resolve(n)}function rr(e){return j(this,void 0,void 0,function(){return _(this,function(r){return[2,e.isDirectory?je(e):nr(e)]})})}function je(e){var r=e.createReader();return new Promise(function(n,o){var i=[];function a(){var f=this;r.readEntries(function(l){return j(f,void 0,void 0,function(){var F,w,A;return _(this,function(g){switch(g.label){case 0:if(l.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return F=g.sent(),n(F),[3,4];case 3:return w=g.sent(),o(w),[3,4];case 4:return[3,6];case 5:A=Promise.all(l.map(rr)),i.push(A),a(),g.label=6;case 6:return[2]}})})},function(l){o(l)})}a()})}function nr(e){return j(this,void 0,void 0,function(){return _(this,function(r){return[2,new Promise(function(n,o){e.file(function(i){var a=$(i,e.fullPath);n(a)},function(i){o(i)})})]})})}var I={},Oe;function tr(){return Oe||(Oe=1,I.__esModule=!0,I.default=function(e,r){if(e&&r){var n=Array.isArray(r)?r:r.split(","),o=e.name||"",i=(e.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some(function(f){var l=f.trim().toLowerCase();return l.charAt(0)==="."?o.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):i===l})}return!0}),I}var or=tr();const ir=Ne(or);function _e(e,r){return e.type==="application/x-moz-file"||ir(e,r)}function ke(e,r,n){if(P(e.size)){if(P(r)&&P(n))return e.size>=r&&e.size<=n;if(P(r))return e.size>=r;if(P(n))return e.size<=n}return!0}function P(e){return e!=null}function ar(e){var r=e.files,n=e.accept,o=e.minSize,i=e.maxSize,a=e.multiple;return!a&&r.length>1?!1:r.every(function(f){return _e(f,n)&&ke(f,o,i)})}function L(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function z(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function we(e){e.preventDefault()}function ur(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function sr(e){return e.indexOf("Edge/")!==-1}function cr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return ur(e)||sr(e)}function y(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(o){for(var i=arguments.length,a=new Array(i>1?i-1:0),f=1;f<i;f++)a[f-1]=arguments[f];return r.some(function(l){return!L(o)&&l&&l.apply(void 0,[o].concat(a)),L(o)})}}function Ce(e){return pr(e)||lr(e)||fr()}function fr(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function lr(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function pr(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}function gr(e,r){return mr(e)||vr(e,r)||dr()}function dr(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function vr(e,r){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]"){var n=[],o=!0,i=!1,a=void 0;try{for(var f=e[Symbol.iterator](),l;!(o=(l=f.next()).done)&&(n.push(l.value),!(r&&n.length===r));o=!0);}catch(F){i=!0,a=F}finally{try{!o&&f.return!=null&&f.return()}finally{if(i)throw a}}return n}}function mr(e){if(Array.isArray(e))return e}function Ae(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function D(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ae(n,!0).forEach(function(o){Z(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(n).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Z(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function K(e,r){if(e==null)return{};var n=Dr(e,r),o,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)o=a[i],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function Dr(e,r){if(e==null)return{};var n={},o=Object.keys(e),i,a;for(a=0;a<o.length;a++)i=o[a],!(r.indexOf(i)>=0)&&(n[i]=e[i]);return n}var Se=c.forwardRef(function(e,r){var n=e.children,o=K(e,["children"]),i=br(o),a=i.open,f=K(i,["open"]);return c.useImperativeHandle(r,function(){return{open:a}},[a]),qe.createElement(c.Fragment,null,n(D({},f,{open:a})))});Se.displayName="Dropzone";Se.propTypes={children:s.func,accept:s.oneOfType([s.string,s.arrayOf(s.string)]),multiple:s.bool,preventDropOnDocument:s.bool,noClick:s.bool,noKeyboard:s.bool,noDrag:s.bool,noDragEventsBubbling:s.bool,minSize:s.number,maxSize:s.number,disabled:s.bool,getFilesFromEvent:s.func,onFileDialogCancel:s.func,onDragEnter:s.func,onDragLeave:s.func,onDragOver:s.func,onDrop:s.func,onDropAccepted:s.func,onDropRejected:s.func};var yr={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],rejectedFiles:[]};function br(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.accept,n=e.disabled,o=n===void 0?!1:n,i=e.getFilesFromEvent,a=i===void 0?Qe:i,f=e.maxSize,l=f===void 0?1/0:f,F=e.minSize,w=F===void 0?0:F,A=e.multiple,g=A===void 0?!0:A,B=e.onDragEnter,M=e.onDragLeave,H=e.onDragOver,W=e.onDrop,q=e.onDropAccepted,N=e.onDropRejected,G=e.onFileDialogCancel,ee=e.preventDropOnDocument,Y=ee===void 0?!0:ee,re=e.noClick,ne=re===void 0?!1:re,te=e.noKeyboard,J=te===void 0?!1:te,oe=e.noDrag,ie=oe===void 0?!1:oe,ae=e.noDragEventsBubbling,E=ae===void 0?!1:ae,d=c.useRef(null),v=c.useRef(null),xe=c.useReducer(hr,yr),ue=gr(xe,2),k=ue[0],b=ue[1],Te=k.isFocused,se=k.isFileDialogActive,ce=k.draggedFiles,S=c.useCallback(function(){v.current&&(b({type:"openDialog"}),v.current.value=null,v.current.click())},[b]),fe=function(){se&&setTimeout(function(){if(v.current){var u=v.current.files;u.length||(b({type:"closeDialog"}),typeof G=="function"&&G())}},300)};c.useEffect(function(){return window.addEventListener("focus",fe,!1),function(){window.removeEventListener("focus",fe,!1)}},[v,se,G]);var le=c.useCallback(function(t){!d.current||!d.current.isEqualNode(t.target)||(t.keyCode===32||t.keyCode===13)&&(t.preventDefault(),S())},[d,v]),pe=c.useCallback(function(){b({type:"focus"})},[]),ge=c.useCallback(function(){b({type:"blur"})},[]),de=c.useCallback(function(){ne||(cr()?setTimeout(S,0):S())},[v,ne]),O=c.useRef([]),ve=function(u){d.current&&d.current.contains(u.target)||(u.preventDefault(),O.current=[])};c.useEffect(function(){return Y&&(document.addEventListener("dragover",we,!1),document.addEventListener("drop",ve,!1)),function(){Y&&(document.removeEventListener("dragover",we),document.removeEventListener("drop",ve))}},[d,Y]);var me=c.useCallback(function(t){t.preventDefault(),t.persist(),R(t),O.current.indexOf(t.target)===-1&&(O.current=[].concat(Ce(O.current),[t.target])),z(t)&&Promise.resolve(a(t)).then(function(u){L(t)&&!E||(b({draggedFiles:u,isDragActive:!0,type:"setDraggedFiles"}),B&&B(t))})},[a,B,E]),De=c.useCallback(function(t){if(t.preventDefault(),t.persist(),R(t),t.dataTransfer)try{t.dataTransfer.dropEffect="copy"}catch(u){}return z(t)&&H&&H(t),!1},[H,E]),ye=c.useCallback(function(t){t.preventDefault(),t.persist(),R(t);var u=O.current.filter(function(p){return p!==t.target&&d.current&&d.current.contains(p)});O.current=u,!(u.length>0)&&(b({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),z(t)&&M&&M(t))},[d,M,E]),x=c.useCallback(function(t){t.preventDefault(),t.persist(),R(t),O.current=[],z(t)&&Promise.resolve(a(t)).then(function(u){if(!(L(t)&&!E)){var p=[],m=[];u.forEach(function(h){_e(h,r)&&ke(h,w,l)?p.push(h):m.push(h)}),!g&&p.length>1&&m.push.apply(m,Ce(p.splice(0))),b({acceptedFiles:p,rejectedFiles:m,type:"setFiles"}),W&&W(p,m,t),m.length>0&&N&&N(m,t),p.length>0&&q&&q(p,t)}}),b({type:"reset"})},[g,r,w,l,a,W,q,N,E]),C=function(u){return o?null:u},Q=function(u){return J?null:C(u)},T=function(u){return ie?null:C(u)},R=function(u){E&&u.stopPropagation()},Re=c.useMemo(function(){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=t.refKey,p=u===void 0?"ref":u,m=t.onKeyDown,h=t.onFocus,U=t.onBlur,V=t.onClick,Ke=t.onDragEnter,$e=t.onDragOver,Be=t.onDragLeave,Me=t.onDrop,He=K(t,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return D(Z({onKeyDown:Q(y(m,le)),onFocus:Q(y(h,pe)),onBlur:Q(y(U,ge)),onClick:C(y(V,de)),onDragEnter:T(y(Ke,me)),onDragOver:T(y($e,De)),onDragLeave:T(y(Be,ye)),onDrop:T(y(Me,x))},p,d),!o&&!J?{tabIndex:0}:{},{},He)}},[d,le,pe,ge,de,me,De,ye,x,J,ie,o]),Ie=c.useCallback(function(t){t.stopPropagation()},[]),ze=c.useMemo(function(){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=t.refKey,p=u===void 0?"ref":u,m=t.onChange,h=t.onClick,U=K(t,["refKey","onChange","onClick"]),V=Z({accept:r,multiple:g,type:"file",style:{display:"none"},onChange:C(y(m,x)),onClick:C(y(h,Ie)),autoComplete:"off",tabIndex:-1},p,v);return D({},V,{},U)}},[v,r,g,x,o]),be=ce.length,he=be>0&&ar({files:ce,accept:r,minSize:w,maxSize:l,multiple:g}),Le=be>0&&!he;return D({},k,{isDragAccept:he,isDragReject:Le,isFocused:Te&&!o,getRootProps:Re,getInputProps:ze,rootRef:d,inputRef:v,open:C(S)})}function hr(e,r){switch(r.type){case"focus":return D({},e,{isFocused:!0});case"blur":return D({},e,{isFocused:!1});case"openDialog":return D({},e,{isFileDialogActive:!0});case"closeDialog":return D({},e,{isFileDialogActive:!1});case"setDraggedFiles":var n=r.isDragActive,o=r.draggedFiles;return D({},e,{draggedFiles:o,isDragActive:n});case"setFiles":return D({},e,{acceptedFiles:r.acceptedFiles,rejectedFiles:r.rejectedFiles});case"reset":return D({},e,{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],rejectedFiles:[]});default:return e}}export{Se as D};
//# sourceMappingURL=dropzone-B1UJxEDf.js.map
