import{ca as y,ak as p}from"./react-setup-Ctz-bmMs.js";import{j as I}from"./mui-DjJKBaL-.js";import{r as c}from"./intl-D34a3Rgg.js";const b=async(t,e)=>{const n=t.map(({node:s})=>{const{productId:a,quantity:r,productsSearch:d}=s,{variantId:u,newSelectOptionList:f}=d,v=f.map(o=>typeof o.optionId=="string"&&o.optionId.includes("attribute")?{optionId:Number(o.optionId.split("[")[1].split("]")[0]),optionValue:o.optionValue}:{optionId:Number(o.optionId),optionValue:o.optionValue});return y({productId:Number(a),variantId:Number(u),quantity:Number(r),productOptions:v})}),i=await Promise.allSettled(n);return i.forEach((s,a)=>{if(s.status==="rejected"){const{productName:u}=t[a].node;p.error(e("quotes.productValidationFailed",{productName:u}));return}const{responseType:r,message:d}=s.value;r==="ERROR"&&p.error(d)}),t.filter((s,a)=>{const r=i[a];return r.status==="fulfilled"&&r.value.responseType!=="ERROR"})},m={id:0,isLoading:!1},g=c.createContext({state:m,dispatch:()=>{}}),h=(t,e)=>{switch(e.type){case"all":return{...t,...e.payload};case"init":return{...t,id:e.payload.id};case"loading":return{...t,isLoading:e.payload.isLoading};default:return t}};function x(t){const[e,n]=c.useReducer(h,m),{children:i}=t,l=c.useMemo(()=>({state:e,dispatch:n}),[e]);return I.jsx(g.Provider,{value:l,children:i})}export{g as S,x as a,b as v};
//# sourceMappingURL=ShoppingListDetailsContext-dB1dpdt_.js.map
