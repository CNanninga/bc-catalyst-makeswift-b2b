import{j as e,A as T,ae as H,T as h,B as p,y as U,I as X,s as Y,Y as $,X as G}from"./mui-DjJKBaL-.js";import{r as l}from"./intl-D34a3Rgg.js";import{j as C,ap as J,x as Q,af as V,am as Z,u as b,o as g,N as _,p as ee,q as te}from"./react-setup-Ctz-bmMs.js";import"./load-functions-utyuqH_X.js";import"./base-CC7kTJh2.js";import{u as ae}from"./useSort-57pG6e8y.js";import{C as se}from"./ConfirmMasqueradeDialog-B7lur4zu.js";import{B as re}from"./B3FilterSearch-BPb2-EyD.js";import{e as oe,s as ne}from"./masquerade-jcZ_v0Kw.js";import{M as ie}from"./muiIcon-BBtg8u0V.js";import{u as ce}from"./router-DcuTQ_yx.js";import"./reactVendor-CkUTLE5B.js";import"./eCache-97HTO8co.js";import"./redux-Bt5-tVzx.js";import"./toolkit-CpEbzTSY.js";import"./lodashEs-CONzB2I0.js";import"../index.js";import"./global-D7Yn0gGb.js";import"./dropzone-B1UJxEDf.js";import"./dateFns-DubixNBV.js";function de(){const s=C();return e.jsx(p,{sx:{fontWeight:400,fontSize:"13px",background:"#ED6C02",display:"inline-block",p:"2px 7px",color:"#FFFFFF",borderRadius:"10px"},children:s("dashboard.selected")})}function le({companyName:s,email:o,isSelected:n,action:c}){return e.jsxs(T,{children:[e.jsxs(H,{sx:{color:"#313440"},children:[e.jsx(h,{sx:{fontWeight:400,fontSize:"24px",color:"rgba(0, 0, 0, 0.87)"},children:s}),n&&e.jsx(de,{}),e.jsxs(p,{sx:{display:"flex",fontSize:"16px",mt:"15px",gap:"5px"},children:[e.jsx(h,{sx:{fontWeight:500},children:"Email:"}),e.jsx(h,{variant:"body1",children:o})]})]}),e.jsx(U,{sx:{ml:"10px",mb:"10px"},variant:"text",onClick:()=>c.onClick(),children:c.label})]})}const pe=Y(G)(()=>({"& .MuiPaper-elevation":{boxShadow:"0px 1px 0px -1px rgba(0, 0, 0, 0.1), 0px 1px 6px rgba(0, 0, 0, 0.07), 0px 1px 4px rgba(0, 0, 0, 0.06)",borderRadius:"4px"}}));function w({label:s,onClick:o}){const n=l.useRef(null),[c,a]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(X,{onClick:()=>a(!0),ref:n,children:e.jsx(ie,{})}),e.jsx(pe,{anchorEl:n.current,open:c,onClose:()=>a(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsx($,{sx:{color:"primary.main"},onClick:()=>{o(),a(!1)},children:s})})]})}function me(){const s=C();return e.jsx(p,{sx:{fontWeight:400,fontSize:"13px",background:"#ED6C02",ml:"16px",p:"2px 7px",color:"#FFFFFF",borderRadius:"10px"},children:s("dashboard.selected")})}function ue({companyName:s,isSelected:o}){return e.jsxs(p,{sx:{display:"flex",alignItems:"center"},children:[s,o&&e.jsx(me,{})]})}const M="companyName",E={companyName:"companyName",companyAdminName:"companyAdminName",companyEmail:"companyEmail"},xe=[10,20,30];function be(){const s=b(({company:a})=>a.customer.id),o=b(({company:a})=>a.customer.b2bId),n=b(({global:a})=>a.cartNumber);return{salesRepCompanyId:Number(b(({b2bFeatures:a})=>a.masqueradeCompany.id)),b2bId:o,customerId:s,cartNumber:n}}function Le(s){const o=J(),n=Q(),{salesRepCompanyId:c,b2bId:a,customerId:R,cartNumber:j}=be(),{setOpenPage:v}=s,d=C(),[S,f]=l.useState(!1),[r,m]=l.useState(),[u,x]=l.useState({q:"",orderBy:E[M]}),[D,L,P]=ae(E,M,u,x,"asc"),I=ce(),O=async t=>{let i={edges:[],totalCount:0};return typeof a=="number"&&(i=(await _(a,t)).superAdminCompanies),i},N=async t=>{await ee({deleteCartInput:{cartEntityId:t}}),g.remove("cartId"),n.dispatch(te(0))},k=async t=>{try{f(!0),typeof a=="number"&&await ne({customerId:R,companyId:t},n);const i=g.get("cartId");i&&await N(i),v({isOpen:!0,openUrl:"/dashboard"}),x({...u})}finally{f(!1)}},y=async()=>{try{o(!0),typeof a=="number"&&await oe(n);const t=g.get("cartId");t&&await N(t),x({...u})}finally{o(!1)}};l.useEffect(()=>{const t={...I};t!=null&&t.state&&y()},[I]);const z=async t=>{x({...u,q:t})},F=async t=>{j>0?m({type:"start",companyId:t}):await k(t)},A=async()=>{j>0?m({type:"end"}):await y()},W=[{key:"companyName",title:d("dashboard.company"),render:({companyName:t,companyId:i})=>e.jsx(ue,{companyName:t,isSelected:Number(i)===Number(c)}),isSortable:!0},{key:"companyEmail",title:d("dashboard.email"),isSortable:!0},{key:"actions",title:d("dashboard.action"),render:({companyId:t})=>Number(t)===Number(c)?e.jsx(w,{label:d("dashboard.endMasqueradeAction"),onClick:()=>A()}):e.jsx(w,{label:d("dashboard.masqueradeAction"),onClick:()=>F(Number(t))})}];return e.jsxs(V,{isSpinning:S,children:[e.jsxs(p,{sx:{display:"flex",flexDirection:"column",flex:1},children:[e.jsx(p,{sx:{mb:"24px"},children:e.jsx(re,{handleChange:z})}),e.jsx(Z,{columnItems:W,rowsPerPageOptions:xe,getRequestList:O,searchParams:u||{},isCustomRender:!1,requestLoading:f,tableKey:"id",sortDirection:L,orderBy:P,sortByFn:D,renderItem:({companyName:t,companyEmail:i,companyId:B})=>{const q=Number(B)===Number(c),K=q?{label:d("dashboard.endMasqueradeAction"),onClick:()=>A()}:{label:d("dashboard.masqueradeAction"),onClick:()=>F(Number(B))};return e.jsx(le,{companyName:t,email:i,isSelected:q,action:K})}})]}),e.jsx(se,{title:(r==null?void 0:r.type)==="end"?d("dashboard.masqueradeModal.title.end"):d("dashboard.masqueradeModal.title.start"),isOpen:r!==void 0,isRequestLoading:S,handleClose:()=>m(void 0),handleConfirm:async()=>{(r==null?void 0:r.type)==="start"?(await k(r.companyId),m(void 0)):(r==null?void 0:r.type)==="end"&&(await y(),m(void 0))}})]})}export{Le as default};
//# sourceMappingURL=index-CxW1Ky_O.js.map
