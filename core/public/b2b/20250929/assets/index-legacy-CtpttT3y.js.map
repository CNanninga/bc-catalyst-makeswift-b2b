{"version":3,"file":"index-legacy-CtpttT3y.js","sources":["../../src/components/B3QuantityTextField.tsx","../../src/pages/ShoppingListDetails/components/AddToShoppingList.tsx","../../src/pages/ShoppingListDetails/index.tsx","../../src/pages/ShoppingListDetails/components/ReAddToCart.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailDeleteItems.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailFooter.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailHeader.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailAddNotes.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailCard.tsx","../../src/pages/ShoppingListDetails/components/ShoppingDetailTable.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n\nimport { useMobile } from '@/hooks';\n\nimport { StyledNumberNoTopTextField } from './styled';\n\ninterface B3NumberTextFieldProps {\n  disabled?: boolean;\n  label?: string;\n  value?: number | string;\n  maxQuantity?: number;\n  minQuantity?: number;\n  isStock?: string;\n  stock?: number;\n  hiddenLabel?: boolean;\n  onChange?: (value: number | string, isValid: boolean) => void;\n  sx?: CustomFieldItems;\n}\n\nexport default function B3QuantityTextField(props: B3NumberTextFieldProps) {\n  const [isMobile] = useMobile();\n\n  const {\n    disabled = false,\n    label = isMobile ? 'Qty' : '',\n    value = '',\n    maxQuantity = 0,\n    minQuantity = 0,\n    isStock = '0',\n    stock = 0,\n    hiddenLabel = !isMobile,\n    onChange = () => {},\n    sx = {\n      width: isMobile ? '110px' : '72px',\n      '& .MuiFormHelperText-root': {\n        marginLeft: '0',\n        marginRight: '0',\n      },\n    },\n  } = props;\n\n  const [validMessage, setValidMessage] = useState('');\n\n  const validateQuantity = useCallback(\n    (value: number | string) => {\n      const quantity = parseInt(`${value}`, 10) || 0;\n\n      let validMessage = '';\n\n      if (isStock === '1' && stock === 0) {\n        validMessage = 'Out of stock';\n      } else if (isStock === '1' && quantity > stock) {\n        validMessage = `${stock} in stock`;\n      } else if (minQuantity !== 0 && quantity < minQuantity) {\n        validMessage = `Min is ${minQuantity}`;\n      } else if (maxQuantity !== 0 && quantity > maxQuantity) {\n        validMessage = `Max is ${maxQuantity}`;\n      }\n\n      setValidMessage(validMessage);\n\n      return validMessage;\n    },\n    [isStock, maxQuantity, minQuantity, stock],\n  );\n\n  const handleChange = (value: string) => {\n    onChange(value, !!validMessage);\n  };\n\n  const handleBlur = () => {\n    const quantity = parseInt(`${value}`, 10) || 0;\n\n    onChange(quantity, !validateQuantity(quantity));\n  };\n\n  useEffect(() => {\n    validateQuantity(value);\n  }, [validateQuantity, value]);\n\n  return (\n    <StyledNumberNoTopTextField\n      size=\"small\"\n      type=\"number\"\n      variant=\"filled\"\n      disabled={disabled}\n      hiddenLabel={hiddenLabel}\n      label={label}\n      value={value}\n      error={!!validMessage}\n      helperText={validMessage}\n      inputProps={{\n        inputMode: 'numeric',\n        pattern: '[0-9]*',\n      }}\n      onChange={(e) => {\n        handleChange(e.target.value);\n      }}\n      onBlur={() => {\n        handleBlur();\n      }}\n      sx={sx}\n    />\n  );\n}\n","import { useContext, useState } from 'react';\nimport { UploadFile as UploadFileIcon } from '@mui/icons-material';\nimport { Box, Card, CardContent, Divider, Typography } from '@mui/material';\n\nimport { B3Upload } from '@/components';\nimport CustomButton from '@/components/button/CustomButton';\nimport { dispatchEvent, useBlockPendingAccountViewPrice } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\nimport { addProductToBcShoppingList, addProductToShoppingList } from '@/shared/service/b2b';\nimport { useAppSelector } from '@/store';\nimport { snackbar } from '@/utils';\nimport { getValidOptionsList } from '@/utils/b3Product/b3Product';\n\nimport { getAllModifierDefaultValue } from '../../../utils/b3Product/shared/config';\nimport { ShoppingListDetailsContext } from '../context/ShoppingListDetailsContext';\n\nimport QuickAdd from './QuickAdd';\nimport SearchProduct from './SearchProduct';\n\ninterface AddToListProps {\n  updateList: () => void;\n  isB2BUser: boolean;\n  type?: string;\n}\n\nexport default function AddToShoppingList(props: AddToListProps) {\n  const {\n    state: { id },\n  } = useContext(ShoppingListDetailsContext);\n\n  const companyStatus = useAppSelector(({ company }) => company.companyInfo.status);\n  const { updateList, isB2BUser, type: pageType = '' } = props;\n  const b3Lang = useB3Lang();\n\n  const [isOpenBulkLoadCSV, setIsOpenBulkLoadCSV] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [blockPendingAccountViewPrice] = useBlockPendingAccountViewPrice();\n\n  const addItemsToShoppingList = isB2BUser ? addProductToShoppingList : addProductToBcShoppingList;\n\n  const addToList = async (products: CustomFieldItems[]) => {\n    try {\n      if (!dispatchEvent('on-add-to-shopping-list', products)) {\n        throw new Error();\n      }\n\n      const items = products.map((product) => {\n        const newOptionLists = getValidOptionsList(product.newSelectOptionList, product);\n        return {\n          optionList: newOptionLists,\n          productId: product.id,\n          quantity: product.quantity,\n          variantId: product.variantId,\n        };\n      });\n\n      await addItemsToShoppingList({\n        shoppingListId: id,\n        items,\n      });\n\n      snackbar.success(b3Lang('shoppingList.addToShoppingList.productsAdded'));\n    } catch (e: any) {\n      if (e.message.length > 0) {\n        snackbar.error(e.message);\n      }\n    }\n  };\n\n  const quickAddToList = async (products: CustomFieldItems[]) => {\n    const items = products.map((product) => {\n      const newOptionLists = getValidOptionsList(\n        product.newSelectOptionList || product.optionList,\n        product?.products || product,\n      );\n      return {\n        optionList: newOptionLists || [],\n        productId: parseInt(product.productId, 10) || 0,\n        quantity: product.quantity,\n        variantId: parseInt(product.variantId, 10) || 0,\n      };\n    });\n\n    await addItemsToShoppingList({\n      shoppingListId: id,\n      items,\n    });\n\n    snackbar.success(b3Lang('shoppingList.addToShoppingList.productsAdded'));\n  };\n\n  const getValidProducts = (products: CustomFieldItems) => {\n    const notPurchaseSku: string[] = [];\n    const productItems: CustomFieldItems[] = [];\n    const notAddAble: string[] = [];\n\n    products.forEach((item: CustomFieldItems) => {\n      const { products: currentProduct, qty } = item;\n      const { option, purchasingDisabled, variantSku, variantId, productId, modifiers } =\n        currentProduct;\n\n      const defaultModifiers = getAllModifierDefaultValue(modifiers);\n      if (purchasingDisabled && pageType !== 'shoppingList') {\n        notPurchaseSku.push(variantSku);\n        return;\n      }\n\n      const notPassedModifier = defaultModifiers.filter(\n        (modifier: CustomFieldItems) => !modifier.isVerified,\n      );\n      if (notPassedModifier.length > 0) {\n        notAddAble.push(variantSku);\n\n        return;\n      }\n\n      const optionsList = option.map((item: CustomFieldItems) => ({\n        optionId: `attribute[${item.option_id}]`,\n        optionValue: item.id.toString(),\n      }));\n\n      defaultModifiers.forEach((modifier: CustomFieldItems) => {\n        const { type } = modifier;\n\n        if (type === 'date') {\n          const { defaultValue } = modifier;\n          Object.keys(defaultValue).forEach((key) => {\n            optionsList.push({\n              optionId: `attribute[${modifier.option_id}][${key}]`,\n              optionValue: `${modifier.defaultValue[key]}`,\n            });\n          });\n        } else {\n          optionsList.push({\n            optionId: `attribute[${modifier.option_id}]`,\n            optionValue: `${modifier.defaultValue}`,\n          });\n        }\n      });\n\n      productItems.push({\n        productId: parseInt(productId, 10) || 0,\n        variantId: parseInt(variantId, 10) || 0,\n        quantity: Number(qty),\n        optionList: optionsList,\n        products: item.products,\n      });\n    });\n\n    return {\n      notPurchaseSku,\n      productItems,\n      notAddAble,\n    };\n  };\n\n  const handleCSVAddToList = async (productsData: CustomFieldItems) => {\n    setIsLoading(true);\n    try {\n      const { validProduct } = productsData;\n\n      const { notPurchaseSku, productItems, notAddAble } = getValidProducts(validProduct);\n\n      if (productItems.length > 0) {\n        await quickAddToList(productItems);\n\n        updateList();\n      }\n\n      if (notAddAble.length > 0 && pageType !== 'shoppingList') {\n        snackbar.error(\n          b3Lang('shoppingList.addToShoppingList.skuNotAddable', {\n            notAddAble: notAddAble.join(', '),\n          }),\n        );\n      }\n\n      if (notPurchaseSku.length > 0 && pageType !== 'shoppingList') {\n        snackbar.error(\n          b3Lang('shoppingList.addToShoppingList.skuNotPurchasable', {\n            notPurchaseSku: notPurchaseSku.join(', '),\n          }),\n        );\n      }\n\n      setIsOpenBulkLoadCSV(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleOpenUploadDiag = () => {\n    if (blockPendingAccountViewPrice && companyStatus === 0) {\n      snackbar.info(\n        'Your business account is pending approval. This feature is currently disabled.',\n      );\n    } else {\n      setIsOpenBulkLoadCSV(true);\n    }\n  };\n\n  return (\n    <Card\n      sx={{\n        marginBottom: '50px',\n      }}\n    >\n      <CardContent>\n        <Box>\n          <Typography variant=\"h5\">{b3Lang('shoppingList.addToShoppingList.addToList')}</Typography>\n          <SearchProduct updateList={updateList} addToList={addToList} type=\"shoppingList\" />\n\n          <Divider />\n\n          <QuickAdd type=\"shoppingList\" updateList={updateList} quickAddToList={quickAddToList} />\n\n          <Divider />\n\n          <Box\n            sx={{\n              margin: '20px 0 0',\n            }}\n          >\n            <CustomButton variant=\"text\" onClick={() => handleOpenUploadDiag()}>\n              <UploadFileIcon\n                sx={{\n                  marginRight: '8px',\n                }}\n              />\n              {b3Lang('shoppingList.addToShoppingList.bulkUploadCsv')}\n            </CustomButton>\n          </Box>\n\n          <B3Upload\n            isOpen={isOpenBulkLoadCSV}\n            setIsOpen={setIsOpenBulkLoadCSV}\n            handleAddToList={handleCSVAddToList}\n            isLoading={isLoading}\n            withModifiers\n          />\n        </Box>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { Box, Grid, useTheme } from '@mui/material';\n\nimport B3Spin from '@/components/spin/B3Spin';\nimport { useFeatureFlags, useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\nimport { GlobalContext } from '@/shared/global';\nimport {\n  deleteB2BShoppingListItem,\n  deleteBcShoppingListItem,\n  getB2BJuniorPlaceOrder,\n  getB2BShoppingListDetails,\n  getBcShoppingListDetails,\n  searchProducts,\n  updateB2BShoppingList,\n  updateBcShoppingList,\n} from '@/shared/service/b2b';\nimport {\n  activeCurrencyInfoSelector,\n  isB2BUserSelector,\n  rolePermissionSelector,\n  useAppSelector,\n} from '@/store';\nimport { CustomerRole } from '@/types/company';\nimport { ShoppingListStatus } from '@/types/shoppingList';\nimport { channelId, snackbar, verifyLevelPermission } from '@/utils';\nimport { b2bPermissionsMap } from '@/utils/b3CheckPermissions/config';\nimport { calculateProductListPrice, getBCPrice } from '@/utils/b3Product/b3Product';\nimport {\n  conversionProductsList,\n  CustomerInfoProps,\n  ListItemProps,\n  ProductsProps,\n  SearchProps,\n  ShoppingListInfoProps,\n} from '@/utils/b3Product/shared/config';\n\nimport { type PageProps } from '../PageProps';\n\nimport AddToShoppingList from './components/AddToShoppingList';\nimport ReAddToCart from './components/ReAddToCart';\nimport ShoppingDetailDeleteItems from './components/ShoppingDetailDeleteItems';\nimport ShoppingDetailFooter from './components/ShoppingDetailFooter';\nimport ShoppingDetailHeader from './components/ShoppingDetailHeader';\nimport ShoppingDetailTable from './components/ShoppingDetailTable';\nimport {\n  ShoppingListDetailsContext,\n  ShoppingListDetailsProvider,\n} from './context/ShoppingListDetailsContext';\n\ninterface TableRefProps extends HTMLInputElement {\n  initSearch: () => void;\n}\n\ninterface UpdateShoppingListParamsProps {\n  id: number;\n  name: string;\n  description: string;\n  status?: number;\n  channelId?: number;\n}\n\nconst calculateSubTotal = (checkedArr: CustomFieldItems) => {\n  if (checkedArr.length > 0) {\n    let total = 0.0;\n\n    checkedArr.forEach((item: ListItemProps) => {\n      const {\n        node: { quantity, basePrice, taxPrice },\n      } = item;\n\n      const price = getBCPrice(Number(basePrice), Number(taxPrice));\n\n      total += price * Number(quantity);\n    });\n\n    return (1000 * total) / 1000;\n  }\n  return 0.0;\n};\n\nfunction useData() {\n  const { id = '' } = useParams();\n  const {\n    state: { openAPPParams, productQuoteEnabled = false },\n  } = useContext(GlobalContext);\n  const isB2BUser = useAppSelector(isB2BUserSelector);\n  const { currency_code: currencyCode } = useAppSelector(activeCurrencyInfoSelector);\n  const role = useAppSelector(({ company }) => company.customer.role);\n  const companyId = useAppSelector(({ company }) => company.companyInfo.id);\n  const customerGroupId = useAppSelector(({ company }) => company.customer.customerGroupId);\n\n  const isAgenting = useAppSelector(({ b2bFeatures }) => b2bFeatures.masqueradeCompany.isAgenting);\n\n  const theme = useTheme();\n  const primaryColor = theme.palette.primary.main;\n\n  const {\n    shoppingListCreateActionsPermission,\n    purchasabilityPermission,\n    submitShoppingListPermission,\n  } = useAppSelector(rolePermissionSelector);\n\n  const isCanAddToCart = isB2BUser ? purchasabilityPermission : true;\n\n  const getProducts = async (productIds: number[]) => {\n    const options = { productIds, currencyCode, companyId, customerGroupId };\n    const { productsSearch } = await searchProducts(options);\n\n    return conversionProductsList(productsSearch);\n  };\n\n  const getShoppingList = (params: SearchProps) => {\n    const options = { ...params, id };\n\n    return isB2BUser ? getB2BShoppingListDetails(options) : getBcShoppingListDetails(options);\n  };\n\n  const deleteShoppingListItem = (itemId: string | number) => {\n    const options = { itemId, shoppingListId: id };\n\n    return isB2BUser ? deleteB2BShoppingListItem(options) : deleteBcShoppingListItem(options);\n  };\n\n  return {\n    id,\n    openAPPParams,\n    productQuoteEnabled,\n    isB2BUser,\n    role,\n    isAgenting,\n    primaryColor,\n    shoppingListCreateActionsPermission,\n    submitShoppingListPermission,\n    isCanAddToCart,\n    getProducts,\n    getShoppingList,\n    deleteShoppingListItem,\n  };\n}\n\n// 0: Admin, 1: Senior buyer, 2: Junior buyer, 3: Super admin\n\nfunction ShoppingListDetails({ setOpenPage }: PageProps) {\n  const {\n    id,\n    openAPPParams,\n    productQuoteEnabled,\n    isB2BUser,\n    role,\n    isAgenting,\n    primaryColor,\n    shoppingListCreateActionsPermission,\n    submitShoppingListPermission,\n    isCanAddToCart,\n    getProducts,\n    getShoppingList,\n    deleteShoppingListItem,\n  } = useData();\n  const navigate = useNavigate();\n  const [isMobile] = useMobile();\n  const { dispatch } = useContext(ShoppingListDetailsContext);\n\n  const b3Lang = useB3Lang();\n\n  const tableRef = useRef<TableRefProps | null>(null);\n\n  const featureFlags = useFeatureFlags();\n  const backendValidationEnabled =\n    featureFlags['B2B-3318.move_stock_and_backorder_validation_to_backend'];\n\n  const [checkedArr, setCheckedArr] = useState<CustomFieldItems>([]);\n  const [shoppingListInfo, setShoppingListInfo] = useState<null | ShoppingListInfoProps>(null);\n  const [customerInfo, setCustomerInfo] = useState<null | CustomerInfoProps>(null);\n  const [isRequestLoading, setIsRequestLoading] = useState(false);\n\n  const [deleteOpen, setDeleteOpen] = useState<boolean>(false);\n  const [deleteItemId, setDeleteItemId] = useState<number | string>('');\n\n  const [validateSuccessProducts, setValidateSuccessProducts] = useState<ProductsProps[]>([]);\n  const [validateFailureProducts, setValidateFailureProducts] = useState<ProductsProps[]>([]);\n\n  const [allowJuniorPlaceOrder, setAllowJuniorPlaceOrder] = useState<boolean>(false);\n  const [isCanEditShoppingList, setIsCanEditShoppingList] = useState<boolean>(true);\n\n  const b2bAndBcShoppingListActionsPermissions = isB2BUser\n    ? shoppingListCreateActionsPermission && isCanEditShoppingList\n    : true;\n\n  const submitShoppingList = useMemo(() => {\n    if (isB2BUser && shoppingListInfo) {\n      const { companyInfo, customerInfo } = shoppingListInfo;\n      const { submitShoppingListPermission: submitShoppingListPermissionCode } = b2bPermissionsMap;\n      const submitShoppingListPermissionLevel = verifyLevelPermission({\n        code: submitShoppingListPermissionCode,\n        companyId: Number(companyInfo?.companyId || 0),\n        userId: Number(customerInfo?.userId || 0),\n      });\n\n      return submitShoppingListPermissionLevel;\n    }\n\n    return submitShoppingListPermission;\n  }, [submitShoppingListPermission, isB2BUser, shoppingListInfo]);\n  const b2bSubmitShoppingListPermission = isB2BUser\n    ? submitShoppingList\n    : role === CustomerRole.JUNIOR_BUYER;\n\n  const isJuniorApprove =\n    shoppingListInfo?.status === ShoppingListStatus.Approved && b2bSubmitShoppingListPermission;\n\n  const isReadForApprove =\n    shoppingListInfo?.status === ShoppingListStatus.ReadyForApproval ||\n    shoppingListInfo?.status === ShoppingListStatus.Rejected ||\n    // Status code 20 was previously misused as Rejected in the frontend, which is actually Deleted\n    // We need to add Deleted here so that the shopping lists that were previously rejected remain the same behavior\n    shoppingListInfo?.status === ShoppingListStatus.Deleted;\n\n  const goToShoppingLists = () => {\n    navigate('/shoppingLists');\n  };\n\n  useEffect(() => {\n    dispatch({\n      type: 'init',\n      payload: {\n        id: parseInt(id, 10) || 0,\n      },\n    });\n    // disabling as we don't need a dispatcher here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  const handleGetProductsById = async (listProducts: ListItemProps[]) => {\n    if (listProducts.length > 0) {\n      try {\n        const productIds: number[] = [];\n        listProducts.forEach((item) => {\n          const { node } = item;\n          if (!productIds.includes(node.productId)) {\n            productIds.push(node.productId);\n          }\n        });\n\n        const newProductsSearch = await getProducts(productIds);\n\n        listProducts.forEach((item) => {\n          const { node } = item;\n\n          const productInfo = newProductsSearch.find((search: CustomFieldItems) => {\n            const { id: productId } = search;\n\n            return node.productId === productId;\n          });\n\n          node.productsSearch = productInfo || {};\n          node.productName = productInfo?.name || node.productName;\n          node.productUrl = productInfo?.productUrl || node.productUrl;\n\n          node.disableCurrentCheckbox = false;\n          if (node.quantity === 0) {\n            node.disableCurrentCheckbox = true;\n          }\n        });\n\n        return listProducts;\n      } catch (err: any) {\n        snackbar.error(err);\n      }\n    }\n\n    return [];\n  };\n\n  const getShoppingListDetails = async (params: SearchProps) => {\n    const shoppingListDetailInfo = await getShoppingList(params);\n    setIsRequestLoading(true);\n    const {\n      products: { edges, totalCount },\n    } = shoppingListDetailInfo;\n\n    const listProducts = await handleGetProductsById(edges);\n\n    await calculateProductListPrice(listProducts, '2');\n\n    if (isB2BUser) setCustomerInfo(shoppingListDetailInfo.customerInfo);\n    setShoppingListInfo(shoppingListDetailInfo);\n    setIsRequestLoading(false);\n    if (!listProducts) {\n      return {\n        edges: [],\n        totalCount: 0,\n      };\n    }\n\n    return {\n      edges: listProducts,\n      totalCount,\n    };\n  };\n\n  const handleUpdateShoppingList = async (status: number) => {\n    setIsRequestLoading(true);\n    try {\n      const params: UpdateShoppingListParamsProps = {\n        id: Number(id),\n        name: shoppingListInfo?.name || '',\n        description: shoppingListInfo?.description || '',\n      };\n\n      if (isB2BUser) {\n        await updateB2BShoppingList({\n          ...params,\n          status,\n        });\n      } else {\n        await updateBcShoppingList({\n          ...params,\n          channelId,\n        });\n      }\n\n      snackbar.success(b3Lang('shoppingList.shoppingListStatusUpdated'));\n      tableRef.current?.initSearch();\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const updateList = () => {\n    tableRef.current?.initSearch();\n  };\n\n  const handleCancelClick = () => {\n    setDeleteOpen(false);\n    setDeleteItemId('');\n  };\n\n  const handleDeleteItems = async (itemId: number | string = '') => {\n    setIsRequestLoading(true);\n\n    try {\n      if (itemId) {\n        await deleteShoppingListItem(itemId);\n\n        if (checkedArr.length > 0) {\n          const newCheckedArr = checkedArr.filter((item: ListItemProps) => {\n            const { itemId: checkedItemId } = item.node;\n\n            return itemId !== checkedItemId;\n          });\n\n          setCheckedArr([...newCheckedArr]);\n        }\n      } else {\n        if (checkedArr.length === 0) return;\n        checkedArr.forEach(async (item: ListItemProps) => {\n          const { node } = item;\n\n          await deleteShoppingListItem(node.itemId);\n        });\n\n        setCheckedArr([]);\n      }\n\n      snackbar.success(b3Lang('shoppingList.productRemoved'));\n    } finally {\n      setIsRequestLoading(false);\n      updateList();\n    }\n  };\n\n  const handleDeleteProductClick = async () => {\n    await handleDeleteItems(Number(deleteItemId));\n    await handleCancelClick();\n  };\n\n  const getJuniorPlaceOrder = async () => {\n    const {\n      storeConfigSwitchStatus: { isEnabled },\n    } = await getB2BJuniorPlaceOrder();\n\n    setAllowJuniorPlaceOrder(isEnabled === '1' && isCanAddToCart);\n  };\n\n  useEffect(() => {\n    if (isJuniorApprove) getJuniorPlaceOrder();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isJuniorApprove]);\n\n  useEffect(() => {\n    if (isB2BUser && shoppingListInfo) {\n      const { companyInfo, customerInfo } = shoppingListInfo;\n\n      const { shoppingListCreateActionsPermission } = b2bPermissionsMap;\n      const shoppingListActionsPermission = verifyLevelPermission({\n        code: shoppingListCreateActionsPermission,\n        companyId: Number(companyInfo?.companyId || 0),\n        userId: Number(customerInfo?.userId || 0),\n      });\n\n      setIsCanEditShoppingList(shoppingListActionsPermission);\n    }\n  }, [shoppingListInfo, isB2BUser]);\n\n  return (\n    <>\n      <Box\n        sx={{\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n        }}\n      >\n        <ShoppingDetailHeader\n          isB2BUser={isB2BUser}\n          shoppingListInfo={shoppingListInfo}\n          customerInfo={customerInfo}\n          role={role}\n          goToShoppingLists={goToShoppingLists}\n          handleUpdateShoppingList={handleUpdateShoppingList}\n          setOpenPage={setOpenPage}\n          isAgenting={isAgenting}\n          openAPPParams={openAPPParams}\n          customColor={primaryColor}\n        />\n\n        <Grid\n          container\n          spacing={2}\n          sx={{\n            marginTop: '0',\n            overflow: 'auto',\n            flexWrap: isMobile ? 'wrap' : 'nowrap',\n            paddingBottom: '20px',\n            marginBottom: isMobile ? '6rem' : 0,\n          }}\n        >\n          <Box\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                    pl: '16px',\n                  }\n                : {\n                    flexBasis: '690px',\n                    flexGrow: 1,\n                    ml: '16px',\n                    pt: '16px',\n                  }\n            }\n          >\n            <B3Spin isSpinning={isRequestLoading} spinningHeight=\"auto\">\n              <Grid\n                item\n                sx={\n                  isMobile\n                    ? {\n                        flexBasis: '100%',\n                      }\n                    : {\n                        flexBasis: '690px',\n                        flexGrow: 1,\n                      }\n                }\n              >\n                <ShoppingDetailTable\n                  ref={tableRef}\n                  isReadForApprove={isReadForApprove}\n                  isJuniorApprove={isJuniorApprove}\n                  allowJuniorPlaceOrder={allowJuniorPlaceOrder}\n                  setCheckedArr={setCheckedArr}\n                  shoppingListInfo={shoppingListInfo}\n                  isRequestLoading={isRequestLoading}\n                  setIsRequestLoading={setIsRequestLoading}\n                  shoppingListId={id}\n                  getShoppingListDetails={getShoppingListDetails}\n                  setDeleteOpen={setDeleteOpen}\n                  setDeleteItemId={setDeleteItemId}\n                  isB2BUser={isB2BUser}\n                  productQuoteEnabled={productQuoteEnabled}\n                  isCanEditShoppingList={isCanEditShoppingList}\n                  role={role}\n                />\n              </Grid>\n            </B3Spin>\n          </Box>\n\n          <Grid\n            item\n            sx={\n              isMobile\n                ? {\n                    flexBasis: '100%',\n                  }\n                : {\n                    flexBasis: '340px',\n                  }\n            }\n          >\n            {b2bAndBcShoppingListActionsPermissions && !isReadForApprove && !isJuniorApprove && (\n              <AddToShoppingList\n                updateList={updateList}\n                type=\"shoppingList\"\n                isB2BUser={isB2BUser}\n              />\n            )}\n          </Grid>\n        </Grid>\n\n        {!isReadForApprove &&\n          (allowJuniorPlaceOrder || productQuoteEnabled || !isJuniorApprove) && (\n            <ShoppingDetailFooter\n              shoppingListInfo={shoppingListInfo}\n              allowJuniorPlaceOrder={allowJuniorPlaceOrder}\n              checkedArr={checkedArr}\n              selectedSubTotal={calculateSubTotal(checkedArr)}\n              setLoading={setIsRequestLoading}\n              setDeleteOpen={setDeleteOpen}\n              setValidateFailureProducts={setValidateFailureProducts}\n              setValidateSuccessProducts={setValidateSuccessProducts}\n              isB2BUser={isB2BUser}\n              customColor={primaryColor}\n              isCanEditShoppingList={isCanEditShoppingList}\n              role={role}\n              backendValidationEnabled={backendValidationEnabled}\n            />\n          )}\n      </Box>\n\n      <ReAddToCart\n        shoppingListInfo={shoppingListInfo}\n        role={role}\n        products={validateFailureProducts}\n        successProducts={validateSuccessProducts.length}\n        allowJuniorPlaceOrder={allowJuniorPlaceOrder}\n        setValidateFailureProducts={setValidateFailureProducts}\n        setValidateSuccessProducts={setValidateSuccessProducts}\n        textAlign={isMobile ? 'left' : 'right'}\n        backendValidationEnabled={backendValidationEnabled}\n      />\n\n      <ShoppingDetailDeleteItems\n        open={deleteOpen}\n        handleCancelClick={handleCancelClick}\n        handleDeleteProductClick={handleDeleteProductClick}\n      />\n    </>\n  );\n}\n\nfunction ShoppingListDetailsContent({ setOpenPage }: PageProps) {\n  return (\n    <ShoppingListDetailsProvider>\n      <ShoppingListDetails setOpenPage={setOpenPage} />\n    </ShoppingListDetailsProvider>\n  );\n}\n\nexport default ShoppingListDetailsContent;\n","import { useEffect, useState } from 'react';\nimport styled from '@emotion/styled';\nimport { Delete } from '@mui/icons-material';\nimport { Alert, Box, Grid, Typography } from '@mui/material';\n\nimport { B3QuantityTextField } from '@/components';\nimport B3Dialog from '@/components/B3Dialog';\nimport CustomButton from '@/components/button/CustomButton';\nimport B3Spin from '@/components/spin/B3Spin';\nimport { CART_URL, CHECKOUT_URL, PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\nimport { activeCurrencyInfoSelector, rolePermissionSelector, useAppSelector } from '@/store';\nimport { ShoppingListStatus } from '@/types/shoppingList';\nimport { currencyFormat, snackbar } from '@/utils';\nimport { setModifierQtyPrice } from '@/utils/b3Product/b3Product';\nimport {\n  addLineItems,\n  getProductOptionsFields,\n  ProductsProps,\n} from '@/utils/b3Product/shared/config';\nimport b3TriggerCartNumber from '@/utils/b3TriggerCartNumber';\nimport { createOrUpdateExistingCart } from '@/utils/cartUtils';\n\ninterface ShoppingProductsProps {\n  shoppingListInfo: any;\n  role: string | number;\n  products: ProductsProps[];\n  successProducts: number;\n  allowJuniorPlaceOrder: boolean;\n  getProductQuantity?: (item: ProductsProps) => number;\n  onProductChange?: (products: ProductsProps[]) => void;\n  setValidateFailureProducts: (arr: ProductsProps[]) => void;\n  setValidateSuccessProducts: (arr: ProductsProps[]) => void;\n  textAlign?: string;\n  backendValidationEnabled: boolean;\n}\n\ninterface FlexProps {\n  isHeader?: boolean;\n  isMobile?: boolean;\n}\n\ninterface FlexItemProps {\n  width?: string;\n  padding?: string;\n  flexBasis?: string;\n  alignItems?: string;\n  flexDirection?:\n    | 'column'\n    | 'inherit'\n    | '-moz-initial'\n    | 'initial'\n    | 'revert'\n    | 'unset'\n    | 'column-reverse'\n    | 'row'\n    | 'row-reverse';\n  textAlignLocation?: string;\n}\n\nconst Flex = styled('div')<FlexProps>(({ isHeader, isMobile }) => {\n  const headerStyle = isHeader\n    ? {\n        borderBottom: '1px solid #D9DCE9',\n        paddingBottom: '8px',\n        alignItems: 'center',\n      }\n    : {\n        alignItems: 'flex-start',\n      };\n\n  const mobileStyle = isMobile\n    ? {\n        borderTop: '1px solid #D9DCE9',\n        padding: '12px 0 12px',\n        '&:first-of-type': {\n          marginTop: '12px',\n        },\n      }\n    : {};\n\n  const flexWrap = isMobile ? 'wrap' : 'initial';\n\n  return {\n    display: 'flex',\n    wordBreak: 'break-word',\n    padding: '8px 0 0',\n    gap: '8px',\n    flexWrap,\n    ...headerStyle,\n    ...mobileStyle,\n  };\n});\n\nconst FlexItem = styled(Box)(\n  ({\n    width,\n    padding = '0',\n    flexBasis,\n    flexDirection = 'row',\n    alignItems,\n    textAlignLocation,\n  }: FlexItemProps) => ({\n    display: 'flex',\n    justifyContent: textAlignLocation === 'right' ? 'flex-end' : 'flex-start',\n    flexDirection,\n    flexGrow: width ? 0 : 1,\n    flexShrink: width ? 0 : 1,\n    alignItems: alignItems || 'flex-start',\n    flexBasis,\n    width,\n    padding,\n  }),\n);\n\nconst ProductHead = styled('div')(() => ({\n  fontSize: '0.875rem',\n  lineHeight: '1.5',\n  color: '#263238',\n}));\n\nconst ProductImage = styled('img')(() => ({\n  width: '60px',\n  borderRadius: '4px',\n  flexShrink: 0,\n}));\n\nconst defaultItemStyle = {\n  default: {\n    width: '15%',\n  },\n  qty: {\n    width: '80px',\n  },\n  delete: {\n    width: '30px',\n  },\n};\n\nconst mobileItemStyle = {\n  default: {\n    width: '100%',\n    padding: '0 0 0 76px',\n  },\n  qty: {\n    width: '100%',\n    padding: '0 0 0 76px',\n  },\n  delete: {\n    width: '100%',\n    padding: '0 0 0 76px',\n    display: 'flex',\n    flexDirection: 'row-reverse',\n  },\n};\n\nexport default function ReAddToCart(props: ShoppingProductsProps) {\n  const {\n    shoppingListInfo,\n    products,\n    successProducts,\n    allowJuniorPlaceOrder,\n    setValidateFailureProducts,\n    setValidateSuccessProducts,\n    textAlign = 'left',\n    backendValidationEnabled,\n  } = props;\n\n  const { submitShoppingListPermission } = useAppSelector(rolePermissionSelector);\n\n  const b3Lang = useB3Lang();\n  const [isOpen, setOpen] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [isMobile] = useMobile();\n\n  const { decimal_places: decimalPlaces = 2 } = useAppSelector(activeCurrencyInfoSelector);\n\n  useEffect(() => {\n    if (products.length > 0) {\n      setOpen(true);\n    } else {\n      setOpen(false);\n    }\n  }, [products]);\n\n  const itemStyle = isMobile ? mobileItemStyle : defaultItemStyle;\n\n  const handleUpdateProductQty = async (\n    index: number,\n    value: number | string,\n    isValid: boolean,\n  ) => {\n    const newProduct: ProductsProps[] = [...products];\n    newProduct[index].node.quantity = Number(value);\n    newProduct[index].isValid = isValid;\n    const calculateProduct = await setModifierQtyPrice(newProduct[index].node, Number(value));\n    if (calculateProduct) {\n      (newProduct[index] as CustomFieldItems).node = calculateProduct;\n      setValidateFailureProducts(newProduct);\n    }\n  };\n\n  const handleCancelClicked = () => {\n    setOpen(false);\n    setValidateFailureProducts([]);\n    setValidateSuccessProducts([]);\n  };\n\n  const deleteProduct = (index: number) => {\n    const newProduct: ProductsProps[] = [...products];\n    newProduct.splice(index, 1);\n    setValidateFailureProducts(newProduct);\n  };\n\n  const shouldRedirectToCheckout = () => {\n    handleCancelClicked();\n    if (\n      allowJuniorPlaceOrder &&\n      submitShoppingListPermission &&\n      shoppingListInfo?.status === ShoppingListStatus.Approved\n    ) {\n      window.location.href = CHECKOUT_URL;\n    } else {\n      snackbar.success(b3Lang('shoppingList.reAddToCart.productsAdded'), {\n        action: {\n          label: b3Lang('shoppingList.reAddToCart.viewCart'),\n          onClick: () => {\n            if (window.b2b.callbacks.dispatchEvent('on-click-cart-button')) {\n              window.location.href = CART_URL;\n            }\n          },\n        },\n      });\n      b3TriggerCartNumber();\n    }\n  };\n\n  const handlePrimaryAction = async () => {\n    const isValidate = products.every((item: ProductsProps) => item.isValid);\n\n    if (!isValidate) {\n      snackbar.error(b3Lang('shoppingList.reAddToCart.fillCorrectQuantity'));\n      return;\n    }\n    try {\n      setLoading(true);\n\n      const lineItems = addLineItems(products);\n\n      const res = await createOrUpdateExistingCart(lineItems);\n\n      if (!res.errors) {\n        shouldRedirectToCheckout();\n      }\n\n      if (res.errors) {\n        snackbar.error(res.message);\n      }\n\n      b3TriggerCartNumber();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleReAddToCartBackend = async () => {\n    setLoading(true);\n\n    try {\n      const lineItems = addLineItems(products);\n      const res = await createOrUpdateExistingCart(lineItems);\n\n      if (!res.errors) {\n        shouldRedirectToCheckout();\n      }\n\n      b3TriggerCartNumber();\n    } catch (e: unknown) {\n      if (e instanceof Error) {\n        snackbar.error(e.message);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addOrProceedToCheckout = async () => {\n    if (backendValidationEnabled) {\n      await handleReAddToCartBackend();\n    } else {\n      handlePrimaryAction();\n    }\n  };\n\n  // this need the information of the SearchGraphlQuery endpoint change\n  const handleClearNoStock = async () => {\n    const newProduct = products.filter(\n      (item: ProductsProps) => item.isStock === '0' || item.stock !== 0,\n    );\n    const requestArr: Promise<any>[] = [];\n    newProduct.forEach((product) => {\n      const item = product;\n      const {\n        node: { quantity },\n        minQuantity = 0,\n        maxQuantity = 0,\n        isStock,\n        stock,\n      } = product;\n\n      const quantityNumber = parseInt(`${quantity}`, 10) || 0;\n      if (minQuantity !== 0 && quantityNumber < minQuantity) {\n        item.node.quantity = minQuantity;\n      } else if (maxQuantity !== 0 && quantityNumber > maxQuantity) {\n        item.node.quantity = maxQuantity;\n      }\n      if (isStock !== '0' && stock && (quantity ? Number(quantity) : 0) > stock) {\n        item.node.quantity = stock;\n      }\n\n      item.isValid = true;\n\n      const qty = product?.node?.quantity ? Number(product.node.quantity) : 0;\n\n      requestArr.push(setModifierQtyPrice(product.node, qty));\n    });\n\n    const productArr = await Promise.all(requestArr);\n\n    productArr.forEach((item, index) => {\n      newProduct[index].node = item;\n    });\n    setValidateFailureProducts(newProduct);\n  };\n\n  return (\n    <B3Dialog\n      isOpen={isOpen}\n      handleLeftClick={handleCancelClicked}\n      handRightClick={addOrProceedToCheckout}\n      title={\n        allowJuniorPlaceOrder\n          ? b3Lang('shoppingList.reAddToCart.proceedToCheckout')\n          : b3Lang('shoppingList.reAddToCart.addToCart')\n      }\n      rightSizeBtn={\n        allowJuniorPlaceOrder\n          ? b3Lang('shoppingList.reAddToCart.proceedToCheckout')\n          : b3Lang('shoppingList.reAddToCart.addToCart')\n      }\n      maxWidth=\"xl\"\n    >\n      <Grid>\n        <Box\n          sx={{\n            m: '0 0 1rem 0',\n          }}\n        >\n          <Alert variant=\"filled\" severity=\"success\">\n            {allowJuniorPlaceOrder\n              ? b3Lang('shoppingList.reAddToCart.productsCanCheckout', {\n                  successProducts,\n                })\n              : b3Lang('shoppingList.reAddToCart.productsAddedToCart', {\n                  successProducts,\n                })}\n          </Alert>\n        </Box>\n\n        <Box\n          sx={{\n            m: '1rem 0',\n          }}\n        >\n          <Alert variant=\"filled\" severity=\"error\">\n            {allowJuniorPlaceOrder\n              ? b3Lang('shoppingList.reAddToCart.productsCantCheckout', {\n                  quantity: products.length,\n                })\n              : b3Lang('shoppingList.reAddToCart.productsNotAddedToCart', {\n                  quantity: products.length,\n                })}\n          </Alert>\n        </Box>\n        <B3Spin isSpinning={loading} size={16} isFlex={false}>\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              margin: '0.5rem 0 1rem 0',\n            }}\n          >\n            <Box\n              sx={{\n                fontSize: '24px',\n              }}\n            >\n              {b3Lang('shoppingList.reAddToCart.productCount', {\n                quantity: products.length,\n              })}\n            </Box>\n            <CustomButton onClick={() => handleClearNoStock()}>\n              {b3Lang('shoppingList.reAddToCart.adjustQuantity')}\n            </CustomButton>\n          </Box>\n\n          {products.length > 0 ? (\n            <Box>\n              {!isMobile && (\n                <Flex isHeader isMobile={isMobile}>\n                  <FlexItem>\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.product')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.price')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem\n                    sx={{\n                      justifyContent: 'center',\n                    }}\n                    {...itemStyle.default}\n                    textAlignLocation={textAlign}\n                  >\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.quantity')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                    <ProductHead>{b3Lang('shoppingList.reAddToCart.total')}</ProductHead>\n                  </FlexItem>\n                  <FlexItem {...itemStyle.delete}>\n                    <ProductHead> </ProductHead>\n                  </FlexItem>\n                </Flex>\n              )}\n              {products.map((product: ProductsProps, index: number) => {\n                const { isStock, maxQuantity, minQuantity, stock } = product;\n\n                const {\n                  quantity = 1,\n                  primaryImage,\n                  productName,\n                  variantSku,\n                  optionList,\n                  productsSearch,\n                  basePrice,\n                } = product.node;\n\n                const price = Number(basePrice);\n                const total = (price * (quantity ? Number(quantity) : 0)).toFixed(decimalPlaces);\n\n                const newProduct: any = {\n                  ...productsSearch,\n                  selectOptions: optionList,\n                };\n\n                const productFields = getProductOptionsFields(newProduct, {});\n\n                const newOptionList = JSON.parse(optionList);\n                const optionsValue: CustomFieldItems[] = productFields.filter(\n                  (item) => item.valueText,\n                );\n\n                return (\n                  <Flex isMobile={isMobile} key={variantSku}>\n                    <FlexItem>\n                      <ProductImage src={primaryImage || PRODUCT_DEFAULT_IMAGE} />\n                      <Box\n                        sx={{\n                          marginLeft: '16px',\n                        }}\n                      >\n                        <Typography variant=\"body1\" color=\"#212121\">\n                          {productName}\n                        </Typography>\n                        <Typography variant=\"body1\" color=\"#616161\">\n                          {variantSku}\n                        </Typography>\n                        {newOptionList.length > 0 &&\n                          optionsValue.length > 0 &&\n                          optionsValue.map((option: CustomFieldItems) => (\n                            <Typography\n                              sx={{\n                                fontSize: '0.75rem',\n                                lineHeight: '1.5',\n                                color: '#455A64',\n                              }}\n                              key={option.valueLabel}\n                            >\n                              {`${option.valueLabel}: ${option.valueText}`}\n                            </Typography>\n                          ))}\n                      </Box>\n                    </FlexItem>\n                    <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                      {isMobile && <span>Price: </span>}\n                      {currencyFormat(price)}\n                    </FlexItem>\n                    <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                      <B3QuantityTextField\n                        isStock={isStock}\n                        maxQuantity={maxQuantity}\n                        minQuantity={minQuantity}\n                        stock={stock}\n                        value={quantity}\n                        onChange={(value, isValid) => {\n                          handleUpdateProductQty(index, value, isValid);\n                        }}\n                      />\n                    </FlexItem>\n                    <FlexItem {...itemStyle.default} textAlignLocation={textAlign}>\n                      {isMobile && <div>Total: </div>}\n                      {currencyFormat(total)}\n                    </FlexItem>\n\n                    <FlexItem {...itemStyle.delete}>\n                      <Delete\n                        sx={{\n                          cursor: 'pointer',\n                          color: 'rgba(0, 0, 0, 0.54)',\n                        }}\n                        onClick={() => {\n                          deleteProduct(index);\n                        }}\n                      />\n                    </FlexItem>\n                  </Flex>\n                );\n              })}\n            </Box>\n          ) : null}\n        </B3Spin>\n      </Grid>\n    </B3Dialog>\n  );\n}\n","import { Box } from '@mui/material';\n\nimport B3Dialog from '@/components/B3Dialog';\nimport { useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\n\ninterface ShoppingDetailDeleteItemsProps {\n  open: boolean;\n  handleCancelClick: () => void;\n  handleDeleteProductClick: () => void;\n}\n\nfunction ShoppingDetailDeleteItems(props: ShoppingDetailDeleteItemsProps) {\n  const b3Lang = useB3Lang();\n  const [isMobile] = useMobile();\n  const { open, handleCancelClick, handleDeleteProductClick } = props;\n\n  return (\n    <B3Dialog\n      isOpen={open}\n      title={b3Lang('shoppingList.deleteItems.subtotal')}\n      leftSizeBtn={b3Lang('shoppingList.deleteItems.cancel')}\n      rightSizeBtn={b3Lang('shoppingList.deleteItems.delete')}\n      handleLeftClick={handleCancelClick}\n      handRightClick={handleDeleteProductClick}\n      rightStyleBtn={{\n        color: '#D32F2F',\n      }}\n    >\n      <Box\n        sx={{\n          display: 'flex',\n          width: isMobile ? '100%' : '450px',\n          height: '100%',\n        }}\n      >\n        {b3Lang('shoppingList.deleteItems.confirmDelete')}\n      </Box>\n    </B3Dialog>\n  );\n}\n\nexport default ShoppingDetailDeleteItems;\n","import { useContext, useRef, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ArrowDropDown, Delete } from '@mui/icons-material';\nimport { Box, Grid, Menu, MenuItem, Typography } from '@mui/material';\nimport Cookies from 'js-cookie';\nimport { v1 as uuid } from 'uuid';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { CART_URL, CHECKOUT_URL, PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useFeatureFlags, useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\nimport { GlobalContext } from '@/shared/global';\nimport { getVariantInfoBySkus, searchProducts } from '@/shared/service/b2b/graphql/product';\nimport { deleteCart, getCart } from '@/shared/service/bc/graphql/cart';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { ShoppingListStatus } from '@/types/shoppingList';\nimport { currencyFormat, snackbar } from '@/utils';\nimport b2bLogger from '@/utils/b3Logger';\nimport {\n  addQuoteDraftProducts,\n  calculateProductListPrice,\n  validProductQty,\n} from '@/utils/b3Product/b3Product';\nimport {\n  addLineItems,\n  conversionProductsList,\n  ProductsProps,\n} from '@/utils/b3Product/shared/config';\nimport b3TriggerCartNumber from '@/utils/b3TriggerCartNumber';\nimport { createOrUpdateExistingCart, deleteCartData, updateCart } from '@/utils/cartUtils';\nimport { validateProducts } from '@/utils/validateProducts';\n\ninterface ShoppingDetailFooterProps {\n  shoppingListInfo: any;\n  allowJuniorPlaceOrder: boolean;\n  checkedArr: any;\n  selectedSubTotal: number;\n  setLoading: (val: boolean) => void;\n  setDeleteOpen: (val: boolean) => void;\n  setValidateFailureProducts: (arr: ProductsProps[]) => void;\n  setValidateSuccessProducts: (arr: ProductsProps[]) => void;\n  isB2BUser: boolean;\n  customColor: string;\n  isCanEditShoppingList: boolean;\n  role: string | number;\n  backendValidationEnabled: boolean;\n}\n\ninterface ProductInfoProps {\n  basePrice: number | string;\n  baseSku: string;\n  createdAt: number;\n  discount: number | string;\n  enteredInclusive: boolean;\n  id: number | string;\n  itemId: number;\n  optionList: string;\n  primaryImage: string;\n  productId: number;\n  productName: string;\n  productUrl: string;\n  quantity: number | string;\n  tax: number | string;\n  updatedAt: number;\n  variantId: number;\n  variantSku: string;\n  productsSearch: CustomFieldItems;\n}\n\ninterface ListItemProps {\n  node: ProductInfoProps;\n}\n\nfunction ShoppingDetailFooter(props: ShoppingDetailFooterProps) {\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n  const navigate = useNavigate();\n  const featureFlags = useFeatureFlags();\n\n  const {\n    state: { productQuoteEnabled = false },\n  } = useContext(GlobalContext);\n  const isAgenting = useAppSelector(({ b2bFeatures }) => b2bFeatures.masqueradeCompany.isAgenting);\n  const companyId = useAppSelector(({ company }) => company.companyInfo.id);\n  const customerGroupId = useAppSelector(({ company }) => company.customer.customerGroupId);\n  const {\n    shoppingListCreateActionsPermission,\n    purchasabilityPermission,\n    submitShoppingListPermission,\n  } = useAppSelector(rolePermissionSelector);\n  const ref = useRef<HTMLButtonElement | null>(null);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const cartEntityId = Cookies.get('cartId');\n\n  const containerStyle = isMobile\n    ? {\n        alignItems: 'flex-start',\n        flexDirection: 'column',\n      }\n    : {\n        alignItems: 'center',\n      };\n\n  const {\n    shoppingListInfo,\n    allowJuniorPlaceOrder,\n    checkedArr,\n    selectedSubTotal,\n    setLoading,\n    setDeleteOpen,\n    setValidateFailureProducts,\n    setValidateSuccessProducts,\n    isB2BUser,\n    customColor,\n    isCanEditShoppingList,\n    role,\n    backendValidationEnabled,\n  } = props;\n\n  const b2bShoppingListActionsPermission = isB2BUser ? shoppingListCreateActionsPermission : true;\n  const isCanAddToCart = isB2BUser ? purchasabilityPermission : true;\n  const b2bSubmitShoppingListPermission = isB2BUser\n    ? submitShoppingListPermission\n    : Number(role) === 2;\n\n  const handleOpenBtnList = () => {\n    if (checkedArr.length === 0) {\n      snackbar.error(b3Lang('shoppingList.footer.selectOneItem'));\n    } else {\n      setIsOpen(true);\n    }\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const verifyInventory = (inventoryInfos: ProductsProps[]) => {\n    const validateFailureArr: ProductsProps[] = [];\n    const validateSuccessArr: ProductsProps[] = [];\n\n    checkedArr.forEach((item: ProductsProps) => {\n      const { node } = item;\n\n      const inventoryInfo: CustomFieldItems =\n        inventoryInfos.find((option: CustomFieldItems) => option.variantSku === node.variantSku) ||\n        {};\n\n      if (inventoryInfo) {\n        let isPassVerify = true;\n        if (\n          inventoryInfo.isStock === '1' &&\n          (node?.quantity ? Number(node.quantity) : 0) > inventoryInfo.stock\n        )\n          isPassVerify = false;\n\n        if (\n          inventoryInfo.minQuantity !== 0 &&\n          (node?.quantity ? Number(node.quantity) : 0) < inventoryInfo.minQuantity\n        )\n          isPassVerify = false;\n\n        if (\n          inventoryInfo.maxQuantity !== 0 &&\n          (node?.quantity ? Number(node.quantity) : 0) > inventoryInfo.maxQuantity\n        )\n          isPassVerify = false;\n\n        if (isPassVerify) {\n          validateSuccessArr.push({\n            node,\n          });\n        } else {\n          validateFailureArr.push({\n            node: {\n              ...node,\n            },\n            stock: inventoryInfo.stock,\n            isStock: inventoryInfo.isStock,\n            maxQuantity: inventoryInfo.maxQuantity,\n            minQuantity: inventoryInfo.minQuantity,\n          });\n        }\n      }\n    });\n\n    return {\n      validateFailureArr,\n      validateSuccessArr,\n    };\n  };\n\n  const addToQuote = async (products: CustomFieldItems[]) => {\n    if (featureFlags['B2B-3318.move_stock_and_backorder_validation_to_backend']) {\n      const validatedProducts = await validateProducts(products, b3Lang);\n\n      addQuoteDraftProducts(validatedProducts);\n\n      return validatedProducts.length > 0;\n    }\n\n    addQuoteDraftProducts(products);\n\n    return true;\n  };\n\n  const shouldRedirectCheckout = () => {\n    if (\n      allowJuniorPlaceOrder &&\n      b2bSubmitShoppingListPermission &&\n      shoppingListInfo?.status === ShoppingListStatus.Approved\n    ) {\n      window.location.href = CHECKOUT_URL;\n    } else {\n      snackbar.success(b3Lang('shoppingList.footer.productsAddedToCart'), {\n        action: {\n          label: b3Lang('shoppingList.reAddToCart.viewCart'),\n          onClick: () => {\n            if (window.b2b.callbacks.dispatchEvent('on-click-cart-button')) {\n              window.location.href = CART_URL;\n            }\n          },\n        },\n      });\n      b3TriggerCartNumber();\n    }\n  };\n\n  const handleAddToCartOnFrontend = async () => {\n    try {\n      const skus: string[] = [];\n\n      let cantPurchase = '';\n\n      checkedArr.forEach((item: ProductsProps) => {\n        const { node } = item;\n\n        if (node.productsSearch.availability === 'disabled') {\n          cantPurchase += `${node.variantSku},`;\n        }\n\n        skus.push(node.variantSku);\n      });\n\n      if (cantPurchase) {\n        snackbar.error(\n          b3Lang('shoppingList.footer.unavailableProducts', {\n            skus: cantPurchase.slice(0, -1),\n          }),\n        );\n        return;\n      }\n\n      if (skus.length === 0) {\n        snackbar.error(\n          allowJuniorPlaceOrder\n            ? b3Lang('shoppingList.footer.selectItemsToCheckout')\n            : b3Lang('shoppingList.footer.selectItemsToAddToCart'),\n        );\n        return;\n      }\n\n      const getInventoryInfos = await getVariantInfoBySkus(skus);\n\n      const { validateFailureArr, validateSuccessArr } = verifyInventory(\n        getInventoryInfos?.variantSku || [],\n      );\n\n      if (validateSuccessArr.length !== 0) {\n        const lineItems = addLineItems(validateSuccessArr);\n        const deleteCartObject = deleteCartData(cartEntityId);\n        const cartInfo = await getCart();\n        let res = null;\n        // @ts-expect-error Keeping it like this to avoid breaking changes, will fix in a following commit.\n        if (allowJuniorPlaceOrder && cartInfo.length) {\n          await deleteCart(deleteCartObject);\n          res = await updateCart(cartInfo, lineItems);\n        } else {\n          res = await createOrUpdateExistingCart(lineItems);\n          b3TriggerCartNumber();\n        }\n        if (res && res.errors) {\n          snackbar.error(res.errors[0].message);\n        } else if (validateFailureArr.length === 0) {\n          shouldRedirectCheckout();\n        }\n      }\n\n      setValidateFailureProducts(validateFailureArr);\n      setValidateSuccessProducts(validateSuccessArr);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddToCartBackend = async () => {\n    const items = checkedArr.map(({ node }: ProductsProps) => {\n      return { node };\n    });\n    try {\n      const skus = items.map(({ node }: ProductsProps) => node.variantSku);\n\n      if (skus.length === 0) {\n        snackbar.error(\n          allowJuniorPlaceOrder\n            ? b3Lang('shoppingList.footer.selectItemsToCheckout')\n            : b3Lang('shoppingList.footer.selectItemsToAddToCart'),\n        );\n        return;\n      }\n\n      const lineItems = addLineItems(items);\n      const deleteCartObject = deleteCartData(items);\n      const cartInfo = await getCart();\n\n      if (allowJuniorPlaceOrder && cartInfo.data.site.cart) {\n        await deleteCart(deleteCartObject);\n        await updateCart(cartInfo, lineItems);\n      } else {\n        await createOrUpdateExistingCart(lineItems);\n        b3TriggerCartNumber();\n      }\n      shouldRedirectCheckout();\n    } catch (e: unknown) {\n      if (e instanceof Error) {\n        setValidateFailureProducts(items);\n        snackbar.error(e.message);\n      }\n    } finally {\n      setLoading(false);\n    }\n    setValidateSuccessProducts(items);\n  };\n\n  // Add selected product to cart\n  const handleAddProductsToCart = async () => {\n    if (checkedArr.length === 0) {\n      snackbar.error(b3Lang('shoppingList.footer.selectOneItem'));\n      return;\n    }\n\n    handleClose();\n\n    setLoading(true);\n\n    if (backendValidationEnabled) {\n      await handleAddToCartBackend();\n    } else {\n      await handleAddToCartOnFrontend();\n    }\n  };\n\n  // Add selected to quote\n  const getOptionsList = (options: []) => {\n    if (options?.length === 0) return [];\n\n    const option = options.map(\n      ({\n        option_id: optionId,\n        option_value: optionValue,\n      }: {\n        option_id: string | number;\n        option_value: string | number;\n      }) => ({\n        optionId,\n        optionValue,\n      }),\n    );\n\n    return option;\n  };\n\n  const handleAddSelectedToQuote = async () => {\n    if (checkedArr.length === 0) {\n      snackbar.error(b3Lang('shoppingList.footer.selectOneItem'));\n      return;\n    }\n    setLoading(true);\n    handleClose();\n    try {\n      const productsWithSku = checkedArr.filter((checkedItem: ListItemProps) => {\n        const {\n          node: { variantSku },\n        } = checkedItem;\n\n        return variantSku !== '' && variantSku !== null && variantSku !== undefined;\n      });\n\n      const noSkuProducts = checkedArr.filter((checkedItem: ListItemProps) => {\n        const {\n          node: { variantSku },\n        } = checkedItem;\n\n        return !variantSku;\n      });\n      if (noSkuProducts.length > 0) {\n        snackbar.error(b3Lang('shoppingList.footer.cantAddProductsNoSku'));\n      }\n      if (noSkuProducts.length === checkedArr.length) return;\n\n      const productIds: number[] = [];\n      productsWithSku.forEach((product: ListItemProps) => {\n        const { node } = product;\n\n        if (!productIds.includes(Number(node.productId))) {\n          productIds.push(Number(node.productId));\n        }\n      });\n\n      const { productsSearch } = await searchProducts({\n        productIds,\n        companyId,\n        customerGroupId,\n      });\n\n      const newProductInfo: CustomFieldItems = conversionProductsList(productsSearch);\n      let errorMessage = '';\n      let isFondVariant = true;\n\n      const newProducts: CustomFieldItems[] = [];\n      productsWithSku.forEach((product: ListItemProps) => {\n        const {\n          node: {\n            basePrice,\n            optionList,\n            variantSku,\n            productId,\n            productName,\n            quantity,\n            variantId,\n            tax,\n          },\n        } = product;\n\n        const optionsList = getOptionsList(JSON.parse(optionList));\n\n        const currentProductSearch = newProductInfo.find(\n          (product: CustomFieldItems) => Number(product.id) === Number(productId),\n        );\n\n        const variantItem = currentProductSearch?.variants.find(\n          (item: CustomFieldItems) => item.sku === variantSku,\n        );\n\n        if (!variantItem) {\n          errorMessage = b3Lang('shoppingList.footer.notFoundSku', {\n            sku: variantSku,\n          });\n          isFondVariant = false;\n        }\n\n        const quoteListitem = {\n          node: {\n            id: uuid(),\n            variantSku: variantItem?.sku || variantSku,\n            variantId,\n            productsSearch: {\n              ...currentProductSearch,\n              newSelectOptionList: optionsList,\n              variantId,\n            },\n            primaryImage: variantItem?.image_url || PRODUCT_DEFAULT_IMAGE,\n            productName,\n            quantity: Number(quantity) || 1,\n            optionList: JSON.stringify(optionsList),\n            productId,\n            basePrice,\n            tax,\n          },\n        };\n\n        newProducts.push(quoteListitem);\n      });\n\n      const isValidQty = validProductQty(newProducts);\n\n      if (!isFondVariant) {\n        snackbar.error(errorMessage);\n\n        return;\n      }\n\n      if (isValidQty) {\n        await calculateProductListPrice(newProducts, '2');\n\n        const success = await addToQuote(newProducts);\n        if (success) {\n          snackbar.success(b3Lang('shoppingList.footer.productsAddedToQuote'), {\n            action: {\n              label: b3Lang('shoppingList.footer.viewQuote'),\n              onClick: () => {\n                navigate('/quoteDraft');\n              },\n            },\n          });\n        }\n      } else {\n        snackbar.error(b3Lang('shoppingList.footer.productsLimit'), {\n          action: {\n            label: b3Lang('shoppingList.footer.viewQuote'),\n            onClick: () => {\n              navigate('/quoteDraft');\n            },\n          },\n        });\n      }\n    } catch (e) {\n      b2bLogger.error(e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const buttons = {\n    adSelectedToCart: {\n      name: b3Lang('shoppingList.footer.addToCart'),\n      key: 'add-selected-to-cart',\n      handleClick: handleAddProductsToCart,\n      isDisabled: false,\n    },\n    proceedToCheckout: {\n      name: b3Lang('shoppingList.footer.proceedToCheckout'),\n      key: 'add-select-to-checkout',\n      handleClick: handleAddProductsToCart,\n      isDisabled: false,\n    },\n    addSelectedToQuote: {\n      name: b3Lang('shoppingList.footer.addToQuote'),\n      key: 'add-selected-to-quote',\n      handleClick: handleAddSelectedToQuote,\n      isDisabled: false,\n    },\n  };\n\n  const allowButtonList = () => {\n    if (!(shoppingListInfo?.status === ShoppingListStatus.Approved || !isB2BUser)) return [];\n\n    if (!isCanAddToCart && isB2BUser)\n      return productQuoteEnabled ? [buttons.addSelectedToQuote] : [];\n\n    if (b2bSubmitShoppingListPermission) {\n      if (allowJuniorPlaceOrder && productQuoteEnabled) {\n        return [buttons.proceedToCheckout, buttons.addSelectedToQuote];\n      }\n\n      if (allowJuniorPlaceOrder) return [buttons.proceedToCheckout];\n      if (productQuoteEnabled) {\n        return [buttons.addSelectedToQuote];\n      }\n      return [];\n    }\n\n    return productQuoteEnabled\n      ? [buttons.adSelectedToCart, buttons.addSelectedToQuote]\n      : [buttons.adSelectedToCart];\n  };\n\n  const buttonList = allowButtonList();\n\n  return (\n    <Grid\n      sx={{\n        position: 'fixed',\n        bottom: isMobile && isAgenting ? '52px' : 0,\n        left: 0,\n        backgroundColor: '#fff',\n        width: '100%',\n        padding: isMobile ? '0 0 1rem 0' : '0 40px 1rem 40px',\n        height: isMobile ? '8rem' : 'auto',\n        marginLeft: 0,\n        display: 'flex',\n        flexWrap: 'nowrap',\n        zIndex: '999',\n      }}\n      container\n      spacing={2}\n    >\n      <Grid\n        item\n        sx={{\n          display: isMobile ? 'none' : 'block',\n          width: '290px',\n          paddingLeft: '20px',\n        }}\n      />\n      <Grid\n        item\n        sx={\n          isMobile\n            ? {\n                flexBasis: '100%',\n              }\n            : {\n                flexBasis: '690px',\n                flexGrow: 1,\n              }\n        }\n      >\n        <Box\n          sx={{\n            width: '100%',\n            pr: '20px',\n            display: 'flex',\n            zIndex: '999',\n            justifyContent: 'space-between',\n            ...containerStyle,\n          }}\n        >\n          <Typography\n            sx={{\n              color: '#000000',\n              fontSize: '16px',\n              fontWeight: '400',\n            }}\n          >\n            {b3Lang('shoppingList.footer.selectedProducts', {\n              quantity: checkedArr.length,\n            })}\n          </Typography>\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'center',\n              flexWrap: isMobile ? 'wrap' : 'nowrap',\n            }}\n          >\n            <Typography\n              variant=\"h6\"\n              sx={{\n                fontSize: '16px',\n                fontWeight: '700',\n                color: '#000000',\n              }}\n            >\n              {b3Lang('shoppingList.footer.subtotal', {\n                subtotal: currencyFormat(selectedSubTotal),\n              })}\n            </Typography>\n            <Box\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                marginTop: isMobile ? '0.5rem' : 0,\n                width: isMobile ? '100%' : 'auto',\n              }}\n            >\n              {!allowJuniorPlaceOrder &&\n                isCanEditShoppingList &&\n                b2bShoppingListActionsPermission && (\n                  <CustomButton\n                    sx={{\n                      padding: '5px',\n                      border: `1px solid ${customColor || '#1976d2'}`,\n                      margin: isMobile ? '0 1rem 0 0' : '0 1rem',\n                      minWidth: 'auto',\n                    }}\n                    disabled={shoppingListInfo?.status === ShoppingListStatus.ReadyForApproval}\n                  >\n                    <Delete\n                      color=\"primary\"\n                      sx={{\n                        color: customColor,\n                      }}\n                      onClick={() => {\n                        setDeleteOpen(true);\n                      }}\n                    />\n                  </CustomButton>\n                )}\n              {buttonList.length ? (\n                <Box\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    marginTop: isMobile ? '0.5rem' : 0,\n                    marginLeft: isMobile ? 0 : '20px',\n                    width: isMobile ? '100%' : 'auto',\n                  }}\n                >\n                  {buttonList.length === 1 && buttonList[0] && (\n                    <CustomButton\n                      variant=\"contained\"\n                      onClick={buttonList[0].handleClick}\n                      sx={{\n                        marginRight: isMobile ? '1rem' : 0,\n                        width: isMobile ? '100%' : 'auto',\n                      }}\n                    >\n                      {buttonList[0].name}\n                    </CustomButton>\n                  )}\n                  {buttonList.length === 2 && (\n                    <>\n                      <CustomButton\n                        variant=\"contained\"\n                        onClick={handleOpenBtnList}\n                        ref={ref}\n                        sx={{\n                          marginRight: isMobile ? '1rem' : 0,\n                          width: isMobile ? '100%' : 'auto',\n                        }}\n                        endIcon={<ArrowDropDown />}\n                      >\n                        {b3Lang('shoppingList.footer.addSelectedTo')}\n                      </CustomButton>\n                      <Menu\n                        id=\"basic-menu\"\n                        anchorEl={ref.current}\n                        open={isOpen}\n                        onClose={handleClose}\n                        MenuListProps={{\n                          'aria-labelledby': 'basic-button',\n                        }}\n                      >\n                        {buttonList.length > 1 &&\n                          buttonList.map((button) => (\n                            <MenuItem\n                              key={button.key}\n                              onClick={() => {\n                                button.handleClick();\n                              }}\n                            >\n                              {button.name}\n                            </MenuItem>\n                          ))}\n                      </Menu>\n                    </>\n                  )}\n                </Box>\n              ) : null}\n            </Box>\n          </Box>\n        </Box>\n      </Grid>\n      <Grid\n        item\n        sx={\n          isMobile\n            ? {\n                flexBasis: '100%',\n                display: isMobile ? 'none' : 'block',\n              }\n            : {\n                flexBasis: '340px',\n                display: isMobile ? 'none' : 'block',\n              }\n        }\n      />\n    </Grid>\n  );\n}\n\nexport default ShoppingDetailFooter;\n","import { useContext, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ArrowBackIosNew } from '@mui/icons-material';\nimport { Box, Grid, styled, Typography } from '@mui/material';\n\nimport CustomButton from '@/components/button/CustomButton';\nimport { getContrastColor } from '@/components/outSideComponents/utils/b3CustomStyles';\nimport { useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\nimport { type SetOpenPage } from '@/pages/SetOpenPage';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { ShoppingListStatus } from '@/types/shoppingList';\nimport { verifyLevelPermission, verifySubmitShoppingListSubsidiariesPermission } from '@/utils';\nimport { b2bPermissionsMap } from '@/utils/b3CheckPermissions/config';\n\nimport { ShoppingListStatusTag } from '../../ShoppingLists/ShoppingListStatusTag';\n\nconst StyledCreateName = styled('div')(() => ({\n  display: 'flex',\n  alignItems: 'center',\n}));\n\ninterface ShoppingDetailHeaderProps {\n  shoppingListInfo: any;\n  role: string | number;\n  customerInfo: any;\n  goToShoppingLists: () => void;\n  handleUpdateShoppingList: (status: number) => void;\n  isB2BUser: boolean;\n  setOpenPage: SetOpenPage;\n  isAgenting: boolean;\n  openAPPParams: {\n    shoppingListBtn: string;\n  };\n  customColor: string;\n}\n\nfunction ShoppingDetailHeader(props: ShoppingDetailHeaderProps) {\n  const b3Lang = useB3Lang();\n  const [isMobile] = useMobile();\n\n  const {\n    shoppingListInfo,\n    customerInfo,\n    handleUpdateShoppingList,\n    goToShoppingLists,\n    isB2BUser,\n    setOpenPage,\n    openAPPParams,\n    customColor,\n  } = props;\n\n  const {\n    state: {\n      portalStyle: { backgroundColor = '#FEF9F5' },\n    },\n  } = useContext(CustomStyleContext);\n  const navigate = useNavigate();\n\n  const { selectCompanyHierarchyId } = useAppSelector(\n    ({ company }) => company.companyHierarchyInfo,\n  );\n\n  const {\n    submitShoppingListPermission: submitShoppingList,\n    approveShoppingListPermission: approveShoppingList,\n  } = useAppSelector(rolePermissionSelector);\n\n  const shoppingListPermissions = useMemo(() => {\n    if (isB2BUser) {\n      const companyInfo = shoppingListInfo?.companyInfo || {};\n\n      const {\n        submitShoppingListPermission: submitShoppingListPermissionCode,\n        approveShoppingListPermission: approveShoppingListPermissionCode,\n      } = b2bPermissionsMap;\n      const submitShoppingListPermissionLevel = verifySubmitShoppingListSubsidiariesPermission({\n        code: submitShoppingListPermissionCode,\n        userId: Number(customerInfo?.userId || 0),\n        selectId: Number(selectCompanyHierarchyId),\n      });\n\n      const approveShoppingListPermissionLevel = verifyLevelPermission({\n        code: approveShoppingListPermissionCode,\n        companyId: Number(companyInfo?.companyId || 0),\n        userId: Number(customerInfo?.userId || 0),\n      });\n\n      return {\n        submitShoppingListPermission: submitShoppingListPermissionLevel,\n        approveShoppingListPermission: approveShoppingListPermissionLevel,\n      };\n    }\n\n    return {\n      submitShoppingListPermission: submitShoppingList,\n      approveShoppingListPermission: approveShoppingList,\n    };\n  }, [\n    customerInfo,\n    isB2BUser,\n    submitShoppingList,\n    approveShoppingList,\n    shoppingListInfo?.companyInfo,\n    selectCompanyHierarchyId,\n  ]);\n\n  const isDisabledBtn = shoppingListInfo?.products?.edges.length === 0;\n\n  const { submitShoppingListPermission, approveShoppingListPermission } = shoppingListPermissions;\n\n  const gridOptions = (xs: number) =>\n    isMobile\n      ? {}\n      : {\n          xs,\n        };\n  return (\n    <>\n      <Box\n        sx={{\n          marginBottom: '16px',\n          width: 'fit-content',\n        }}\n      >\n        <Box\n          sx={{\n            color: '#1976d2',\n            cursor: 'pointer',\n            display: 'flex',\n            alignItems: 'center',\n          }}\n          onClick={() => {\n            if (openAPPParams.shoppingListBtn !== 'add') {\n              goToShoppingLists();\n            } else {\n              navigate('/');\n              setOpenPage({\n                isOpen: false,\n                openUrl: '',\n              });\n            }\n          }}\n        >\n          <ArrowBackIosNew\n            fontSize=\"small\"\n            sx={{\n              fontSize: '12px',\n              marginRight: '0.5rem',\n              color: customColor,\n            }}\n          />\n          <Box\n            sx={{\n              margin: 0,\n              color: customColor,\n              m: '0',\n            }}\n          >\n            {openAPPParams.shoppingListBtn !== 'add'\n              ? b3Lang('shoppingList.header.backToShoppingLists')\n              : b3Lang('shoppingList.header.backToProduct')}\n          </Box>\n        </Box>\n      </Box>\n      <Grid\n        container\n        spacing={2}\n        sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          flexDirection: isMobile ? 'column' : 'row',\n          mb: isMobile ? '16px' : '',\n        }}\n      >\n        <Grid\n          item\n          {...gridOptions(8)}\n          sx={{\n            color: getContrastColor(backgroundColor),\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: isMobile ? 'start' : 'center',\n              flexDirection: isMobile ? 'column' : 'row',\n            }}\n          >\n            <Typography\n              variant=\"h4\"\n              sx={{\n                marginRight: '1rem',\n                wordBreak: 'break-all',\n              }}\n            >\n              {`${shoppingListInfo?.name || ''}`}\n            </Typography>\n            {isB2BUser &&\n              (submitShoppingListPermission ||\n                (approveShoppingListPermission && shoppingListInfo?.approvedFlag)) && (\n                <Typography\n                  sx={{\n                    m: isMobile ? '10px 0' : '0',\n                  }}\n                >\n                  {shoppingListInfo && <ShoppingListStatusTag status={shoppingListInfo?.status} />}\n                </Typography>\n              )}\n          </Box>\n          <Box>\n            <Typography\n              sx={{\n                width: '100%',\n                wordBreak: 'break-all',\n              }}\n            >\n              {shoppingListInfo?.description}\n            </Typography>\n            {isB2BUser && (\n              <StyledCreateName>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{\n                    marginRight: '0.5rem',\n                  }}\n                >\n                  {b3Lang('shoppingList.header.createdBy')}\n                </Typography>\n                <span>{`${customerInfo?.firstName || ''} ${customerInfo?.lastName || ''}`}</span>\n              </StyledCreateName>\n            )}\n          </Box>\n        </Grid>\n\n        <Grid\n          item\n          sx={{\n            textAlign: isMobile ? 'none' : 'end',\n          }}\n          {...gridOptions(4)}\n        >\n          {submitShoppingListPermission &&\n            shoppingListInfo?.status === ShoppingListStatus.Draft && (\n              <CustomButton\n                variant=\"outlined\"\n                disabled={isDisabledBtn}\n                onClick={() => {\n                  handleUpdateShoppingList(ShoppingListStatus.ReadyForApproval);\n                }}\n              >\n                {b3Lang('shoppingList.header.submitForApproval')}\n              </CustomButton>\n            )}\n          {approveShoppingListPermission &&\n            shoppingListInfo?.status === ShoppingListStatus.ReadyForApproval && (\n              <Box>\n                <CustomButton\n                  variant=\"outlined\"\n                  sx={{\n                    marginRight: '1rem',\n                  }}\n                  onClick={() => {\n                    handleUpdateShoppingList(ShoppingListStatus.Rejected);\n                  }}\n                >\n                  {b3Lang('shoppingList.header.reject')}\n                </CustomButton>\n                {approveShoppingListPermission && (\n                  <CustomButton\n                    variant=\"outlined\"\n                    onClick={() => {\n                      handleUpdateShoppingList(ShoppingListStatus.Approved);\n                    }}\n                  >\n                    {b3Lang('shoppingList.header.approve')}\n                  </CustomButton>\n                )}\n              </Box>\n            )}\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n\nexport default ShoppingDetailHeader;\n","import { Box, TextField } from '@mui/material';\n\nimport B3Dialog from '@/components/B3Dialog';\nimport { useMobile } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\n\ninterface ShoppingDetailAddNotesProps {\n  open: boolean;\n  notes: string;\n  setNotes: (value: string) => void;\n  handleCancelAddNotesClick: () => void;\n  handleAddItemNotesClick: () => void;\n}\n\nfunction ShoppingDetailAddNotes(props: ShoppingDetailAddNotesProps) {\n  const b3Lang = useB3Lang();\n\n  const [isMobile] = useMobile();\n  const { open, notes, setNotes, handleCancelAddNotesClick, handleAddItemNotesClick } = props;\n\n  return (\n    <B3Dialog\n      isOpen={open}\n      title={b3Lang('shoppingList.addItemNotes.title')}\n      leftSizeBtn={b3Lang('shoppingList.addItemNotes.cancel')}\n      rightSizeBtn={b3Lang('shoppingList.addItemNotes.save')}\n      handleLeftClick={handleCancelAddNotesClick}\n      handRightClick={handleAddItemNotesClick}\n      isShowBordered={false}\n    >\n      <Box\n        sx={{\n          display: 'flex',\n          width: isMobile ? '100%' : '450px',\n          height: '100%',\n        }}\n      >\n        <TextField\n          multiline\n          rows={6}\n          defaultValue={notes}\n          onChange={(e) => setNotes(e.target.value)}\n          variant=\"filled\"\n          fullWidth\n          placeholder={b3Lang('shoppingList.addItemNotes.placeholder')}\n        />\n      </Box>\n    </B3Dialog>\n  );\n}\n\nexport default ShoppingDetailAddNotes;\n","import { ReactElement } from 'react';\nimport { Delete, Edit, StickyNote2 } from '@mui/icons-material';\nimport { Box, CardContent, styled, TextField, Typography } from '@mui/material';\n\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useB3Lang } from '@/lib/lang';\nimport { currencyFormat } from '@/utils';\nimport b2bGetVariantImageByVariantInfo from '@/utils/b2bGetVariantImageByVariantInfo';\nimport { getBCPrice } from '@/utils/b3Product/b3Product';\n\nimport { getProductOptionsFields } from '../../../utils/b3Product/shared/config';\n\ninterface ShoppingDetailCardProps {\n  item: any;\n  onEdit: (item: any, variantId: number | string, itemId: number | string) => void;\n  onDelete: (itemId: number) => void;\n  handleUpdateProductQty: (id: number | string, value: number | string) => void;\n  handleUpdateShoppingListItem: (itemId: number | string) => void;\n  checkBox?: () => ReactElement;\n  isReadForApprove: boolean;\n  len: number;\n  itemIndex?: number;\n  setDeleteOpen: (value: boolean) => void;\n  setAddNoteItemId: (itemId: number) => void;\n  setAddNoteOpen: (open: boolean) => void;\n  setNotes: (value: string) => void;\n  showPrice: (price: string, row: CustomFieldItems) => string | number;\n  b2bAndBcShoppingListActionsPermissions: boolean;\n}\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nfunction ShoppingDetailCard(props: ShoppingDetailCardProps) {\n  const b3Lang = useB3Lang();\n  const {\n    item: shoppingDetail,\n    onEdit,\n    onDelete,\n    checkBox,\n    handleUpdateProductQty,\n    handleUpdateShoppingListItem,\n    isReadForApprove,\n    len,\n    itemIndex,\n    setDeleteOpen,\n    setAddNoteOpen,\n    setAddNoteItemId,\n    setNotes,\n    showPrice,\n    b2bAndBcShoppingListActionsPermissions,\n  } = props;\n\n  const {\n    basePrice,\n    quantity,\n    itemId,\n    variantId,\n    primaryImage,\n    productName,\n    variantSku,\n    productsSearch,\n    productUrl,\n    taxPrice = 0,\n    productNote,\n  } = shoppingDetail;\n\n  const price = getBCPrice(Number(basePrice), Number(taxPrice));\n\n  const total = price * Number(quantity);\n\n  const product: any = {\n    ...shoppingDetail.productsSearch,\n    selectOptions: shoppingDetail.optionList,\n  };\n\n  const productFields = getProductOptionsFields(product, {});\n\n  const optionList = JSON.parse(shoppingDetail.optionList);\n  const optionsValue: CustomFieldItems[] = productFields.filter((item) => item.valueText);\n\n  const canChangeOption =\n    optionList.length > 0 && !isReadForApprove && b2bAndBcShoppingListActionsPermissions;\n\n  const currentVariants = product.variants || [];\n\n  const currentImage =\n    b2bGetVariantImageByVariantInfo(currentVariants, { variantId, variantSku }) || primaryImage;\n\n  return (\n    <Box\n      key={shoppingDetail.id}\n      sx={{\n        borderTop: '1px solid #D9DCE9',\n        borderBottom: itemIndex === len - 1 ? '1px solid #D9DCE9' : '',\n      }}\n    >\n      <CardContent\n        sx={{\n          color: '#313440',\n          display: 'flex',\n          pl: 0,\n        }}\n      >\n        <Box>{checkBox && checkBox()}</Box>\n        <Box>\n          <StyledImage\n            src={currentImage || PRODUCT_DEFAULT_IMAGE}\n            alt=\"Product-img\"\n            loading=\"lazy\"\n          />\n        </Box>\n        <Box\n          sx={{\n            flex: 1,\n          }}\n        >\n          <Typography\n            variant=\"body1\"\n            color=\"#212121\"\n            onClick={() => {\n              const {\n                location: { origin },\n              } = window;\n\n              window.location.href = `${origin}${productUrl}`;\n            }}\n            sx={{\n              cursor: 'pointer',\n            }}\n          >\n            {productName}\n          </Typography>\n          <Typography variant=\"body1\" color=\"#616161\">\n            {variantSku}\n          </Typography>\n          <Box\n            sx={{\n              margin: '0 0 0.5rem 0',\n            }}\n          >\n            {optionList.length > 0 && optionsValue.length > 0 && (\n              <Box>\n                {optionsValue.map((option: any) => (\n                  <Typography\n                    sx={{\n                      fontSize: '0.75rem',\n                      lineHeight: '1.5',\n                      color: '#455A64',\n                    }}\n                    key={option.valueLabel}\n                  >\n                    {`${option.valueLabel}: ${option.valueText}`}\n                  </Typography>\n                ))}\n              </Box>\n            )}\n          </Box>\n\n          {productNote && productNote.trim().length > 0 && (\n            <Typography\n              sx={{\n                fontSize: '0.75rem',\n                color: '#ED6C02',\n                marginTop: '0.3rem',\n                marginBottom: '0.3rem',\n              }}\n            >\n              {productNote}\n            </Typography>\n          )}\n\n          <Typography\n            sx={{\n              color: '#212121',\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('shoppingList.shoppingDetailCard.price', {\n              price: showPrice(currencyFormat(price), shoppingDetail),\n            })}\n          </Typography>\n\n          <TextField\n            size=\"small\"\n            type=\"number\"\n            variant=\"filled\"\n            label={b3Lang('shoppingList.shoppingDetailCard.quantity')}\n            disabled={b2bAndBcShoppingListActionsPermissions ? isReadForApprove : true}\n            inputProps={{\n              inputMode: 'numeric',\n              pattern: '[0-9]*',\n            }}\n            value={quantity}\n            sx={{\n              margin: '0.5rem 0',\n              width: '60%',\n              maxWidth: '100px',\n              '& label': {\n                zIndex: 0,\n                fontSize: '14px',\n              },\n              '& input': {\n                fontSize: '14px',\n              },\n            }}\n            onChange={(e) => {\n              handleUpdateProductQty(shoppingDetail.id, e.target.value);\n            }}\n            onBlur={() => {\n              handleUpdateShoppingListItem(itemId);\n            }}\n          />\n          <Typography\n            sx={{\n              color: '#212121',\n              fontSize: '14px',\n            }}\n          >\n            {b3Lang('shoppingList.shoppingDetailCard.total', {\n              total: showPrice(currencyFormat(total), shoppingDetail),\n            })}\n          </Typography>\n          <Box\n            sx={{\n              marginTop: '11px',\n              textAlign: 'end',\n            }}\n            id=\"shoppingList-actionList-mobile\"\n          >\n            {b2bAndBcShoppingListActionsPermissions && (\n              <StickyNote2\n                sx={{\n                  marginRight: '0.5rem',\n                  cursor: 'pointer',\n                  color: 'rgba(0, 0, 0, 0.54)',\n                }}\n                onClick={() => {\n                  setAddNoteOpen(true);\n                  setAddNoteItemId(Number(itemId));\n\n                  if (productNote) {\n                    setNotes(productNote);\n                  }\n                }}\n              />\n            )}\n\n            {canChangeOption && (\n              <Edit\n                sx={{\n                  marginRight: canChangeOption ? '0.5rem' : '',\n                  marginLeft: canChangeOption ? '0.3rem' : '',\n                  cursor: 'pointer',\n                  color: 'rgba(0, 0, 0, 0.54)',\n                }}\n                onClick={() => {\n                  onEdit(\n                    {\n                      ...productsSearch,\n                      selectOptions: optionList,\n                      quantity,\n                    },\n                    variantId,\n                    itemId,\n                  );\n                }}\n              />\n            )}\n            {b2bAndBcShoppingListActionsPermissions && !isReadForApprove && (\n              <Delete\n                sx={{\n                  marginLeft: '0.3rem',\n                  cursor: 'pointer',\n                  color: 'rgba(0, 0, 0, 0.54)',\n                }}\n                onClick={() => {\n                  setDeleteOpen(true);\n                  onDelete(Number(itemId));\n                }}\n              />\n            )}\n          </Box>\n        </Box>\n      </CardContent>\n    </Box>\n  );\n}\n\nexport default ShoppingDetailCard;\n","import {\n  Dispatch,\n  forwardRef,\n  Ref,\n  SetStateAction,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\nimport { Delete, Edit, StickyNote2 } from '@mui/icons-material';\nimport { Box, Grid, styled, TextField, Typography } from '@mui/material';\nimport cloneDeep from 'lodash-es/cloneDeep';\n\nimport {\n  B3PaginationTable,\n  GetRequestList,\n  TableRefreshConfig,\n} from '@/components/table/B3PaginationTable';\nimport { TableColumnItem } from '@/components/table/B3Table';\nimport { PRODUCT_DEFAULT_IMAGE } from '@/constants';\nimport { useMobile, useSort } from '@/hooks';\nimport { useB3Lang } from '@/lib/lang';\nimport { updateB2BShoppingListsItem, updateBcShoppingListsItem } from '@/shared/service/b2b';\nimport { rolePermissionSelector, useAppSelector } from '@/store';\nimport { currencyFormat, snackbar } from '@/utils';\nimport b2bGetVariantImageByVariantInfo from '@/utils/b2bGetVariantImageByVariantInfo';\nimport { getBCPrice, getDisplayPrice, getValidOptionsList } from '@/utils/b3Product/b3Product';\nimport { getProductOptionsFields } from '@/utils/b3Product/shared/config';\n\nimport B3FilterSearch from '../../../components/filter/B3FilterSearch';\n\nimport ChooseOptionsDialog from './ChooseOptionsDialog';\nimport ShoppingDetailAddNotes from './ShoppingDetailAddNotes';\nimport ShoppingDetailCard from './ShoppingDetailCard';\n\ninterface ListItem {\n  [key: string]: string;\n}\n\ninterface ProductInfoProps {\n  basePrice: number | string;\n  baseSku: string;\n  createdAt: number;\n  discount: number | string;\n  enteredInclusive: boolean;\n  id: number | string;\n  itemId: number;\n  optionList: string;\n  primaryImage: string;\n  productId: number;\n  productName: string;\n  productUrl: string;\n  quantity: number | string;\n  tax: number | string;\n  updatedAt: number;\n  variantId: number;\n  variantSku: string;\n  productsSearch: CustomFieldItems;\n  productNote: string;\n  disableCurrentCheckbox?: boolean;\n}\n\ninterface ListItemProps {\n  node: ProductInfoProps;\n}\n\ninterface ShoppingDetailTableProps {\n  shoppingListInfo: any;\n  isRequestLoading: boolean;\n  setIsRequestLoading: Dispatch<SetStateAction<boolean>>;\n  shoppingListId: number | string;\n  getShoppingListDetails: GetRequestList<SearchProps, CustomFieldItems>;\n  setCheckedArr: (values: CustomFieldItems) => void;\n  isReadForApprove: boolean;\n  isJuniorApprove: boolean;\n  allowJuniorPlaceOrder: boolean;\n  setDeleteItemId: (itemId: number | string) => void;\n  setDeleteOpen: (open: boolean) => void;\n  isB2BUser: boolean;\n  productQuoteEnabled: boolean;\n  isCanEditShoppingList: boolean;\n  role: number | string;\n}\n\ninterface SearchProps {\n  search?: string;\n  first?: number;\n  offset?: number;\n  orderBy: string;\n}\n\ninterface PaginationTableRefProps extends HTMLInputElement {\n  getList: () => void;\n  setList: (items?: ListItemProps[]) => void;\n  getSelectedValue: () => void;\n  refresh: (type?: TableRefreshConfig) => void;\n}\n\nconst StyledShoppingListTableContainer = styled('div')(() => ({\n  backgroundColor: '#FFFFFF',\n  padding: '1rem',\n  borderRadius: '4px',\n  boxShadow:\n    '0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)',\n\n  '& tbody': {\n    '& tr': {\n      '& td': {\n        verticalAlign: 'top',\n      },\n      '& td: first-of-type': {\n        paddingTop: '25px',\n      },\n    },\n    '& tr: hover': {\n      '& #shoppingList-actionList': {\n        opacity: 1,\n      },\n    },\n  },\n}));\n\nconst StyledImage = styled('img')(() => ({\n  maxWidth: '60px',\n  height: 'auto',\n  marginRight: '0.5rem',\n}));\n\nconst StyledTextField = styled(TextField)(() => ({\n  '& input': {\n    paddingTop: '12px',\n    paddingRight: '6px',\n  },\n}));\n\nconst defaultSortKey = 'updatedAt';\n\nconst sortKeys = {\n  Product: 'productName',\n  updatedAt: 'updatedAt',\n  Qty: 'quantity',\n};\n\nfunction ShoppingDetailTable(props: ShoppingDetailTableProps, ref: Ref<unknown>) {\n  const [isMobile] = useMobile();\n  const b3Lang = useB3Lang();\n\n  const {\n    shoppingListInfo,\n    isRequestLoading,\n    setIsRequestLoading,\n    shoppingListId,\n    getShoppingListDetails,\n    setCheckedArr,\n    isReadForApprove,\n    setDeleteItemId,\n    setDeleteOpen,\n    isJuniorApprove,\n    isB2BUser,\n    allowJuniorPlaceOrder,\n    productQuoteEnabled,\n    isCanEditShoppingList,\n    role,\n  } = props;\n\n  const showInclusiveTaxPrice = useAppSelector(({ global }) => global.showInclusiveTaxPrice);\n\n  const { shoppingListCreateActionsPermission, submitShoppingListPermission } =\n    useAppSelector(rolePermissionSelector);\n\n  const canShoppingListActions = isB2BUser\n    ? shoppingListCreateActionsPermission && isCanEditShoppingList\n    : true;\n  const b2bAndBcShoppingListActionsPermissions = isB2BUser ? canShoppingListActions : true;\n  const b2bSubmitShoppingListPermission = isB2BUser\n    ? submitShoppingListPermission\n    : Number(role) === 2;\n\n  const paginationTableRef = useRef<PaginationTableRefProps | null>(null);\n\n  const [chooseOptionsOpen, setSelectedOptionsOpen] = useState(false);\n  const [optionsProduct, setOptionsProduct] = useState<any>(null);\n  const [editProductItemId, setEditProductItemId] = useState<number | string | null>(null);\n  const [search, setSearch] = useState<SearchProps>({\n    orderBy: `-${sortKeys[defaultSortKey]}`,\n  });\n  const [qtyNotChangeFlag, setQtyNotChangeFlag] = useState<boolean>(true);\n  const [originProducts, setOriginProducts] = useState<ListItemProps[]>([]);\n  const [shoppingListTotalPrice, setShoppingListTotalPrice] = useState<number>(0.0);\n\n  const [addNoteOpen, setAddNoteOpen] = useState<boolean>(false);\n  const [addNoteItemId, setAddNoteItemId] = useState<number | string>('');\n  const [notes, setNotes] = useState<string>('');\n  const [disabledSelectAll, setDisabledSelectAll] = useState<boolean>(false);\n\n  const [priceHidden, setPriceHidden] = useState<boolean>(false);\n\n  const [handleSetOrderBy, order, orderBy] = useSort(sortKeys, defaultSortKey, search, setSearch);\n\n  const handleUpdateProductQty = (id: number | string, value: number | string) => {\n    if (Number(value) < 0) return;\n    const currentItem = originProducts.find((item: ListItemProps) => {\n      const { node } = item;\n\n      return node.id === id;\n    });\n\n    const currentQty = currentItem?.node?.quantity || '';\n    setQtyNotChangeFlag(Number(currentQty) === Number(value));\n\n    const listItems: ListItemProps[] = paginationTableRef.current?.getList() || [];\n    const newListItems = listItems?.map((item: ListItemProps) => {\n      const { node } = item;\n      if (node?.id === id) {\n        node.quantity = `${Number(value)}`;\n        node.disableCurrentCheckbox = Number(value) === 0;\n      }\n\n      return item;\n    });\n\n    const nonNumberProducts = newListItems.filter(\n      (item: ListItemProps) => Number(item.node.quantity) === 0,\n    );\n    setDisabledSelectAll(nonNumberProducts.length === newListItems.length);\n    paginationTableRef.current?.setList([...newListItems]);\n  };\n\n  const initSearch = (type?: TableRefreshConfig) => {\n    paginationTableRef.current?.refresh(type);\n  };\n\n  useImperativeHandle(ref, () => ({\n    initSearch,\n    getList: () => paginationTableRef.current?.getList(),\n    setList: () => paginationTableRef.current?.setList(),\n    getSelectedValue: () => paginationTableRef.current?.getSelectedValue(),\n  }));\n\n  const handleSearchProduct = async (q: string) => {\n    setSearch({\n      ...search,\n      search: q,\n    });\n  };\n\n  const handleChooseOptionsDialogCancel = () => {\n    setEditProductItemId('');\n    setSelectedOptionsOpen(false);\n  };\n\n  const handleOpenProductEdit = (product: any, _: number | string, itemId: number | string) => {\n    setEditProductItemId(itemId);\n    setOptionsProduct(product);\n    setSelectedOptionsOpen(true);\n  };\n\n  const handleChooseOptionsDialogConfirm = async (products: CustomFieldItems[]) => {\n    setIsRequestLoading(true);\n    const updateShoppingListItem = isB2BUser\n      ? updateB2BShoppingListsItem\n      : updateBcShoppingListsItem;\n    try {\n      const newOptionLists = getValidOptionsList(products[0].newSelectOptionList, products[0]);\n      const data = {\n        itemId: editProductItemId,\n        shoppingListId,\n        itemData: {\n          variantId: products[0].variantId,\n          quantity: products[0].quantity,\n          optionList: newOptionLists || [],\n        },\n      };\n\n      await updateShoppingListItem(data);\n      setSelectedOptionsOpen(false);\n      setEditProductItemId('');\n      snackbar.success(b3Lang('shoppingList.table.productUpdated'));\n      initSearch({ keepCheckedItems: true });\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const handleUpdateShoppingListItem = async (itemId: number | string) => {\n    const listItems: ListItemProps[] = paginationTableRef.current?.getList() || [];\n    const currentItem = listItems.find((item: ListItemProps) => {\n      const { node } = item;\n\n      return node.itemId === itemId;\n    });\n    let currentNode;\n\n    if (currentItem) {\n      currentNode = currentItem.node;\n    }\n\n    const options = JSON.parse(currentNode?.optionList || '[]');\n\n    const optionsList = options.map(\n      (option: { option_id: number | string; option_value: number | string }) => ({\n        optionId: option.option_id,\n        optionValue: option.option_value,\n      }),\n    );\n\n    const itemData: CustomFieldItems = {\n      variantId: currentNode?.variantId,\n      quantity: currentNode?.quantity ? Number(currentNode.quantity) : 0,\n      optionList: optionsList || [],\n      productNote: notes,\n    };\n\n    const data = {\n      itemId,\n      shoppingListId,\n      itemData,\n    };\n\n    const updateShoppingListItem = isB2BUser\n      ? updateB2BShoppingListsItem\n      : updateBcShoppingListsItem;\n\n    await updateShoppingListItem(data);\n  };\n\n  const handleUpdateShoppingListItemQty = async (itemId: number | string) => {\n    if (qtyNotChangeFlag) return;\n    setIsRequestLoading(true);\n    try {\n      await handleUpdateShoppingListItem(itemId);\n      snackbar.success(b3Lang('shoppingList.table.quantityUpdated'));\n      setQtyNotChangeFlag(true);\n      initSearch({ keepCheckedItems: true });\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  const getSelectCheckbox = (selectCheckbox: Array<string | number>) => {\n    if (selectCheckbox.length > 0) {\n      const productList = paginationTableRef.current?.getList() || [];\n      const checkedItems: CustomFieldItems[] = [];\n      selectCheckbox.forEach((item: number | string) => {\n        const newItems = productList.find((product: ListItemProps) => {\n          const { node } = product;\n\n          return node.id === item;\n        });\n\n        if (newItems) checkedItems.push(newItems);\n      });\n\n      setCheckedArr([...checkedItems]);\n    } else {\n      setCheckedArr([]);\n    }\n  };\n\n  const handleCancelAddNotesClick = () => {\n    setAddNoteOpen(false);\n    setAddNoteItemId('');\n    setNotes('');\n  };\n\n  const handleAddItemNotesClick = async () => {\n    setIsRequestLoading(true);\n    try {\n      handleCancelAddNotesClick();\n      await handleUpdateShoppingListItem(addNoteItemId);\n      snackbar.success(b3Lang('shoppingList.table.productNotesUpdated'));\n      initSearch({ keepCheckedItems: true });\n    } finally {\n      setIsRequestLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (shoppingListInfo) {\n      const {\n        products: { edges },\n        grandTotal,\n        totalTax,\n      } = shoppingListInfo;\n\n      const NewShoppingListTotalPrice = showInclusiveTaxPrice\n        ? Number(grandTotal)\n        : Number(grandTotal) - Number(totalTax) || 0.0;\n\n      const isPriceHidden = edges.some((item: CustomFieldItems) => {\n        if (item?.node?.productsSearch) {\n          return item.node.productsSearch?.isPriceHidden || false;\n        }\n\n        return false;\n      });\n\n      setPriceHidden(isPriceHidden);\n      setOriginProducts(cloneDeep(edges));\n      setShoppingListTotalPrice(NewShoppingListTotalPrice);\n    }\n  }, [shoppingListInfo, showInclusiveTaxPrice]);\n\n  useEffect(() => {\n    if (shoppingListInfo) {\n      const {\n        products: { edges },\n      } = shoppingListInfo;\n      const nonNumberProducts = edges.filter((item: ListItemProps) => item.node.quantity === 0);\n      setDisabledSelectAll(nonNumberProducts.length === edges.length);\n    }\n  }, [shoppingListInfo]);\n\n  const showPrice = (price: string, row: CustomFieldItems): string | number => {\n    const {\n      productsSearch: { isPriceHidden },\n    } = row;\n    if (isPriceHidden) return '';\n    return getDisplayPrice({\n      price,\n      productInfo: row,\n      showText: isPriceHidden ? '' : price,\n      forcedSkip: true,\n    });\n  };\n\n  const columnItems: TableColumnItem<ListItem>[] = [\n    {\n      key: 'Product',\n      title: b3Lang('shoppingList.table.product'),\n      render: (row: CustomFieldItems) => {\n        const product: any = {\n          ...row.productsSearch,\n          selectOptions: row.optionList,\n        };\n        const productFields = getProductOptionsFields(product, {});\n\n        const optionList = JSON.parse(row.optionList);\n        const optionsValue: CustomFieldItems[] = productFields.filter((item) => item.valueText);\n\n        const currentVariants = product.variants || [];\n        const currentImage =\n          b2bGetVariantImageByVariantInfo(currentVariants, {\n            variantId: row.variantId,\n            variantSku: row.variantSku,\n          }) || row.primaryImage;\n\n        return (\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'flex-start',\n            }}\n          >\n            <StyledImage\n              src={currentImage || PRODUCT_DEFAULT_IMAGE}\n              alt=\"Product-img\"\n              loading=\"lazy\"\n            />\n            <Box>\n              <Typography\n                variant=\"body1\"\n                color=\"#212121\"\n                onClick={() => {\n                  const {\n                    location: { origin },\n                  } = window;\n\n                  window.location.href = `${origin}${row.productUrl}`;\n                }}\n                sx={{\n                  cursor: 'pointer',\n                }}\n              >\n                {row.productName}\n              </Typography>\n              <Typography variant=\"body1\" color=\"#616161\">\n                {row.variantSku}\n              </Typography>\n              {optionList.length > 0 && optionsValue.length > 0 && (\n                <Box>\n                  {optionsValue.map((option: any) => (\n                    <Typography\n                      sx={{\n                        fontSize: '0.75rem',\n                        lineHeight: '1.5',\n                        color: '#455A64',\n                      }}\n                      key={option.valueLabel}\n                    >\n                      {`${option.valueLabel}: ${option.valueText}`}\n                    </Typography>\n                  ))}\n                </Box>\n              )}\n\n              {row?.productNote && row?.productNote.trim().length > 0 && (\n                <Typography\n                  sx={{\n                    fontSize: '0.75rem',\n                    color: '#ED6C02',\n                    marginTop: '0.3rem',\n                  }}\n                >\n                  {row.productNote}\n                </Typography>\n              )}\n            </Box>\n          </Box>\n        );\n      },\n      width: '45%',\n      isSortable: true,\n    },\n    {\n      key: 'Price',\n      title: b3Lang('shoppingList.table.price'),\n      render: (row: CustomFieldItems) => {\n        const { basePrice, taxPrice = 0 } = row;\n        const inTaxPrice = getBCPrice(Number(basePrice), Number(taxPrice));\n\n        return (\n          <Typography\n            sx={{\n              padding: '12px 0',\n            }}\n          >\n            {showPrice(currencyFormat(inTaxPrice), row)}\n          </Typography>\n        );\n      },\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n    {\n      key: 'Qty',\n      title: b3Lang('shoppingList.table.quantity'),\n      render: (row) => (\n        <StyledTextField\n          size=\"small\"\n          type=\"number\"\n          variant=\"filled\"\n          sx={{\n            width: '72px',\n          }}\n          disabled={\n            b2bAndBcShoppingListActionsPermissions ? isReadForApprove || isJuniorApprove : true\n          }\n          value={row.quantity}\n          inputProps={{\n            inputMode: 'numeric',\n            pattern: '[0-9]*',\n          }}\n          onChange={(e) => {\n            handleUpdateProductQty(row.id, e.target.value);\n          }}\n          onBlur={() => {\n            handleUpdateShoppingListItemQty(row.itemId);\n          }}\n        />\n      ),\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n      isSortable: true,\n    },\n    {\n      key: 'Total',\n      title: b3Lang('shoppingList.table.total'),\n      render: (row: CustomFieldItems) => {\n        const {\n          basePrice,\n          quantity,\n          itemId,\n          productsSearch: { options },\n          taxPrice = 0,\n        } = row;\n\n        const inTaxPrice = getBCPrice(Number(basePrice), Number(taxPrice));\n\n        const totalPrice = inTaxPrice * Number(quantity);\n\n        const optionList = options || JSON.parse(row.optionList);\n\n        const canChangeOption =\n          optionList.length > 0 &&\n          !isReadForApprove &&\n          !isJuniorApprove &&\n          b2bAndBcShoppingListActionsPermissions;\n\n        return (\n          <Box>\n            <Typography\n              sx={{\n                padding: '12px 0',\n              }}\n            >\n              {showPrice(currencyFormat(totalPrice), row)}\n            </Typography>\n            <Box\n              sx={{\n                marginTop: '1rem',\n                opacity: 0,\n                textAlign: isMobile ? 'end' : 'start',\n                display: 'flex',\n                justifyContent: 'flex-end',\n              }}\n              id=\"shoppingList-actionList\"\n            >\n              {canShoppingListActions && (\n                <>\n                  <Grid\n                    item\n                    sx={{\n                      marginRight: '0.5rem',\n                      minWidth: '32px',\n                    }}\n                  >\n                    <StickyNote2\n                      sx={{\n                        cursor: 'pointer',\n                        color: 'rgba(0, 0, 0, 0.54)',\n                      }}\n                      onClick={() => {\n                        setAddNoteOpen(true);\n                        setAddNoteItemId(Number(itemId));\n\n                        if (row.productNote) {\n                          setNotes(row.productNote);\n                        }\n                      }}\n                    />\n                  </Grid>\n\n                  <Grid\n                    item\n                    sx={{\n                      marginRight: canChangeOption ? '0.5rem' : '',\n                      marginLeft: canChangeOption ? '0.3rem' : '',\n                    }}\n                  >\n                    {canChangeOption && (\n                      <Edit\n                        sx={{\n                          cursor: 'pointer',\n                          color: 'rgba(0, 0, 0, 0.54)',\n                        }}\n                        onClick={() => {\n                          const { productsSearch, variantId, itemId, optionList, quantity } = row;\n\n                          handleOpenProductEdit(\n                            {\n                              ...productsSearch,\n                              selectOptions: optionList,\n                              quantity,\n                            },\n                            variantId,\n                            itemId,\n                          );\n                        }}\n                      />\n                    )}\n                  </Grid>\n                  <Grid\n                    item\n                    sx={{\n                      marginLeft: '0.3rem',\n                    }}\n                  >\n                    {b2bAndBcShoppingListActionsPermissions &&\n                      !isReadForApprove &&\n                      !isJuniorApprove && (\n                        <Delete\n                          sx={{\n                            cursor: 'pointer',\n                            color: 'rgba(0, 0, 0, 0.54)',\n                          }}\n                          onClick={() => {\n                            setDeleteOpen(true);\n                            setDeleteItemId(Number(itemId));\n                          }}\n                        />\n                      )}\n                  </Grid>\n                </>\n              )}\n            </Box>\n          </Box>\n        );\n      },\n      width: '15%',\n      style: {\n        textAlign: 'right',\n      },\n    },\n  ];\n\n  return (\n    <StyledShoppingListTableContainer>\n      <Box\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          margin: '0 0 1rem 0',\n        }}\n      >\n        <Typography\n          sx={{\n            fontSize: '24px',\n          }}\n        >\n          {b3Lang('shoppingList.table.totalProductCount', {\n            quantity: shoppingListInfo?.products?.totalCount || 0,\n          })}\n        </Typography>\n        <Typography\n          sx={{\n            fontSize: '24px',\n          }}\n        >\n          {priceHidden ? '' : currencyFormat(shoppingListTotalPrice || 0.0)}\n        </Typography>\n      </Box>\n      <Box\n        sx={{\n          marginBottom: '5px',\n        }}\n      >\n        <B3FilterSearch\n          searchBGColor=\"rgba(0, 0, 0, 0.06)\"\n          handleChange={(e) => {\n            handleSearchProduct(e);\n          }}\n        />\n      </Box>\n\n      <B3PaginationTable\n        ref={paginationTableRef}\n        columnItems={columnItems}\n        rowsPerPageOptions={[10, 20, 50]}\n        getRequestList={getShoppingListDetails}\n        searchParams={search}\n        isCustomRender={false}\n        showCheckbox\n        showSelectAllCheckbox\n        applyAllDisableCheckbox={false}\n        disableCheckbox={\n          disabledSelectAll ||\n          (b2bSubmitShoppingListPermission\n            ? !(allowJuniorPlaceOrder || productQuoteEnabled)\n            : (isReadForApprove || isJuniorApprove) && b2bAndBcShoppingListActionsPermissions)\n        }\n        hover\n        labelRowsPerPage={b3Lang('shoppingList.table.itemsPerPage')}\n        showBorder={false}\n        requestLoading={setIsRequestLoading}\n        getSelectCheckbox={getSelectCheckbox}\n        itemIsMobileSpacing={0}\n        noDataText={b3Lang('shoppingList.table.noProductsFound')}\n        sortDirection={order}\n        orderBy={orderBy}\n        sortByFn={handleSetOrderBy}\n        pageType=\"shoppingListDetailsTable\"\n        renderItem={(row, index, checkBox) => (\n          <ShoppingDetailCard\n            len={shoppingListInfo?.products?.edges.length || 0}\n            item={row}\n            itemIndex={index}\n            showPrice={showPrice}\n            onEdit={handleOpenProductEdit}\n            onDelete={setDeleteItemId}\n            checkBox={checkBox}\n            setDeleteOpen={setDeleteOpen}\n            setAddNoteOpen={setAddNoteOpen}\n            setAddNoteItemId={setAddNoteItemId}\n            setNotes={setNotes}\n            handleUpdateProductQty={handleUpdateProductQty}\n            handleUpdateShoppingListItem={handleUpdateShoppingListItemQty}\n            isReadForApprove={isReadForApprove || isJuniorApprove}\n            b2bAndBcShoppingListActionsPermissions={b2bAndBcShoppingListActionsPermissions}\n          />\n        )}\n      />\n\n      <ChooseOptionsDialog\n        isOpen={chooseOptionsOpen}\n        isLoading={isRequestLoading}\n        setIsLoading={setIsRequestLoading}\n        product={optionsProduct}\n        type=\"shoppingList\"\n        onCancel={handleChooseOptionsDialogCancel}\n        onConfirm={handleChooseOptionsDialogConfirm}\n        isEdit\n      />\n\n      <ShoppingDetailAddNotes\n        open={addNoteOpen}\n        notes={notes}\n        setNotes={setNotes}\n        handleCancelAddNotesClick={handleCancelAddNotesClick}\n        handleAddItemNotesClick={handleAddItemNotesClick}\n      />\n    </StyledShoppingListTableContainer>\n  );\n}\n\nexport default forwardRef(ShoppingDetailTable);\n"],"names":["B3QuantityTextField","props","isMobile","useMobile","disabled","label","value","maxQuantity","minQuantity","isStock","stock","hiddenLabel","onChange","sx","width","marginLeft","marginRight","validMessage","setValidMessage","useState","validateQuantity","useCallback","quantity","parseInt","useEffect","jsx","StyledNumberNoTopTextField","size","type","variant","error","helperText","inputProps","inputMode","pattern","e","target","onBlur","handleBlur","AddToShoppingList","state","id","useContext","ShoppingListDetailsContext","companyStatus","useAppSelector","company","companyInfo","status","updateList","isB2BUser","pageType","b3Lang","useB3Lang","isOpenBulkLoadCSV","setIsOpenBulkLoadCSV","isLoading","setIsLoading","blockPendingAccountViewPrice","useBlockPendingAccountViewPrice","addItemsToShoppingList","addProductToShoppingList","addProductToBcShoppingList","quickAddToList","async","items","products","map","product","optionList","getValidOptionsList","newSelectOptionList","productId","variantId","shoppingListId","snackbar","success","Card","marginBottom","children","CardContent","jsxs","Box","Typography","SearchProduct","addToList","dispatchEvent","Error","message","length","Divider","QuickAdd","margin","CustomButton","onClick","info","UploadFileIcon","B3Upload","isOpen","setIsOpen","handleAddToList","validProduct","productsData","notPurchaseSku","productItems","notAddAble","forEach","item","currentProduct","qty","option","purchasingDisabled","variantSku","modifiers","defaultModifiers","getAllModifierDefaultValue","push","filter","modifier","isVerified","optionsList","optionId","option_id","optionValue","toString","defaultValue","Object","keys","key","Number","getValidProducts","join","withModifiers","setOpenPage","ShoppingListDetailsProvider","ShoppingListDetails","Flex","styled","isHeader","display","wordBreak","padding","gap","flexWrap","borderBottom","paddingBottom","alignItems","borderTop","marginTop","FlexItem","flexBasis","flexDirection","textAlignLocation","justifyContent","flexGrow","flexShrink","ProductHead","fontSize","lineHeight","color","ProductImage","borderRadius","defaultItemStyle","default","delete","mobileItemStyle","ReAddToCart","shoppingListInfo","successProducts","allowJuniorPlaceOrder","setValidateFailureProducts","setValidateSuccessProducts","textAlign","backendValidationEnabled","submitShoppingListPermission","rolePermissionSelector","setOpen","loading","setLoading","decimal_places","decimalPlaces","activeCurrencyInfoSelector","itemStyle","handleCancelClicked","shouldRedirectToCheckout","ShoppingListStatus","Approved","window","location","href","CHECKOUT_URL","action","b2b","callbacks","CART_URL","b3TriggerCartNumber","B3Dialog","handleLeftClick","handRightClick","lineItems","addLineItems","createOrUpdateExistingCart","errors","handleReAddToCartBackend","every","isValid","res","handlePrimaryAction","title","rightSizeBtn","maxWidth","Grid","m","Alert","severity","B3Spin","isSpinning","isFlex","newProduct","requestArr","node","quantityNumber","setModifierQtyPrice","Promise","all","index","handleClearNoStock","primaryImage","productName","productsSearch","basePrice","price","total","toFixed","selectOptions","productFields","getProductOptionsFields","newOptionList","JSON","parse","optionsValue","valueText","src","PRODUCT_DEFAULT_IMAGE","valueLabel","currencyFormat","calculateProduct","handleUpdateProductQty","Delete","cursor","splice","deleteProduct","ShoppingDetailDeleteItems","open","handleCancelClick","handleDeleteProductClick","leftSizeBtn","rightStyleBtn","height","ShoppingDetailFooter","navigate","useNavigate","featureFlags","useFeatureFlags","productQuoteEnabled","GlobalContext","isAgenting","b2bFeatures","masqueradeCompany","companyId","customerGroupId","customer","shoppingListCreateActionsPermission","purchasabilityPermission","ref","useRef","cartEntityId","Cookies","get","containerStyle","checkedArr","selectedSubTotal","setDeleteOpen","customColor","isCanEditShoppingList","role","b2bShoppingListActionsPermission","isCanAddToCart","b2bSubmitShoppingListPermission","handleClose","shouldRedirectCheckout","handleAddToCartOnFrontend","skus","cantPurchase","availability","slice","getInventoryInfos","getVariantInfoBySkus","validateFailureArr","validateSuccessArr","inventoryInfos","inventoryInfo","find","isPassVerify","verifyInventory","deleteCartObject","deleteCartData","cartInfo","getCart","deleteCart","updateCart","handleAddProductsToCart","data","site","cart","handleAddToCartBackend","buttons","adSelectedToCart","name","handleClick","isDisabled","proceedToCheckout","addSelectedToQuote","productsWithSku","checkedItem","noSkuProducts","productIds","includes","searchProducts","newProductInfo","conversionProductsList","errorMessage","isFondVariant","newProducts","tax","options","option_value","currentProductSearch","variantItem","variants","sku","quoteListitem","uuid","image_url","stringify","isValidQty","validProductQty","calculateProductListPrice","validatedProducts","validateProducts","addQuoteDraftProducts","addToQuote","b2bLogger","buttonList","position","bottom","left","backgroundColor","zIndex","container","spacing","paddingLeft","pr","fontWeight","subtotal","border","minWidth","ReadyForApproval","Fragment","handleOpenBtnList","endIcon","ArrowDropDown","Menu","anchorEl","current","onClose","MenuListProps","button","MenuItem","StyledCreateName","ShoppingDetailHeader","customerInfo","handleUpdateShoppingList","goToShoppingLists","openAPPParams","portalStyle","CustomStyleContext","selectCompanyHierarchyId","companyHierarchyInfo","submitShoppingList","approveShoppingListPermission","approveShoppingList","shoppingListPermissions","useMemo","submitShoppingListPermissionCode","approveShoppingListPermissionCode","b2bPermissionsMap","verifySubmitShoppingListSubsidiariesPermission","code","userId","selectId","verifyLevelPermission","isDisabledBtn","edges","gridOptions","xs","shoppingListBtn","openUrl","ArrowBackIosNew","mb","getContrastColor","approvedFlag","ShoppingListStatusTag","description","firstName","lastName","Draft","Rejected","ShoppingDetailAddNotes","notes","setNotes","handleCancelAddNotesClick","handleAddItemNotesClick","isShowBordered","TextField","multiline","rows","fullWidth","placeholder","StyledImage","ShoppingDetailCard","shoppingDetail","onEdit","onDelete","checkBox","handleUpdateShoppingListItem","isReadForApprove","len","itemIndex","setAddNoteOpen","setAddNoteItemId","showPrice","b2bAndBcShoppingListActionsPermissions","itemId","productUrl","taxPrice","productNote","getBCPrice","canChangeOption","currentVariants","currentImage","b2bGetVariantImageByVariantInfo","pl","alt","flex","origin","trim","StickyNote2","Edit","StyledShoppingListTableContainer","boxShadow","verticalAlign","paddingTop","opacity","StyledTextField","paddingRight","defaultSortKey","sortKeys","Product","updatedAt","Qty","ShoppingDetailTable$1","forwardRef","isRequestLoading","setIsRequestLoading","getShoppingListDetails","setCheckedArr","setDeleteItemId","isJuniorApprove","showInclusiveTaxPrice","global","canShoppingListActions","paginationTableRef","chooseOptionsOpen","setSelectedOptionsOpen","optionsProduct","setOptionsProduct","editProductItemId","setEditProductItemId","search","setSearch","orderBy","qtyNotChangeFlag","setQtyNotChangeFlag","originProducts","setOriginProducts","shoppingListTotalPrice","setShoppingListTotalPrice","addNoteOpen","addNoteItemId","disabledSelectAll","setDisabledSelectAll","priceHidden","setPriceHidden","handleSetOrderBy","order","useSort","currentItem","listItems","getList","newListItems","disableCurrentCheckbox","nonNumberProducts","setList","initSearch","refresh","useImperativeHandle","getSelectedValue","handleOpenProductEdit","_","currentNode","itemData","updateShoppingListItem","updateB2BShoppingListsItem","updateBcShoppingListsItem","handleUpdateShoppingListItemQty","keepCheckedItems","grandTotal","totalTax","NewShoppingListTotalPrice","isPriceHidden","some","cloneDeep","row","getDisplayPrice","productInfo","showText","forcedSkip","columnItems","render","isSortable","inTaxPrice","style","totalPrice","totalCount","B3FilterSearch","searchBGColor","handleChange","q","handleSearchProduct","B3PaginationTable","rowsPerPageOptions","getRequestList","searchParams","isCustomRender","showCheckbox","showSelectAllCheckbox","applyAllDisableCheckbox","disableCheckbox","hover","labelRowsPerPage","showBorder","requestLoading","getSelectCheckbox","selectCheckbox","productList","checkedItems","newItems","itemIsMobileSpacing","noDataText","sortDirection","sortByFn","renderItem","ChooseOptionsDialog","onCancel","handleChooseOptionsDialogCancel","onConfirm","newOptionLists","isEdit","calculateSubTotal","primaryColor","getProducts","getShoppingList","deleteShoppingListItem","useParams","isB2BUserSelector","currency_code","currencyCode","useTheme","palette","primary","main","params","getB2BShoppingListDetails","getBcShoppingListDetails","deleteB2BShoppingListItem","deleteBcShoppingListItem","useData","dispatch","tableRef","setShoppingListInfo","setCustomerInfo","deleteOpen","deleteItemId","validateSuccessProducts","validateFailureProducts","setAllowJuniorPlaceOrder","setIsCanEditShoppingList","CustomerRole","JUNIOR_BUYER","Deleted","payload","storeConfigSwitchStatus","isEnabled","getB2BJuniorPlaceOrder","getJuniorPlaceOrder","shoppingListActionsPermission","updateB2BShoppingList","updateBcShoppingList","channelId","overflow","ml","pt","spinningHeight","ShoppingDetailTable","shoppingListDetailInfo","listProducts","newProductsSearch","err","handleGetProductsById","newCheckedArr","checkedItemId","handleDeleteItems"],"mappings":"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"}