import{j as s,B as m,a7 as L,T as d}from"./mui-DjJKBaL-.js";import{r as o}from"./intl-D34a3Rgg.js";import{u as v}from"./form-pKe_k4Gy.js";import{B as I}from"./B3Card-D-_peEmX.js";import{B as K}from"./B3CustomForm-BLuJSiae.js";import{G as T,C as z,a as E,j as k,af as M,ag as R}from"./react-setup-Ctz-bmMs.js";import"./load-functions-utyuqH_X.js";import{b as f}from"./base-CC7kTJh2.js";import{r as W,C as D,g as G}from"./recaptcha-DzYa76Yy.js";import{g as q,s as V}from"./config-BZXQUzlM.js";import{L as N,B as A}from"./styled-DAyP9heS.js";import{a as H}from"./router-DcuTQ_yx.js";import"./reactVendor-CkUTLE5B.js";import"./eCache-97HTO8co.js";import"./lodashEs-CONzB2I0.js";import"./muiIcon-BBtg8u0V.js";import"./redux-Bt5-tVzx.js";import"./toolkit-CpEbzTSY.js";import"../index.js";import"./global-D7Yn0gGb.js";import"./dropzone-B1UJxEDf.js";import"./dateFns-DubixNBV.js";import"./validatorRules-BK2xeMTW.js";function J({setOpenPage:c,isEnabledOnStorefront:t,storefrontSiteKey:x,logo:n}){const[l]=E(),[p,a]=o.useState(!1),e=k(),r=q(e),[j,u]=o.useState(!1),[i,C]=o.useState(""),{control:w,handleSubmit:F,getValues:S,formState:{errors:P},setValue:b}=v({mode:"onSubmit"}),h=H();o.useEffect(()=>{(i||!t)&&u(!1)},[i,t]);const B=F(async({email:y})=>{if(t&&!i){u(!0);return}try{if(a(!0),t&&i)try{await W(i,y),h("/login?loginFlag=receivePassword"),a(!1)}catch(g){f.error(g)}t||(await V(y),a(!1),h("/login?loginFlag=receivePassword"))}catch(g){f.error(g)}});return s.jsx(I,{setOpenPage:c,children:s.jsxs(m,{sx:{bgcolor:"#FFFFFF",borderRadius:"4px",display:"flex",flexDirection:"column",mr:"auto",ml:"auto",maxWidth:"537px"},children:[s.jsx(m,{sx:{mt:"20px"},children:n&&s.jsx(N,{children:s.jsx(L,{sx:{maxWidth:l?"175px":"250px"},onClick:()=>{window.location.assign("/")},children:s.jsx("img",{src:n,alt:e("global.tips.registerLogo"),loading:"lazy"})})})}),s.jsxs(m,{sx:{margin:"20px 0 0 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[s.jsx(d,{variant:"h5",sx:{margin:"16px 0"},children:e("forgotPassword.resetPassword")}),s.jsx(d,{variant:"body1",sx:{margin:"0 16px 16px 16px"},children:e("forgotPassword.requestEmail")}),s.jsx(K,{formFields:r,errors:P,control:w,getValues:S,setValue:b,sx:{margin:"0 16px",maxWidth:l?"311px":"505px"}}),t&&j?s.jsx(d,{variant:"body1",sx:{color:"red",display:"flex",alignSelf:"flex-start",marginLeft:"18px",marginTop:"2px",fontSize:"13px"},children:e("login.loginText.missingCaptcha")}):"",t?s.jsx(m,{sx:{marginTop:"20px"},children:s.jsx(D,{siteKey:x,size:"normal",handleGetKey:C})}):"",s.jsx(M,{isSpinning:p,size:20,isFlex:!1,children:s.jsx(A,{children:s.jsx(R,{type:"submit",size:"medium",onClick:B,variant:"contained",sx:{width:"auto"},children:e("forgotPassword.resetPasswordBtn")})})})]})]})})}function fs({setOpenPage:c}){const{logo:t}=o.useContext(T).state,{loginPageDisplay:x}=o.useContext(z).state,[n,l]=o.useState(!1),[p,a]=o.useState("");return o.useEffect(()=>{(async()=>{try{const r=await G();r&&(l(r.isEnabledOnStorefront),a(r.siteKey))}catch(r){f.error(r)}})()},[]),s.jsx(J,{setOpenPage:c,logo:x.displayStoreLogo?t:void 0,isEnabledOnStorefront:n,storefrontSiteKey:p})}export{J as ForgotPassword,fs as default};
//# sourceMappingURL=index-DgGK0wOW.js.map
