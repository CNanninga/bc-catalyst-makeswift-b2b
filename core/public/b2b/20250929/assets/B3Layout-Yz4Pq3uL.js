import{j as e,B as f,a1 as $,a7 as pe,a8 as O,a9 as T,X as de,Y as me,C as ue,G as N,w as xe,y as R,T as ge,O as he,aa as fe,ab as K,ac as E,ad as ye}from"./mui-DjJKBaL-.js";import{r}from"./intl-D34a3Rgg.js";import{j as v,k as be,u as g,U as Ce,a as D,G as z,V as je,W as we,X as Ie,Y as Se,i as Q,C as q,v as ke,_ as W,$ as F,a0 as Be,a1 as Le,y as Y,a2 as J,l as G,a3 as Me,a4 as Z,D as ee,a5 as A,a6 as te,a7 as U,a8 as ve,a9 as De,aa as Fe,ab as Pe,ac as He,ad as Ne}from"./react-setup-Ctz-bmMs.js";import"./load-functions-utyuqH_X.js";import"./base-CC7kTJh2.js";import{a as H,u as se,m as Te}from"./router-DcuTQ_yx.js";import{g as Re,b as Ae}from"./getAssetUrl-CaIqPNyo.js";import{b as Oe}from"./b3TriggerCartNumber-Dt8ppjJx.js";import{A as Ee,c as We,d as ze,e as qe,S as Ge,C as Ke}from"./muiIcon-BBtg8u0V.js";import{H as Ue}from"./HierarchyDialog-Bh43E3c4.js";import{u as Ve}from"./useBlockPendingAccountViewPrice-DCd_y0C0.js";import"./reactVendor-CkUTLE5B.js";import"./eCache-97HTO8co.js";import"./redux-Bt5-tVzx.js";import"./toolkit-CpEbzTSY.js";import"./lodashEs-CONzB2I0.js";import"../index.js";import"./global-D7Yn0gGb.js";import"./dropzone-B1UJxEDf.js";import"./dateFns-DubixNBV.js";const Xe=[0,1,2];function ne(){const m=v(),[u,p]=r.useState(!1),[t,c]=be("sf-isCloseCompanyCredit",!1,sessionStorage),x=g(({company:o})=>o.customer.role),d=g(({b2bFeatures:o})=>o.masqueradeCompany.isAgenting);r.useEffect(()=>{(async()=>{if(!t&&(Xe.includes(Number(x))||Number(x)===3&&d)){const{companyCreditConfig:{creditHold:a,creditEnabled:i}}=await Ce();p(a&&i)}})()},[x,d,t]);const h=()=>{c(!0),p(!1)};return u?e.jsx(f,{sx:{margin:"1rem 0"},children:e.jsx($,{variant:"filled",onClose:()=>h(),severity:"warning",children:m("global.companyCredit.alert")})}):null}function oe(){const[m]=D(),u=g(({global:d})=>d.setOpenPageFn),{state:{isCloseGotoBCHome:p}}=r.useContext(z),t=H(),c=()=>{p||window.location.search.includes("action=order_status")?window.location.href="/":(t("/"),u==null||u({isOpen:!1,openUrl:""})),window.history.replaceState(null,"",window.location.pathname||"/")},x=m?je:we;return e.jsx(x,{children:e.jsx(Ie,{sx:{color:"#757371"},onClick:c})})}function ie(){const{state:{logo:m}}=r.useContext(z),[u]=D();return e.jsx(f,{sx:u?{height:"40px",width:"140px","& li":{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"1rem"},"& img":{maxHeight:"40px"}}:{width:"200px",height:"65px",display:"flex",alignItems:"center",maxHeight:"65px","& img":{maxHeight:"65px"}},children:e.jsx(pe,{sx:{maxWidth:"200px",cursor:"pointer","& .MuiImageListItem-img":{objectFit:"contain",width:"auto"}},onClick:()=>{window.location.href="/"},children:e.jsx("img",{src:m||Re(Ae),alt:"logo"})})})}function _e({width:m,list:u,title:p,value:t,handleItemClick:c,menuRenderItemName:x=o=>o.name,...d},h){const[o]=D(),[a,i]=r.useState(!1),b=r.useRef(null);r.useImperativeHandle(h,()=>({setOpenDropDown:()=>i(!0)}));const C=()=>{i(!1)};return e.jsxs(f,{sx:{width:m||"auto"},children:[Se?e.jsx(T,{primary:p,sx:{"& span":{fontWeight:o?400:700,color:"#333333"}}}):e.jsxs(O,{ref:b,onClick:()=>i(!0),sx:{pr:0},children:[e.jsx(T,{primary:p,sx:{"& span":{fontWeight:o?400:700,color:"#333333"}}}),a?e.jsx(Ee,{}):e.jsx(We,{})]}),e.jsx(de,{anchorEl:b.current,open:a,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},id:"customized-menu",keepMounted:!0,onClose:C,sx:{"& .MuiList-root.MuiList-padding.MuiMenu-list":{pt:o?0:"8px",pb:o?0:"8px",maxHeight:o?"auto":"200px"}},...d||{},children:u.length&&u.map(w=>{const{key:y}=w,l=t===y?"#3385d6":"black";return e.jsx(me,{sx:{color:l,minWidth:o?"auto":m||"155px"},onClick:()=>{C(),c&&c(y)},children:x(w)},y)})})]})}const ae=r.forwardRef(_e),V=[{name:"Log out",key:"logout",idLang:"global.button.logout"}];function re({closeSidebar:m}){const[u]=D(),p=g(({company:a})=>a.customer.firstName),t=g(({company:a})=>a.customer.lastName),c=H(),x=v(),d=async a=>{const i=V.find(b=>b.key===a);i&&(i.key==="logout"?c("/login?loginFlag=loggedOutLogin"):i.type==="path"&&i.key&&c(i.key),m&&m(!1))},h="".concat(p,"  ").concat(t),o=r.useMemo(()=>V.map(a=>({key:a.key,name:x(a.idLang)})),[x]);return e.jsx(f,{sx:{minWidth:"150px",display:"flex",justifyContent:u?"start":"end",mr:"-5px",fontSize:"16px",color:"#333333",textAlign:"center",alignItems:"center"},children:e.jsx(ae,{title:h,handleItemClick:d,list:o})})}const X={currentInfo:{langId:"companyHierarchy.chip.currentCompany"},representingInfo:{langId:"companyHierarchy.chip.selectCompany"}};function $e(){var j;const m=v(),u=Q(),[p,t]=r.useState(!1),[c,x]=r.useState(null),d=r.useRef(null),{state:{switchAccountButton:{color:h="#ED6C02"}}}=r.useContext(q),{id:o}=g(({company:n})=>n.companyInfo),a=g(({b2bFeatures:n})=>n.masqueradeCompany.id),{pagesSubsidiariesPermission:i}=g(({company:n})=>n),{selectCompanyHierarchyId:b,companyHierarchyList:C}=g(({company:n})=>n.companyHierarchyInfo),{isOpenCompanyHierarchyDropDown:w}=g(({global:n})=>n),y=r.useMemo(()=>Object.keys(i).some(n=>i[n]),[i]);r.useEffect(()=>{var n;w&&(d!=null&&d.current)&&((n=d.current)==null||n.setOpenDropDown())},[w]);const l=r.useMemo(()=>{var I;const n=b||o||a,B=(I=C.find(S=>Number(S.companyId)===Number(n)))==null?void 0:I.companyName,M=C.map(S=>({name:S.companyName,key:S.companyId}));return{title:B,list:M}},[b,o,C,a]),k=()=>{t(!1),u(ke(!1))},P=n=>{const B=l.list.find(M=>Number(M.key)===n);B&&(x({companyId:Number(B.key),companyName:B.name}),t(!0))},L=n=>{const{name:B,key:M}=n,I=b||o||a;return e.jsxs(N,{container:!0,direction:"row",sx:{justifyContent:"space-between"},children:[e.jsx(N,{sx:{mr:2},children:B}),e.jsx(N,{sx:{width:"20px",display:"flex",justifyContent:"center"},children:M===Number(I)&&e.jsx(ze,{sx:{fontSize:"1.2rem"}})})]})},{langId:s}=b?X.representingInfo:X.currentInfo;return!((j=l==null?void 0:l.list)!=null&&j.length)||!y||!o&&!a?null:e.jsxs(e.Fragment,{children:[e.jsxs(f,{sx:{minWidth:"100px",display:"flex",justifyContent:"start",alignItems:"center",fontSize:"1rem",color:"#333333","& .MuiListItemButton-root":{paddingLeft:"0"}},children:[e.jsx(ae,{ref:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},menuRenderItemName:L,title:(l==null?void 0:l.title)||"",handleItemClick:n=>P(Number(n)),list:(l==null?void 0:l.list)||[]}),e.jsx(ue,{label:m(s),size:"small",sx:{backgroundColor:b?h:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]}),e.jsx(Ue,{open:p,handleClose:k,currentRow:c})]})}const Qe=xe(f)(()=>({"& svg":{color:"#FFFFFF"}}));function Ye(m){const{title:u}=m,p=Q(),t=v(),c=g(({company:s})=>s.customer.loginType),x=g(({company:s})=>s.customer.role),d=g(({company:s})=>s.companyInfo.status),h=W.get("blockPendingAccountOrderCreation"),[o]=Ve(),[a,i]=r.useState(""),[b,C]=r.useState(!1),[w,y]=r.useState("success"),[l,k]=r.useState("#2E7D32"),P=()=>{p(Be(Le.WAITING_LOGIN)),C(!1)},L={};return Number(d)!==0&&(L.onClose=P),r.useEffect(()=>{const s=Number(d)===0?!0:c===1,j=x===100?!1:s;C(j),j&&(Number(d)===0&&(h&&o&&i(t(F.pendingOrderingAndViewPriceBlocked)),h&&!o&&i(t(F.pendingOrderingBlocked)),!h&&o&&i(t(F.pendingViewPriceBlocked)),!h&&!o&&i(t(F.pendingOrderingNotBlocked)),y("info"),k("#0288D1")),Number(d)===1&&(i(t(F.approvedTip)),y("success"),k("#2E7D32")),Number(d)===2&&(i(F.rejectedTip),y("warning"),k("#ED6C02")))},[h,o,d,c,x,t]),b?e.jsx(Qe,{sx:{mb:u?"20px":"0"},children:e.jsx($,{...L,severity:w||"success",sx:{color:"#FFFFFF",backgroundColor:l},children:a})}):null}function Je({title:m}){const u=g(Y),p=g(({company:l})=>l.customer.role),t=g(({company:l})=>l.companyInfo),c=g(({b2bFeatures:l})=>l.masqueradeCompany.companyName),x=g(({global:l})=>l.cartNumber),d=H(),h=v(),[o]=D(),{state:{portalStyle:{backgroundColor:a="#FEF9F5"}}}=r.useContext(q),{purchasabilityPermission:i}=g(J),{isEnabledCompanyHierarchy:b}=g(({company:l})=>l.companyHierarchyInfo),C=u?i:!0,w=G(a),y=()=>{Me("on-click-cart-button")&&(window.location.href=Z)};return r.useEffect(()=>{Oe()},[]),e.jsxs(f,{children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"70px",alignItems:"center"},children:[e.jsxs(N,{sx:{alignItems:"center",flexDirection:"row",display:"flex"},children:[e.jsx(f,{component:"h4",sx:{fontSize:"20px",fontWeight:"500",color:w||"#333333",ml:0},children:Number(p)===3&&((t==null?void 0:t.companyName)||c||h("global.B3MainHeader.superAdmin"))}),b&&e.jsx($e,{})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center"},children:[p!==100&&e.jsx(re,{}),e.jsxs(f,{sx:{marginLeft:"8px"},children:[p===100&&e.jsx(R,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{d("/login")},children:h("global.B3MainHeader.signIn")}),e.jsx(R,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{window.location.href="/"},children:h("global.B3MainHeader.home")}),C&&e.jsxs(R,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:y,children:[h("global.B3MainHeader.cart"),x>0?e.jsx(ge,{id:"cart-number-icon",sx:{backgroundColor:"#1976D2",minWidth:"21px",height:"20px",color:"#FFFFFF",borderRadius:"64px",fontSize:"12px",fontWeight:"500",lineHeight:"20px",marginLeft:"3px",padding:"0px 6.5px"},children:x}):null]})]})]})]}),m&&e.jsx(f,{component:"h3",sx:{height:"40px",m:"0",fontSize:"34px",fontWeight:400,lineHeight:"42px",display:"flex",alignItems:"end",mb:"24px",mt:o?0:"24px",color:w},children:m}),e.jsx(Ye,{title:m})]})}const _=m=>m.reduce((p,t)=>{var c;if(t!=null&&t.subsidiariesCompanyKey){const x=(c=t.permissionCodes)!=null&&c.includes(",")?t.permissionCodes.split(",")[0].trim():t.permissionCodes;p[t.subsidiariesCompanyKey]=te({level:3,code:x})}return p},{});function ce({closeSidebar:m}){const[u]=D(),p=H(),t=se(),c=v(),{dispatch:x}=r.useContext(ee),d=g(({company:s})=>s.customer.role),{selectCompanyHierarchyId:h,isEnabledCompanyHierarchy:o}=g(({company:s})=>s.companyHierarchyInfo),{permissions:a}=g(({company:s})=>s),{state:i}=r.useContext(z),{quoteDetailHasNewMessages:b,registerEnabled:C}=i,y=he().palette.primary.main,l=()=>{p("/register"),x({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},k=s=>{if(d===100){x({type:"common",payload:{globalMessageDialog:{open:!0,title:"Registration",message:s.configKey==="shoppingLists"?"Please create an account, or login to create a shopping list.":"To receive full access to buyer portal, please register. It will take 2 minutes.",cancelText:"Cancel",saveText:C?"Register":"",saveFn:l}}});return}p(s.path),u&&m&&m(!1)};r.useEffect(()=>{let s=!1;const{hash:j}=window.location,n=j.split("#")[1]||"",B=A(i).filter(I=>I.isMenuItem);if(n){const I=A(i).find(S=>Te(S.path,n));if(I&&(I!=null&&I.subsidiariesCompanyKey)){const{permissionCodes:S}=I,le=S!=null&&S.includes(",")?S.split(",")[0].trim():S;s=te({code:le,level:3})}}const M=_(B);U.dispatch(ve(M)),U.dispatch(De({isHasCurrentPagePermission:s}))},[h,i,p]);const P=r.useMemo(()=>{let s=A(i).filter(n=>n.isMenuItem);const j=_(s);return h?s=s.filter(n=>n!=null&&n.subsidiariesCompanyKey?j[n.subsidiariesCompanyKey]:!1):s=s.filter(n=>(n==null?void 0:n.subsidiariesCompanyKey)==="companyHierarchy"?o&&j[n.subsidiariesCompanyKey]:!0),s},[h,a,i,o]),L=s=>{if(t.pathname===s)return W.set("prevPath",s),!0;if(t.pathname.includes("orderDetail")){const j=W.get("prevPath")==="/company-orders"?"/company-orders":"/orders";if(s===j)return!0}return!!(t.pathname.includes("shoppingList")&&s==="/shoppingLists"||(t.pathname.includes("/quoteDetail")||t.pathname.includes("/quoteDraft"))&&s==="/quotes")};return e.jsx(fe,{sx:{width:"100%",maxWidth:360,bgcolor:u?"background.paper":"background.default",color:y||"info.main","& .MuiListItem-root":{"& .MuiButtonBase-root.Mui-selected":{color:G(y)||"#fff",bgcolor:"primary.main",borderRadius:"4px"},"& .MuiButtonBase-root:hover:not(.Mui-selected)":{bgcolor:Fe(y,.12),borderRadius:"4px"}}},component:"nav","aria-labelledby":"nested-list-subheader",children:P.map(s=>{if(s.name==="Quotes"){const{pathname:j}=t;return e.jsx(K,{disablePadding:!0,children:e.jsx(E,{badgeContent:b&&j.includes("quoteDetail")?"":0,variant:"dot",sx:{width:"100%","& .MuiBadge-badge.MuiBadge-dot":{width:8,height:8,bgcolor:"#FFFFFF",right:14,top:22}},children:e.jsx(O,{onClick:()=>k(s),selected:L(s.path),children:e.jsx(T,{primary:c(s.idLang)})})})},s.path)}return e.jsx(K,{disablePadding:!0,children:e.jsx(O,{onClick:()=>k(s),selected:L(s.path),children:e.jsx(T,{primary:c(s.idLang)})})},s.path)})})}function Ze({children:m,title:u}){const p=g(Y),[t,c]=r.useState(!1),x=g(({global:C})=>C.cartNumber),d=g(({b2bFeatures:C})=>C.masqueradeCompany.isAgenting),{purchasabilityPermission:h}=g(J),o=p?h:!0,{state:{portalStyle:{backgroundColor:a="#FEF9F5"}}}=r.useContext(q),i=()=>{c(!0)},b=G(a);return e.jsxs(f,{sx:{height:"70vh",p:"4vw",display:"flex",flexDirection:"column"},children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:"4.5vw"},children:[e.jsx(E,{badgeContent:0,color:"secondary",children:e.jsx(qe,{onClick:i,sx:{color:b}})}),e.jsx(ie,{}),e.jsxs(f,{sx:{display:"flex",justifyContent:"space-between","& span":{marginRight:"1.5rem"}},children:[o&&e.jsx(E,{badgeContent:x,max:1e3,sx:{"& .MuiBadge-badge":{color:"#FFFFFF",backgroundColor:"#1976D2",fontWeight:500,fontSize:"12px",minWidth:"18px",height:"18px",top:"8px",right:"3px",marginRight:"-0.5rem"}},children:e.jsx(Ge,{sx:{color:"rgba(0, 0, 0, 0.54)",marginRight:"-0.5rem"},onClick:()=>{window.location.href=Z}})}),e.jsx(f,{sx:{marginLeft:"2px",height:"24px"},children:e.jsx(oe,{})})]})]}),e.jsx(f,{component:"h1",sx:{p:0,m:0,mb:"6vw",fontSize:"34px",fontWeight:"400",color:b||"#263238"},children:u}),e.jsx(ne,{}),e.jsx(f,{sx:{flex:1,display:"flex",paddingBottom:d?"52px":"0"},children:m}),t&&e.jsxs(f,{sx:{height:"100vh",position:"fixed",width:"92vw",zIndex:1e3,left:0,top:0,p:"4vw",backgroundColor:"white",boxShadow:"0px 7px 8px -4px #00000033, 0px 12px 17px 2px #00000024, 0px 5px 22px 4px #0000001f"},children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pb:"4vw"},children:[e.jsx(re,{closeSidebar:c}),e.jsx(Ke,{onClick:()=>c(!1)})]}),e.jsx(ce,{closeSidebar:c})]})]})}const et={"/purchased-products":"global.purchasedProducts.title","/orders":"global.orders.title","/company-orders":"global.companyOrders.title"};function jt({children:m}){const[u]=D(),p=ye("(min-width:1775px)"),t=se(),[c,x]=r.useState(""),d=v(),h=g(({company:y})=>y.customer.emailAddress),o=g(({company:y})=>y.customer.id),{state:{globalMessageDialog:a},dispatch:i}=r.useContext(ee),b=H();r.useEffect(()=>{(!h||!o)&&!Pe(t.pathname)&&b("/login")},[h,o,t,b]),r.useEffect(()=>{const y=He.find(l=>l.path===t.pathname);if(y&&t.pathname!=="/quoteDraft"){const l=Object.entries(et).find(([k])=>k===t.pathname);x(d(l?l[1]:y.idLang))}else x("");i({type:"common",payload:{tipMessage:{msgs:[]}}})},[t]);const C=()=>{i({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},w=r.useMemo(()=>["/invoice"].includes(t.pathname)?{overflowX:"hidden"}:{},[t]);return e.jsxs(f,{children:[u?e.jsx(Ze,{title:c,children:m}):e.jsxs(f,{id:"app-mainPage-layout",sx:{display:"flex",minHeight:"100vh",margin:"auto",width:p?1775:"100%",minWidth:p?1775:"100%",maxWidth:p?1775:"100%",flexDirection:"row",p:"32px 63px 70px 63px"},children:[e.jsx(oe,{}),e.jsxs(f,{sx:{display:"flex",flexDirection:"column",width:"200px",displayPrint:"none"},children:[e.jsx(ie,{}),e.jsx(f,{sx:{pt:"24px"},children:e.jsx(ce,{})})]}),e.jsxs(f,{sx:{flex:1,display:"flex",flexDirection:"column",maxWidth:"1450px",width:"100%",p:"0 0px 0px 50px",...w},children:[e.jsx(Je,{title:c}),e.jsx(ne,{}),e.jsx(f,{component:"main",sx:{mt:!u&&!c?"24px":"0"},children:m})]})]}),e.jsx(Ne,{isOpen:a.open,title:a.title,leftSizeBtn:a.cancelText,rightSizeBtn:a.saveText,handleLeftClick:a.cancelFn||C,handRightClick:a.saveFn,showRightBtn:!!a.saveText,children:e.jsx(f,{sx:{display:"flex",justifyContent:u?"center":"start",width:u?"100%":"450px",height:"100%"},children:a.message})})]})}export{jt as default};
//# sourceMappingURL=B3Layout-Yz4Pq3uL.js.map
