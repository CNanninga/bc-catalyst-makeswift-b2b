{"version":3,"file":"B3CompanyHierarchyExternalButton-legacy-DR7GG5xc.js","sources":["../../src/components/outSideComponents/B3CompanyHierarchyExternalButton.tsx"],"sourcesContent":["import { useContext, useMemo } from 'react';\nimport { Business as BusinessIcon } from '@mui/icons-material';\nimport { Box, SnackbarOrigin, SxProps } from '@mui/material';\nimport Snackbar from '@mui/material/Snackbar';\n\nimport { PAGES_SUBSIDIARIES_PERMISSION_KEYS, PATH_ROUTES, Z_INDEX } from '@/constants';\nimport useMobile from '@/hooks/useMobile';\nimport { useB3Lang } from '@/lib/lang';\nimport { type SetOpenPage } from '@/pages/SetOpenPage';\nimport { CustomStyleContext } from '@/shared/customStyleButton';\nimport { setOpenCompanyHierarchyDropDown, useAppDispatch, useAppSelector } from '@/store';\nimport { PagesSubsidiariesPermissionProps } from '@/types';\n\nimport {\n  getContrastColor,\n  getLocation,\n  getPosition,\n  getStyles,\n  setMUIMediaStyle,\n  splitCustomCssValue,\n} from './utils/b3CustomStyles';\n\nconst bottomHeightPage = ['shoppingList/', 'purchased-products'];\n\ninterface B3CompanyHierarchyExternalButtonProps {\n  isOpen: boolean;\n  setOpenPage: SetOpenPage;\n}\nfunction B3CompanyHierarchyExternalButton({\n  setOpenPage,\n  isOpen,\n}: B3CompanyHierarchyExternalButtonProps) {\n  const b3Lang = useB3Lang();\n\n  const { hash } = window.location;\n\n  const [isMobile] = useMobile();\n\n  const dispatch = useAppDispatch();\n\n  const { selectCompanyHierarchyId, companyHierarchyList } = useAppSelector(\n    ({ company }) => company.companyHierarchyInfo,\n  );\n\n  const { pagesSubsidiariesPermission } = useAppSelector(({ company }) => company);\n\n  const isAddBottom = bottomHeightPage.some((item: string) => hash.includes(item));\n\n  const {\n    state: { switchAccountButton },\n  } = useContext(CustomStyleContext);\n\n  const defaultLocation: SnackbarOrigin = {\n    vertical: 'bottom',\n    horizontal: 'left',\n  };\n\n  const {\n    color = '',\n    customCss = '',\n    location = 'bottomLeft',\n    horizontalPadding = '',\n    verticalPadding = '',\n  } = switchAccountButton;\n\n  const cssInfo = splitCustomCssValue(customCss);\n  const {\n    cssValue,\n    mediaBlocks,\n  }: {\n    cssValue: string;\n    mediaBlocks: string[];\n  } = cssInfo;\n  const MUIMediaStyle = setMUIMediaStyle(mediaBlocks);\n\n  const baseStyles: SxProps = {\n    backgroundColor: color || '#ED6C02',\n    color: getContrastColor(color || '#FFFFFF'),\n    bottom: 0,\n    ...getStyles(cssValue),\n  };\n\n  const desktopStyles: SxProps = isAddBottom ? { bottom: '90px !important' } : {};\n  const buyerPortalStyles: SxProps = {\n    bottom: '24px',\n    left: '24px',\n    right: 'auto',\n    top: 'unset',\n  };\n  const mobileOpenStyles: SxProps = {\n    width: '100%',\n    bottom: 0,\n    left: 0,\n  };\n\n  let sx: SxProps = { ...baseStyles };\n\n  if (isMobile) {\n    if (isOpen) {\n      sx = { ...sx, ...mobileOpenStyles };\n    } else {\n      sx = { ...sx, ...getPosition(horizontalPadding, verticalPadding, location) };\n    }\n  } else if (isOpen) {\n    sx = { ...sx, ...buyerPortalStyles, ...desktopStyles };\n  } else {\n    sx = { ...sx, ...getPosition(horizontalPadding, verticalPadding, location), ...desktopStyles };\n  }\n\n  const companyName: string = useMemo(() => {\n    if (!selectCompanyHierarchyId) {\n      return '';\n    }\n\n    return (\n      companyHierarchyList.find((company) => company.companyId === Number(selectCompanyHierarchyId))\n        ?.companyName || ''\n    );\n  }, [selectCompanyHierarchyId, companyHierarchyList]);\n\n  const handleHierarchyExternalBtnClick = () => {\n    const { companyHierarchy } = pagesSubsidiariesPermission;\n\n    if (companyHierarchy) {\n      const { COMPANY_HIERARCHY } = PATH_ROUTES;\n\n      setOpenPage({\n        isOpen: true,\n        openUrl: COMPANY_HIERARCHY,\n      });\n\n      return;\n    }\n\n    const key = Object.keys(pagesSubsidiariesPermission).find((key) => {\n      return !!pagesSubsidiariesPermission[key as keyof PagesSubsidiariesPermissionProps];\n    });\n\n    const route = PAGES_SUBSIDIARIES_PERMISSION_KEYS.find((item) => item.key === key);\n\n    if (route && !isOpen) {\n      setOpenPage({\n        isOpen: true,\n        openUrl: route.path,\n      });\n    }\n    dispatch(setOpenCompanyHierarchyDropDown(true));\n  };\n\n  return (\n    <>\n      {!!companyName && (\n        <Snackbar\n          sx={{\n            zIndex: Z_INDEX.NOTIFICATION,\n            height: '52px',\n            borderRadius: '4px',\n            fontSize: '16px',\n            fontFamily: '\"Roboto\",\"Helvetica\",\"Arial\",sans-serif',\n            mb: isMobile ? '4rem' : '0px',\n            ...sx,\n            ...MUIMediaStyle,\n          }}\n          anchorOrigin={getLocation(location) || defaultLocation}\n          open\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'center',\n              padding: '1rem 2rem',\n              borderRadius: '4px',\n              fontSize: '16px',\n              cursor: 'pointer',\n            }}\n            onClick={() => handleHierarchyExternalBtnClick()}\n          >\n            <BusinessIcon sx={{ fontSize: '20px' }} />\n            <Box\n              sx={{\n                margin: '0 0.5rem',\n              }}\n            >\n              {b3Lang('global.companyHierarchy.externalBtn')}\n            </Box>\n            <Box\n              sx={{\n                fontWeight: 'bold',\n              }}\n            >\n              {companyName}\n            </Box>\n          </Box>\n        </Snackbar>\n      )}\n    </>\n  );\n}\n\nexport default B3CompanyHierarchyExternalButton;\n"],"names":["setOpenPage","isOpen","b3Lang","useB3Lang","hash","window","location","isMobile","useMobile","dispatch","useAppDispatch","selectCompanyHierarchyId","companyHierarchyList","useAppSelector","company","companyHierarchyInfo","pagesSubsidiariesPermission","isAddBottom","bottomHeightPage","some","item","includes","state","switchAccountButton","useContext","CustomStyleContext","color","customCss","horizontalPadding","verticalPadding","cssInfo","splitCustomCssValue","cssValue","mediaBlocks","MUIMediaStyle","setMUIMediaStyle","baseStyles","backgroundColor","getContrastColor","bottom","getStyles","desktopStyles","buyerPortalStyles","left","right","top","mobileOpenStyles","width","sx","getPosition","companyName","useMemo","find","companyId","Number","jsx","Fragment","children","Snackbar","zIndex","Z_INDEX","NOTIFICATION","height","borderRadius","fontSize","fontFamily","mb","anchorOrigin","getLocation","vertical","horizontal","open","jsxs","Box","display","alignItems","padding","cursor","onClick","handleHierarchyExternalBtnClick","companyHierarchy","COMPANY_HIERARCHY","PATH_ROUTES","openUrl","key","Object","keys","route","PAGES_SUBSIDIARIES_PERMISSION_KEYS","path","setOpenCompanyHierarchyDropDown","BusinessIcon","margin","fontWeight"],"mappings":"yzBA4BA,UAA0CA,YACxCA,EAAAC,OACAA,IAEA,MAAMC,EAASC,KAETC,KAAEA,GAASC,OAAOC,UAEjBC,GAAYC,IAEbC,EAAWC,KAEXC,yBAAEA,EAAAC,qBAA0BA,GAAyBC,EACzD,EAAGC,aAAcA,EAAQC,uBAGrBC,4BAAEA,GAAgCH,EAAe,EAAGC,aAAcA,GAElEG,EAAcC,EAAiBC,KAAMC,GAAiBhB,EAAKiB,SAASD,KAGxEE,OAAOC,oBAAEA,IACPC,EAAAA,WAAWC,IAOTC,MACJA,EAAQ,GAAAC,UACRA,EAAY,GAAArB,SACZA,EAAW,aAAAsB,kBACXA,EAAoB,GAAAC,gBACpBA,EAAkB,IAChBN,EAEEO,EAAUC,EAAoBJ,IAC9BK,SACJA,EAAAC,YACAA,GAIEH,EACEI,EAAgBC,EAAiBF,GAEjCG,EAAsB,CAC1BC,gBAAiBX,GAAS,UAC1BA,MAAOY,EAAiBZ,GAAS,WACjCa,OAAQ,KACLC,EAAUR,IAGTS,EAAyBxB,EAAc,CAAEsB,OAAQ,mBAAsB,CAAA,EACvEG,EAA6B,CACjCH,OAAQ,OACRI,KAAM,OACNC,MAAO,OACPC,IAAK,SAEDC,EAA4B,CAChCC,MAAO,OACPR,OAAQ,EACRI,KAAM,GAGR,IAAIK,EAAc,IAAKZ,GAInBY,EAFAzC,EACEN,EACG,IAAK+C,KAAOF,GAEZ,IAAKE,KAAOC,EAAYrB,EAAmBC,EAAiBvB,IAE1DL,EACJ,IAAK+C,KAAON,KAAsBD,GAElC,IAAKO,KAAOC,EAAYrB,EAAmBC,EAAiBvB,MAAcmC,GAGjF,MAAMS,EAAsBC,EAAAA,QAAQ,IAC7BxC,GAKHC,EAAqBwC,KAAMtC,GAAYA,EAAQuC,YAAcC,OAAO3C,KAChEuC,aALG,GAOR,CAACvC,EAA0BC,IA+B9B,OACE2C,EAAAA,IAAAC,EAAAA,SAAA,CACGC,WAAEP,GACDK,EAAAA,IAACG,EAAA,CACCV,GAAI,CACFW,OAAQC,EAAQC,aAChBC,OAAQ,OACRC,aAAc,MACdC,SAAU,OACVC,WAAY,0CACZC,GAAI3D,EAAW,OAAS,SACrByC,KACAd,GAELiC,aAAcC,EAAY9D,IA/GM,CACtC+D,SAAU,SACVC,WAAY,QA8GNC,MAAI,EAEJd,SAAAe,EAAAA,KAACC,EAAA,CACCzB,GAAI,CACF0B,QAAS,OACTC,WAAY,SACZC,QAAS,YACTb,aAAc,MACdC,SAAU,OACVa,OAAQ,WAEVC,QAASA,IAvDqBC,MACtC,MAAMC,iBAAEA,GAAqBhE,EAE7B,GAAIgE,EAAkB,CACpB,MAAMC,kBAAEA,GAAsBC,EAO9B,YALAlF,EAAY,CACVC,QAAQ,EACRkF,QAASF,GAIb,CAEA,MAAMG,EAAMC,OAAOC,KAAKtE,GAA6BoC,KAAMgC,KAChDpE,EAA4BoE,IAGjCG,EAAQC,EAAmCpC,KAAMhC,GAASA,EAAKgE,MAAQA,GAEzEG,IAAUtF,GACZD,EAAY,CACVC,QAAQ,EACRkF,QAASI,EAAME,OAGnBhF,EAASiF,GAAgC,KA6BlBX,GAEftB,SAAA,CAAAF,EAAAA,IAACoC,EAAA,CAAa3C,GAAI,CAAEgB,SAAU,UAC9BT,EAAAA,IAACkB,EAAA,CACCzB,GAAI,CACF4C,OAAQ,YAGTnC,WAAO,yCAEVF,EAAAA,IAACkB,EAAA,CACCzB,GAAI,CACF6C,WAAY,QAGbpC,SAAAP,UAOf,GA/KA,MAAMhC,EAAmB,CAAC,gBAAiB"}